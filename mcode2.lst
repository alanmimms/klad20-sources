MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 1
MCOD2T	MAC	17-Oct-88 14:28		CHANNEL BUS INTERFACE TEST - PART 1

     1						XLIST
     2						LIST
     3
     4
     5
     6
     7					TITLE	MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.1
     8
     9
    10
    11
    12
    13					^
    14
    15
    16
    17
    18						COMMENT	$
    19
    20						MCODE2 IS THE 1ST PART OF A 2 PART MICRODIAGNOSTIC OF THE
    21					CHANNEL BUS INTERFACE.  IT IS MAINLY A LOGIC TEST (AS OPPOSED TO A FUNCTIONAL
    22					TEST) WHICH DOES THE FOLLOWING:
    23
    24						(1)   TESTS THE WRITING AND READING OF THE MICROBUS REGISTERS,
    25						(2)   TESTS THE HANDSHAKING LOGIC ASSOCIATED WITH CHANNEL MODE
    26							TRANSFERS.  THIS IS ON BOTH THE DATA PATH SIDE AND THE
    27							CHANNEL BUS SIDE.
    28
    29					IN ORDER TO SIMULATE THE ACTIONS OF A DEVICE ON THE CHANNEL BUS, THE LOOP
    30					BACK FEATURE IS USED.  THIS ALLOWS THE LOOPING BACK OF TAG OUT AND BUS OUT
    31					LINES INTO TAG IN AND BUS IN LINES, RESPECTIVELY.  THE BUS OUT LINES ARE
    32					LOOPED BACK COMPLEMENTED.
    33
    34					WHEN THE DX20 IS OPERATING AS A CONTROL UNIT, IT IS REQUIRED THAT THE DIAGNOSTIC
    35					NOT ALLOW ANY SIGNALS TO PROPAGATE ONTO THE TAG OUT OR BUS OUT LINES.  TO
    36					INSURE THIS, THE "ON LINE" BIT IS KEPT CLEARED.  THIS DISABLES THE DRIVERS.
    37					IN THE ONE TEST WHERE "ON LINE" IS SET (TO TEST THAT IT CAN BE SET), "CU RESET"
    38					IS ENABLED SO THAT THE DRIVERS WILL REMAIN DISABLED.  ALSO, AFTER CLEARING
    39					"ON LINE" A WAIT PERIOD MUST BE OBSERVED BEFORE CHANNEL MODE OR LOOP ENABLE
    40					CAN BE ASSERTED.  THIS IS TO INSURE PROPAGATION OF "SEL OUT".
    41
    42					NOTE: ALL DOCUMENTATION USES THE TERM "SET" TO DENOTE THE ASSERTION OF A
    43						SIGNAL AND "CLEAR" TO DENOTE ITS NEGATION, WHETHER OR NOT THE SIGNAL
    44						IS ASSERTED HIGH OR LOW.
    45
    46					$
    47			000100			RPTCNT=	100			;SET REPEAT COUNT TO 100 TIMES
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 2
MCOD2T	MAC	17-Oct-88 14:28		CHANNEL BUS INTERFACE REGISTER BIT DEFINITIONS

    48						SUBTTL	CHANNEL BUS INTERFACE REGISTER BIT DEFINITIONS
    49
    50					;DEFINE CHANNEL BUS INTERFACE REGISTERS
    51
    52			000000		CSR0=0				;CONTROL AND STATUS REGISTER 0 (READ/WRITE CLEAR)
    53			000001		CSR1=1				;CONTROL AND STATUS REGISTER 1 (READ/WRITE)
    54			000002		TOR0=2				;TAG OUT REGISTER 0 (READ/WRITE)
    55			000003		TOR1=3				;TAG OUT REGISTER 1 (READ/WRITE)
    56			000004		TAGIN0=4			;TAG IN REGISTER 0 (READ ONLY)
    57			000005		TAGIN1=5			;TAG IN REGISTER 1 (READ ONLY BITS 7-4)
    58			000005		SPADR=5				;SCRATCH PAD ADDRESS REGISTER (READ/WRITE BITS 3-0)
    59			000006		DRLO=6				;DATA REGISTER 0 (READ ONLY)
    60			000007		CBILO=7				;BUS IN REGISTER 0 (READ ONLY)
    61			000010		SPDALO=10			;SCRATCH PAD DATA REGISTER 0 (WRITE ONLY)
    62			000011		BORLO=11			;BUS OUT REGISTER 0 (WRITE ONLY)
    63			000012		DRHI=12				;DATA REGISTER 1 (READ ONLY)
    64			000013		CBIHI=13			;BUS IN REGISTER 1 (READ ONLY)
    65			000014		SPDAHI=14			;SCRATCH PAD DATA REGISTER 1 (WRITE ONLY)
    66			000015		BORHI=15			;BUS OUT REGISTER 1 (WRITE ONLY)
    67			000016		CUSTAT=16			;CONTROL UNIT RESET STATUS REGISTER (WRITE ONLY)
    68
    69					;WRITEABLE PULSES DEFINITIONS
    70
    71			000004		CLSLRQ=4			;CLEAR SLVE REQ PULSE
    72			000006		CLKDRL=6			;CLOCK DR REG 0
    73
    74					;REGISTER BIT DEFINITIONS
    75
    76					;CSR0
    77
    78					;READ ONLY BITS
    79
    80			000200		EXFER=1B28			;END XFER
    81			000100		TIMOUT=1B29			;TIME OUT FLAG
    82			000040		DPPE=1B30			;DP PE FLAG
    83			000020		UBPE=1B31			;UB PE FLAG
    84			000010		MKPE=1B32			;MK PE FLAG
    85			000004		BUS1PE=1B33			;BUS1 PE FLAG
    86			000002		BUS0PE=1B34			;BUS0 PE FLAG
    87			000001		SLVSEL=1B35			;SLVE SEL
    88
    89					;WRITE ONLY BITS
    90
    91			000002		CLRFLG=1B34			;CLEARS ALL FLAGS
    92			000001		CSLVSL=1B35			;CLEARS "SLVE SEL"
    93
    94					;CSR1
    95
    96			000200		SPEN=1B28			;SP ENABLE
    97			000100		DIHISP=1B29			;DIAG HIGH SPEED
    98			000040		EVPAR=1B30			;EVEN PAR
    99			000020		EXTBUS=1B31			;EXTENDED BUS
   100			000010		MOD360=1B32			;360 MODE
   101			000004		LOOPEN=1B33			;LOOP ENABLE
   102			000002		ONLINE=1B34			;ON LINE
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 2-1
MCOD2T	MAC	17-Oct-88 14:28		CHANNEL BUS INTERFACE REGISTER BIT DEFINITIONS

   103			000001		CHANL=1B35			;CHANNEL MODE
   104
   105					;TOR0
   106
   107			000200		SRVOUT=1B28			;TOR SRV OUT
   108			000100		CLKOUT=1B29			;TOR CLK OUT
   109			000040		MTROUT=1B30			;TOR MTR OUT
   110			000020		ADROUT=1B31			;TOR ADR OUT
   111			000010		HLDOUT=1B32			;TOR HLD OUT
   112			000004		TMREN=1B33			;TIMER INTERRUPT ENABLE
   113			000002		SELOUT=1B34			;TOR SEL OUT
   114			000001		CMDOUT=1B35			;TOR CMD OUT
   115
   116					;TOR1
   117
   118			000200		OPLOUT=1B28			;TOR OPL OUT
   119			000100		CURSEN=1B29			;ENABLE CU RESET
   120			000040		SUPOUT=1B30			;TOR SUP OUT
   121			000020		DATOUT=1B31			;TOR DAT OUT
   122			000010		DISACK=1B32			;DIAG SLVE ACK
   123			000004		DIMUX=1B33			;DIAG MUX BIT
   124			000002		TODOUT=1B34			;TO DAT OUT
   125			000001		TOSOUT=1B35			;TO SRV OUT
   126
   127					;TAGIN0
   128
   129			000200		OPLIN=1B28			;TI OPL IN
   130			000100		MK0IN=1B29			;TI MK 0 IN
   131			000040		MK1IN=1B30			;TI MK 1 IN
   132			000020		ADRIN=1B31			;TI ADR IN
   133			000010		TOHOUT=1B32			;TO HLD OUT
   134			000004		MTRIN=1B33			;TI MTR IN
   135			000002		SELIN=1B34			;TI SEL IN
   136			000001		STAIN=1B35			;TI STA IN
   137
   138					;TAGIN1
   139
   140			000200		SRVIN=1B28			;TI SRV IN
   141			000100		DISIN=1B29			;TI DIS IN
   142			000040		REQIN=1B30			;TI REQ IN
   143			000020		DATIN=1B31			;TI DAT IN
   144
   145					;SPADR
   146
   147			000017		SPABTS=17B35			;SP ADDR BITS
   148
   149					;CUSTAT
   150
   151			000004		SELRST=1B33			;SEL RESET
   152			000002		SYSRST=1B34			;SYS RESET
   153			000001		HALTIO=1B35			;HALT I/O
   154
   155					;LOOPED BACK BIT DEFINITIONS
   156
   157					;TOR0
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 2-2
MCOD2T	MAC	17-Oct-88 14:28		CHANNEL BUS INTERFACE REGISTER BIT DEFINITIONS

   158
   159			000200		OPLINL=1B28			;OPL IN
   160			000100		MK0INL=1B29			;MK 0 IN
   161			000040		MK1INL=1B30			;MK 1 IN
   162			000020		ADRINL=1B31			;ADR IN
   163			000010		HLDOTL=1B32			;TO HLD OUT
   164			000002		SELINL=1B34			;SEL IN
   165			000001		STAINL=1B35			;STA IN
   166
   167					;TOR1
   168
   169			000200		SRVINL=1B28			;SRV IN
   170			000100		DISINL=1B29			;DIS IN
   171			000040		REQINL=1B30			;REQ IN
   172			000020		DATINL=1B31			;DAT IN
   173
   174					;*SOME DATA PATH DEFINITIONS
   175
   176			000013		HSDPIN=13			;HS DP INIT
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 1
MCERR	MAC	17-Oct-88 14:28		CHANNEL BUS INTERFACE REGISTER BIT DEFINITIONS

   177					IF2	<PRINTX STARTING BINARY FILE>
   178						SEARCH	DX20CA			;READ THE CROSS ASSEMBLER
   179
   180					;MASSBUS REGISTER BIT DEFINITIONS
   181
   182					;STATUS & CONTROL REGISTER 1
   183
   184			000000		MPSCR0== 0				;REGISTER NAME
   185			000001			RUN==	  1			;RUN LINE FROM RH20
   186			000002			GO==	  2			;GO BIT
   187			000174			FN==	174			;FUNCTION CODE
   188			000004			 F0==	  4			;FUNCTION BIT 0
   189			000010			 F1==	 10			;FUNCTION BIT 1
   190			000020			 F2==	 20			;FUNCTION BIT 2
   191			000040			 F3==	 40			;FUNCTION BIT 3
   192			000100			 F4==	100			;FUNCTION BIT 4
   193			000200			WCLK==	200			;WRITE CLOCK LINE FROM RH20
   194
   195					;STATUS AND CONTROL REGISTER 2
   196
   197			000001		MPSCR1== 1				;REGISTER NAME
   198			000001			DONE==	  1			;DATA TRANSFER DONE (READ)
   199			000001			EBL==	  1			;SET EBL (WRITE)
   200			000002			EXC==	  2			;EXCEPTION LINE FROM RH20 (READ)
   201			000002			CLRGO==	  2			;SET TO CLEAR GO (WRITE)
   202			000004			CMPERR==  4			;COMPOSITE ERROR FLAG (READ)
   203			000004			START==	  4			;START A DATA TRANSFER (WRITE)
   204			000010			DTD==	 10			;DATA TO DEVICE
   205			000020			OCC==	 20			;OCCUPIED
   206			000040			ILF==	 40			;ILLEGAL FUNCTION
   207			000100			MPERR==	100			;MICRO-PROCESSOR DETECTED ERROR FLAG
   208			000200			ATA==	200			;ATTENTION
   209
   210					;ERROR CODE REGISTER
   211
   212			000002		MPECR== 2				;REGISTER NAME
   213
   214					;DRIVE TYPE REGISTER
   215
   216			000003		MPDTR== 3				;REGISTER NAME
   217
   218					;HARDWARE VERSION REGISTER
   219
   220			000004		MPHVR== 4				;REGISTER NAME
   221
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 2
MCERR	MAC	17-Oct-88 14:28		CHANNEL BUS INTERFACE REGISTER BIT DEFINITIONS

   222					;DATA BUFFER REGISTER 0
   223
   224			000005		MPDB0== 5				;REGISTER NAME
   225
   226					;DATA BUFFER REGISTER 1
   227
   228			000006		MPDB1== 6				;REGISTER NAME
   229
   230					;DATA BUFFER REGISTER 2
   231
   232			000007		MPDB2== 7				;REGISTER NAME
   233
   234			000003			DB==	  3			;DATA BUFFER BITS 16 AND 17
   235			000004			DBPAR==	  4			;PARITY BIT
   236			000010			DBPARE== 10			;PARITY ERROR (READ)
   237			000020			DBEVEN== 20			;DATA BUFFER EVEN PARITY CONTROL
   238
   239					;GENERAL PURPOSE REGISTERS
   240
   241			000010		MPGP0==10				;REGISTER NAMES
   242			000011		MPGP1==11
   243			000012		MPGP2==12
   244			000013		MPGP3==13
   245			000014		MPGP4==14
   246			000015		MPGP5==15
   247			000016		MPGP6==16
   248			000017		MPGP7==17
   249			000020		MPGP10==20
   250			000021		MPGP11==21
   251			000022		MPGP12==22
   252			000023		MPGP13==23
   253			000024		MPGP14==24
   254			000025		MPGP15==25
   255			000026		MPGP16==26
   256			000027		MPGP17==27
   257
   258					;MP STATUS REGISTER
   259
   260			000036		MPSTAT==36				;REGISTER NAME
   261			000001			INT0==	  1			;INTERRUPT LINE 0
   262			000002			INT1==	  2			;INTERRUPT LINE 1
   263			000004			INT2==	  4			;INTERRUPT LINE 2
   264			000010			INT3==	 10			;INTERRUPT LINE 3
   265			000020			C==	 20			;CARRY BIT
   266			000040			Z==	 40			;ZERO BIT
   267
   268					;I/O BANK SELECT REGISTER
   269
   270			000037		IOSEL==37				;REGISTER NAME
   271			000007			INADR==	  7			;INPUT BANK ADDRESS
   272			000070			OUTADR== 70			;OUTPUT BANK ADDRESS
   273			000100			SPRES==	100			;STACK POINTER RESET
   274			000200			INIT==	200			;INITIALIZE
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 3
MCERR	MAC	17-Oct-88 14:28		CHANNEL BUS INTERFACE REGISTER BIT DEFINITIONS

   275					;THE FOLLOWING AC'S ARE USED BY THE ERROR HANDLER
   276
   277					;	AC7	FLAG REGISTER
   278					;	AC6	REPEAT COUNTER
   279					;	AC5	SAVE OF BR (DURING CALL ONLY)
   280					;	AC4	SAVE OF I/O SELECT REGISTER (DURING CALL ONLY)
   281					;	AC1	CORRECT DATA FOR ERRORA CALL
   282					;	AC0	ACTUAL DATA FOR ERRORA AND ERRORM CALLS
   283
   284					;FLAG REGISTER BITS
   285
   286					;	BIT 7	ERROR LOOP
   287					;	BIT 6	ERROR DETECTED
   288					;	BIT 5	RELIABILITY MODE
   289					;	4 - 0	LAST ERROR NUMBER
   290
   291		777777	777777		%TNUM==	-1				;SET TEST NUMBER TO -1 SO ENTIRE DRIVE REGISTER
   292
   293			000000		%REQ==0
   294					IFDEF	RHDATA,<%REQ==1>
   295					IFDEF	CUADRS,<%REQ==1>
   296										;IS LOADED WITH TEST NUMBER ON FIRST TEST
   297
   298					DEFINE	DEFTST(PROG),<
   299					DEFINE	TEST(E,NAME,X<;*>),<
   300					
   301						LALL
   302					X'**********************************************************************
   303					X PROG * TEST E *    NAME
   304					X'**********************************************************************
   305						SALL
   306					
   307						IFN	<^D'E^!%TNUM>&177400,<
   308						IFG %TNUM,<DATI IOSEL,AC6	;;SAVE THE IOSEL REG>
   309						LDBR	11			;;GET DEVICE CODE FOR MASSBUS INTERFACE
   310						MOVB	IOSEL			;;LOAD INTO I/O SELECT REGISTER
   311						LDBR	^D'E_-8			;;GET HIGH ORDER BITS OF TEST NUMBER
   312						MOVB	MPGP1			;;LOAD INTO MASSBUS REG 20
   313						IFG %TNUM,<	MOV	AC6,BR	;;GET SAVED IOSEL REG
   314								MOVB	IOSEL	;;RESTORE IT>
   315						>
   316						LDBR	^D'E&377		;;GET LOW ORDER BITS OF TEST NUMBER
   317						GOINK	TESTI			;;GO INITIALIZE TEST
   318						%TNUM==^D'E			;;REMEMBER TEST NUMBER
   319						%EMES==0			;;CLEAR ERROR MESSAGE NUMBER
   320						TST==TST'E			;;REMEMBER TEST PC
   321						LALL
   322					
   323					TST'E:	SALL
   324					>>
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 4
MCERR	MAC	17-Oct-88 14:28		CHANNEL BUS INTERFACE REGISTER BIT DEFINITIONS

   325			000200		PNT==200				;ADDITIONAL PRINT ROUTINE REQUEST FLAG
   326										;ERROR PRINT ROUTINE NUMBER MUST BE IN DXGP3
   327
   328					DEFINE	ERRMAC(ADR,LADR,PRTN,COR),<
   329						GOINK	ERRSET			;;GO SET ERROR DETECTED FLAG
   330						LPADR==ADR			;;REMEMBER ERROR LOOP ADDRESS
   331						CORF==<PRTN&PNT>!COR		;;REMEMBER IF CORRECT AND ACTUAL DATA
   332							LALL
   333					
   334						ERLOOP	LADR			;;IF ERROR, LOOP TO LADR
   335					>
   336
   337					DEFINE	ERROR(LADR,MES1,MES2,PRTN<0>),<ERRMAC ERLP,LADR,PRTN,0>
   338
   339					DEFINE	ERRORM(LADR,MES1,MES2,PRTN<0>),<ERRMAC ERLPM,LADR,PRTN,100>
   340
   341					DEFINE	ERRORA(LADR,MES1,MES2,PRTN<0>),<ERRMAC ERLPA,LADR,PRTN,100>
   342
   343					DEFINE	ERRORD(LADR,MES1,MES2,PRTN<0>),<ERRMAC ERLPD,LADR,PRTN,40>
   344
   345					DEFINE	ERLOOP(ADR),<SALL
   346						IFN %EMES&<^-37>,<IF2 <
   347							LALL
   348					
   349							PRINTX ?TOO MANY ERROR MESSAGES IN ONE TEST
   350							SALL
   351						>>
   352						LDBR	CORF!%EMES		;;LOAD MESSAGE NUMBER
   353						GOINK	LPADR			;;GO TO ERROR HANDLER
   354						JMPZ	ADR			;;LOOP IF Z IS SET
   355						%EMES==%EMES+1			;;UPDATE THE MESSAGE NUMBER
   356					>
   357
   358					DEFINE	REPEAT(RADR),<
   359						GOINK	REPTU			;;GO TO REPEAT ROUTINE
   360						JMPZ	RADR			;;REPEAT IF Z IS SET
   361					>
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 5
MCERR	MAC	17-Oct-88 14:28		CHANNEL BUS INTERFACE REGISTER BIT DEFINITIONS

   362					IFDEF RHDATA,<
   363						DEFINE	WRITE,<GOINK	SETWRT	;;CALL ROUTINE TO SET UP RH20>
   364						DEFINE	READ,<GOINK	SETRD	;;CALL ROUTINE TO SET UP RH20>
   365						DEFINE	READB,<GOINK	SETRDB	;;CALL ROUTINE TO SET UP RH20>
   366					
   367						DEFINE	CHKRH(LADR,PRTN,CODE),<
   368							LDBR	<PRTN&PNT>!%EMES!CODE	;;SET UP CODE FOR EC REGISTER
   369							GOINK	CKTRM		;;CALL HOST TO CHECK TERMINATION OF RH20
   370							LALL
   371					
   372						ERRLOP	LADR			;;IF ERROR, LOOP TO LADR
   373							%EMES==%EMES+1
   374						>
   375						DEFINE	CHKTRM(LADR,MES1,MES2,PRTN<0>),<CHKRH LADR,PRTN,40>
   376						DEFINE	CHKERR(LADR,MES1,MES2,PRTN<0>),<CHKRH LADR,PRTN,140>
   377					
   378						DEFINE	ERRLOP(LADR),<SALL
   379							JMPZ	LADR		;;IF ERROR, LOOP TO LADR
   380						>
   381					>
   382					IFDEF	CUADRS,<
   383						DEFINE	SNDADR,<GOINK	SENDAD	;;CALL ROUTINE TO SEND CU ADDRESSES>
   384					>
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 6
MCERR	MAC	17-Oct-88 14:28		CHANNEL BUS INTERFACE REGISTER BIT DEFINITIONS

   385			000000		%ADRH==0				;;CLEAR HIGH ADDRESS REFERENCE FLAG
   386
   387					DEFINE	GOINK(ADR),<
   388						IFE	.&<^-1777>,<
   389							JMPSUB	ADR		;;GO TO ADDRESS IN LOW 1K
   390						>
   391						IFN	.&<^-1777>,<
   392							IFIDN <ADR><TESTI>,<
   393								JMPSUB	TESTIH
   394								%ADRH==%ADRH!1
   395							>
   396							IFIDN <ADR><LPADR>,<
   397								IFE <LPADR-ERLP>,<
   398									JMPSUB	ERLPH
   399									%ADRH==%ADRH!2
   400								>
   401								IFE <LPADR-ERLPM>,<
   402									JMPSUB	ERLPMH
   403									%ADRH==%ADRH!4
   404								>
   405								IFE <LPADR-ERLPA>,<
   406									JMPSUB	ERLPAH
   407									%ADRH==%ADRH!10
   408								>
   409								IFDEF CATAB,<
   410									IFE <LPADR-ERLPD>,<
   411										JMPSUB	ERLPDH
   412										%ADRH==%ADRH!400
   413									>
   414								>
   415							>
   416							IFIDN <ADR><ERRSET>,<
   417								JMPSUB	ERSETH
   418								%ADRH==%ADRH!20
   419							>
   420							IFIDN <ADR><REPTU>,<
   421								JMPSUB	REPTUH
   422								%ADRH==%ADRH!40
   423							>
   424							IFDEF RHDATA,<
   425								IFIDN <ADR><SETWRT>,<
   426									JMPSUB	STWRTH
   427									%ADRH==%ADRH!100
   428								>
   429								IFIDN <ADR><SETRD>,<
   430									JMPSUB	STRDH
   431									%ADRH==%ADRH!100
   432								>
   433								IFIDN <ADR><SETRDB>,<
   434									JMPSUB	STRDBH
   435									%ADRH==%ADRH!100
   436								>
   437								IFIDN <ADR><CKTRM>,<JMPSUB CKTRMH>
   438							>
   439							IFDEF CUADRS,<
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 6-1
MCERR	MAC	17-Oct-88 14:28		CHANNEL BUS INTERFACE REGISTER BIT DEFINITIONS

   440								IFIDN <ADR><SENDAD>,<
   441									JMPSUB	SNDADH
   442									%ADRH==%ADRH!200
   443								>
   444							>
   445						>
   446					>
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 7
MCERR	MAC	17-Oct-88 14:28		CHANNEL BUS INTERFACE REGISTER BIT DEFINITIONS

   447					DEFINE	.ECRAM,<
   448						IFE .&<^-1777>,<	JMP	BEGEND>
   449						IFN .&<^-1777>,<	JUMP	BEGEND>
   450						IFN %ADRH&1,<	TESTIH: MOVB	AC5
   451									JUMP	TEST0I>
   452						IFN %ADRH&2,<	ERLPH:	MOVB	AC5
   453									JUMP	ERLP0>
   454						IFN %ADRH&4,<	ERLPMH:	MOVB	AC5
   455									JUMP	ERLPM0>
   456						IFN %ADRH&10,<	ERLPAH: MOVB	AC5
   457									JUMP	ERLPA0>
   458						IFN %ADRH&20,<	ERSETH: JUMP	ERRSET>
   459						IFN %ADRH&40,<	REPTUH: JUMP	REPTU>
   460						IFN %ADRH&100,<	STWRTH:	LDBR	1
   461									JMP	CALLH
   462								STRDH:	LDBR	2
   463									JMP	CALLH
   464								STRDBH:	LDBR	3
   465								CALLH:	MOVB	AC5
   466									JUMP	CALL0
   467								CKTRMH:	MOVB	AC5
   468									JUMP	CKTRM0>
   469						IFN %ADRH&200,<	SNDADH:	LDBR	200
   470									MOVB	AC5
   471									JUMP	CALL0>
   472						IFN %ADRH&400,<	ERLPDH:	MOVB	AC5
   473									JUMP	ERLPD0>
   474					>
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 8
MCERR	MAC	17-Oct-88 14:28		CHANNEL BUS INTERFACE REGISTER BIT DEFINITIONS

   475					;MICRO-DIAGNOSTIC START ROUTINE
   476
   477						.INIT	^			;INITIALIZE THE CROSS ASSEMBLER
   478
   479						SALL
   480	000000	0 002000 01 0000 
   481
   482	000001	0 002011 0 1 0 011 	BEGIN:	LDBR	11			;SELECT THE MASSBUS
   483	000002	0 066371 3 3 0 17 11 		MOVB	IOSEL			;INTERFACE
   484	000003	0 022000 1 1 0 00 00 	WAITGO:	DATI	MPSCR0,BR		;READ CONTROL REGISTER
   485	000004	0 014000 0 6 0 000 		SHR				;SHIFT GO BIT TO BIT 0
   486	000005	0 104007 4 2 0007 		JMPB0	.+2			;JUMP AROUND IF GO IS SET
   487	000006	0 100003 4 0 0003 		JMP	WAITGO			;NOT YET, KEEP WAITING
   488	000007	0 022000 1 1 0 00 00 		DATI	MPSCR0,BR		;READ THE FUNCTION CODE AGAIN
   489	000010	0 014000 0 6 0 000 		SHR				;SHIFT RIGHT
   490	000011	0 014000 0 6 0 000 		SHR				;SHIFT F0 TO BIT 0
   491	000012	0 104031 4 2 0031 		JMPB0	CMDF0			;JUMP IF F0 IS SET
   492	000013	0 014000 0 6 0 000 		SHR				;SHIFT F1 TO BIT 0
   493	000014	0 104017 4 2 0017 		JMPB0	.+3			;JUMP IF RELIABILITY MODE REQUESTED
   494	000015	0 002000 0 1 0 000 		LDBR	0			;SET UP FLAG REG WITH ALL ZEROS
   495	000016	0 100020 4 0 0020 		JMP	.+2
   496	000017	0 002040 0 1 0 040 		LDBR	40			;SET RELIABILITY MODE FLAG
   497	000020	0 072171 3 5 0 07 11 		MOVB	AC7			;PUT IN AC7
   498	000021	0 002300 0 1 0 300 		LDBR	INIT+SPRES		;RESET THE DX20
   499	000022	0 066371 3 3 0 17 11 		MOVB	IOSEL			;AND THE STACK POINTER
   500	000023	0 002011 0 1 0 011 		LDBR	11			;SELECT THE MASSBUS
   501	000024	0 066371 3 3 0 17 11 		MOVB	IOSEL			;INTERFACE AGAIN
   502	000025	0 002000 0 1 0 000 		LDBR	0			;CLEAR RIGHT HALF OF DXGP3
   503	000026	0 064351 3 2 0 16 11 		MOVB	MPGP6			;TO INDICATE NO ADDITIONAL ERROR PRINTER
   504	000027	0 116033 4 7 0033 		JMPSUB	OFFGO			;TURN OFF GO
   505	000030	0 100207 4 0 0207 		JMP	TSTART			;GO START THE FIRST TEST
   506
   507	000031	0 014000 0 6 0 000 	CMDF0:	SHR				;SHIFT F1 TO BIT 0
   508	000032	0 016000 0 7 0 000 		RETURN				;RETURN TO CALLER
   509
   510	000033	0 002000 0 1 0 000 	OFFGO:	LDBR	0			;GET A ZERO
   511	000034	0 064051 3 2 0 02 11 		MOVB	MPECR			;CLEAR ERROR CODE REGISTER
   512	000035	0 032121 1 5 0 05 01 		DATI	MPSCR1,AC5		;READ STATUS REGISTER 1
   513	000036	0 002010 0 1 0 010 		LDBR	DTD			;GET MASK OF DIRECTION BIT
   514	000037	0 072133 3 5 0 05 13 		LANDBR	AC5			;KEEP ONLY THAT BIT
   515	000040	0 002002 0 1 0 002 		LDBR	CLRGO			;GET BIT TO CLEAR GO
   516	000041	0 062134 3 1 0 05 14 		LORB	AC5,BR			;COMBINE WITH COPY OF DTD
   517	000042	0 064031 3 2 0 01 11 		MOVB	MPSCR1			;CLEAR GO AND ATA
   518	000043	0 016000 0 7 0 000 		RETURN
   519
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 9
MCERR	MAC	17-Oct-88 14:28		CHANNEL BUS INTERFACE REGISTER BIT DEFINITIONS

   520					;TEST INITIALIZATION
   521
   522	000044	0 062130 3 1 0 05 10 	TEST0I:	MOV	AC5,BR			;GET TEST NUMBER BACK
   523	000045	0 001000 0 0 2 000 	TESTI:	LDMAR	0			;CLEAR MEMORY ADDRESS REGISTER
   524	000046	0 000400 0 0 1 000 		LDMARX	0			;ALL BITS
   525	000047	0 132157 5 5 0 06 17 		DATI	IOSEL,AC6		;SAVE IOSEL REG
   526	000050	0 010011 0 4 0 011 		LDMEM	11			;GET DEVICE CODE FOR MASSBUS INTERFACE
   527	000051	0 046371 2 3 0 17 11 		MOVMEM	IOSEL			;LOAD INTO I/O SELECT REGISTER
   528	000052	0 064211 3 2 0 10 11 		MOVB	MPGP0			;WRITE TEST NUMBER INTO DXGP0
   529	000053	0 062150 3 1 0 06 10 		MOV	AC6,BR			;GET SAVED IOSEL REG
   530	000054	0 066371 3 3 0 17 11 		MOVB	IOSEL			;RESTORE IT
   531	000055	0 002040 0 1 0 040 		LDBR	40			;GET MASK OF ONLY RELIABILITY BIT
   532	000056	0 072173 3 5 0 07 13 		LANDBR	AC7			;CLEAR ERROR AND MESSAGE NUMBER BITS
   533	000057	0 062170 3 1 0 07 10 		MOV	AC7,BR			;GET FLAGS
   534	000060	0 014000 0 6 0 000 		SHR				;SHIFT RELIABILITY MODE BIT TO BR4
   535	000061	0 106064 4 3 0064 		JMPB4	.+3			;JUMP AROUND IF RELIABILITY MODE
   536	000062	0 002000 0 1 0 000 		LDBR	0			;QUICK VERIFY, LOAD A ZERO COUNT
   537	000063	0 100065 4 0 0065 		JMP	.+2
   538	000064	0 002077 0 1 0 077 		LDBR	RPTCNT-1		;GET REPEAT COUNT
   539	000065	0 072151 3 5 0 06 11 		MOVB	AC6			;SAVE IN AC6
   540	000066	0 016000 0 7 0 000 		RETURN				;NOW START THE TEST
   541
   542					;I/O SELECT REGISTER GENERAL ROUTINES
   543
   544	000067	0 132117 5 5 0 04 17 	SAVIOS:	DATI	IOSEL,AC4		;SAVE I/O SELECT REGISTER IN AC4
   545	000070	0 002011 0 1 0 011 		LDBR	11			;SELECT MASSBUS INTERFACE
   546	000071	0 066371 3 3 0 17 11 		MOVB	IOSEL			;GO I/O
   547	000072	0 016000 0 7 0 000 	NRTN:	RETURN
   548
   549	000073	0 062110 3 1 0 04 10 	RESIOS:	MOV	AC4,BR			;GET SAVED I/O SELECT REGISTER
   550	000074	0 066371 3 3 0 17 11 		MOVB	IOSEL			;RESTORE IT
   551	000075	0 016000 0 7 0 000 		RETURN
   552
   553					;ROUTINE TO SET ATA AND/OR MPERR IN STATUS REGISTER
   554					;ENTER WITH BITS TO SET IN BR
   555
   556	000076	0 032121 1 5 0 05 01 	SETATA:	DATI	MPSCR1,AC5		;READ STATUS REGISTER
   557	000077	0 072134 3 5 0 05 14 		LORBR	AC5			;SET REQUESTED BITS
   558	000100	0 002310 0 1 0 310 		LDBR	ATA+MPERR+DTD		;GET MASK OF ONLY BITS TO SET
   559	000101	0 062133 3 1 0 05 13 		LANDB	AC5,BR			;CLEAR OTHER BITS READ
   560	000102	0 064031 3 2 0 01 11 		MOVB	MPSCR1			;WRITE INTO STATUS REGISTER
   561	000103	0 016000 0 7 0 000 		RETURN
   562
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 10
MCERR	MAC	17-Oct-88 14:28		CHANNEL BUS INTERFACE REGISTER BIT DEFINITIONS

   563					;ERROR HANDLER ROUTINES
   564
   565	000104	0 002300 0 1 0 300 	ERRSET:	LDBR	300			;GET ERROR LOOP AND DETECTED FLAGS
   566	000105	0 072174 3 5 0 07 14 		LORBR	AC7			;SET BOTH BITS IN FLAG REGISTER
   567	000106	0 016000 0 7 0 000 		RETURN
   568
   569					;CHECK IF TO REPORT AN ERROR
   570
   571	000107	0 062170 3 1 0 07 10 	ERRCHK:	MOV	AC7,BR			;GET FLAG REGISTER
   572	000110	0 110112 4 4 0112 	IFNDEF .ERROR,<JMPB7	.+2>		;SKIP IF IN ERROR LOOP
   573					IFDEF  .ERROR,<JMP	REPORT>		;REPORT ALL ERRORS
   574	000111	0 016377 0 7 0 377 		RETURN	-1			;RETURN WITH Z SET TO CONTINUE TEST
   575	000112	0 062165 3 1 0 07 05 		SHL	AC7,BR			;SHIFT ERROR DETECTED BIT TO BR7
   576	000113	0 110126 4 4 0126 		JMPB7	REPORT			;REPORT IT IF SET
   577	000114	0 002037 0 1 0 037 		LDBR	37			;GET MASK FOR ERROR NUMBER
   578	000115	0 072133 3 5 0 05 13 		LANDBR	AC5			;CLEAR CONTROL BITS IN CURRENT NUMBER
   579	000116	0 062173 3 1 0 07 13 		LANDB	AC7,BR			;EXTRACT LAST ERROR NUMBER
   580	000117	0 060137 3 0 0 05 17 		OSB	AC5			;COMPARE LAST AND CURRENT ERROR NUMBERS
   581	000120	0 114122 4 6 0122 		JMPZ	NOFAIL			;JUMP IF AT SAME ERROR
   582	000121	0 016377 0 7 0 377 		RETURN	-1			;NO, RETURN WITH Z SET TO CONTINUE TEST
   583	000122	0 116067 4 7 0067 	NOFAIL:	JMPSUB	SAVIOS			;SAVE I/O REGISTER, SELECT MASSBUS
   584	000123	0 002200 0 1 0 200 		LDBR	ATA			;GET ATA BIT
   585	000124	0 072131 3 5 0 05 11 		MOVB	AC5			;SAVE IN AC5
   586	000125	0 016000 0 7 0 000 		RETURN				;RETURN WITH Z CLEAR TO SIGNAL END OF LOOP
   587
   588	000126	0 116067 4 7 0067 	REPORT:	JMPSUB	SAVIOS			;SAVE I/O REGISTER, SELECT MASSBUS
   589	000127	0 062130 3 1 0 05 10 		MOV	AC5,BR			;GET ERROR NUMBER
   590	000130	0 064051 3 2 0 02 11 		MOVB	MPECR			;PUT IN ERROR CODE REGISTER
   591	000131	0 002240 0 1 0 240 		LDBR	240			;GET MASK OF LOOP AND RELIABILITY BITS
   592	000132	0 072173 3 5 0 07 13 		LANDBR	AC7			;LEAVE ONLY THOSE TWO BITS IN FLAG REG
   593	000133	0 002037 0 1 0 037 		LDBR	37			;GET MASK OF ERROR NUMBER
   594	000134	0 062133 3 1 0 05 13 		LANDB	AC5,BR			;GET CURRENT NUMBER FROM AC5
   595	000135	0 072174 3 5 0 07 14 		LORBR	AC7			;MERGE AND PUT IN FLAG REGISTER
   596	000136	0 002300 0 1 0 300 		LDBR	ATA+MPERR		;GET ATA AND ERROR BITS
   597	000137	0 072131 3 5 0 05 11 		MOVB	AC5			;SAVE IN AC5
   598	000140	0 016000 0 7 0 000 		RETURN				;RETURN WITH Z CLEAR TO SIGNAL ERROR REPORT
   599
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 11
MCERR	MAC	17-Oct-88 14:28		CHANNEL BUS INTERFACE REGISTER BIT DEFINITIONS

   600	000141	0 072131 3 5 0 05 11 	ERLP:	MOVB	AC5			;SAVE MESSAGE NUMBER IN AC5
   601	000142	0 116107 4 7 0107 	ERLP0:	JMPSUB	ERRCHK			;CHECK FOR ERROR
   602	000143	0 114072 4 6 0072 		JMPZ	NRTN			;NO, RETURN WITH Z CLEAR TO CONTINUE TEST
   603	000144	0 100161 4 0 0161 		JMP	ERRCOM			;GO TO COMMON ROUTINE
   604
   605	000145	0 072131 3 5 0 05 11 	ERLPM:	MOVB	AC5			;SAVE MESSAGE NUMBER IN AC5
   606	000146	0 116107 4 7 0107 	ERLPM0:	JMPSUB	ERRCHK			;CHECK FOR ERROR
   607	000147	0 114072 4 6 0072 		JMPZ	NRTN			;NO, RETURN WITH Z CLEAR TO CONTINUE TEST
   608	000150	0 044311 2 2 0 14 11 		MOVMEM	MPGP4			;PUT CORRECT DATA IN RIGHT HALF OF DXGP2
   609	000151	0 100157 4 0 0157 		JMP	ERRCA			;JUMP AROUND
   610
   611	000152	0 072131 3 5 0 05 11 	ERLPA:	MOVB	AC5			;SAVE MESSAGE NUMBER IN AC5
   612	000153	0 116107 4 7 0107 	ERLPA0:	JMPSUB	ERRCHK			;CHECK FOR ERROR
   613	000154	0 114072 4 6 0072 		JMPZ	NRTN			;NO, RETURN WITH Z CLEAR TO CONTINUE TEST
   614	000155	0 062030 3 1 0 01 10 		MOV	AC1,BR			;GET CORRECT DATA FROM AC1
   615	000156	0 064311 3 2 0 14 11 		MOVB	MPGP4			;PUT IN RIGHT HALF OF DXGP2
   616	000157	0 062010 3 1 0 00 10 	ERRCA:	MOV	AC0,BR			;GET ACTUAL DATA FROM AC0
   617	000160	0 064331 3 2 0 15 11 		MOVB	MPGP5			;PUT IN LEFT HALF OF DXGP2
   618	000161	0 062130 3 1 0 05 10 	ERRCOM:	MOV	AC5,BR			;GET BITS TO SET IN STATUS REGISTER
   619	000162	0 116076 4 7 0076 	CHKLOP:	JMPSUB	SETATA			;GO SET THE BITS
   620	000163	0 116003 4 7 0003 	CHKLP:	JMPSUB	WAITGO			;WAIT FOR GO TO SET
   621	000164	0 104170 4 2 0170 		JMPB0	ELOOPC			;JUMP IF TO CONTINUE
   622	000165	0 116033 4 7 0033 		JMPSUB	OFFGO			;TURN OFF GO
   623	000166	0 116073 4 7 0073 		JMPSUB	RESIOS			;RESTORE I/O SELECT REGISTER
   624	000167	0 016377 0 7 0 377 	ZRTN:	RETURN	-1			;RETURN WITH Z SET TO LOOP
   625
   626	000170	0 116033 4 7 0033 	ELOOPC:	JMPSUB	OFFGO			;TURN OFF GO
   627	000171	0 116073 4 7 0073 		JMPSUB	RESIOS			;RESTORE I/O SELECT REGISTER
   628	000172	0 016000 0 7 0 000 		RETURN				;RETURN WITH Z CLEAR TO CONTINUE
   629
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 12
MCERR	MAC	17-Oct-88 14:28		CHANNEL BUS INTERFACE REGISTER BIT DEFINITIONS

   630					XLIST
   631					LIST
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 13
MCERR	MAC	17-Oct-88 14:28		CHANNEL BUS INTERFACE REGISTER BIT DEFINITIONS

   632					XLIST
   633					LIST
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 14
MCERR	MAC	17-Oct-88 14:28		CHANNEL BUS INTERFACE REGISTER BIT DEFINITIONS

   634					;REPEAT TEST ROUTINE
   635
   636	000173	0 072147 3 5 0 06 07 	REPTU:	DECR	AC6			;DECREMENT REPEAT COUNT
   637	000174	0 114072 4 6 0072 		JMPZ	NRTN			;IF NOW -1, RETURN WITH Z CLEAR
   638	000175	0 016377 0 7 0 377 		RETURN	-1			;RETURN WITH Z SET TO REPEAT TEST
   639
   640					;REPORT END OF DIAGNOSTIC WITH 0 ERROR CODE AND 0 TEST NUMBER
   641
   642	000176	0 002011 0 1 0 011 	BEGEND:	LDBR	11			;SELECT MASSBUS INTERFACE
   643	000177	0 066371 3 3 0 17 11 		MOVB	IOSEL			;IN I/O SELECT REGISTER
   644	000200	0 002000 0 1 0 000 		LDBR	0			;GET A ZERO
   645	000201	0 064211 3 2 0 10 11 		MOVB	MPGP0			;MAKE TEST NUMBER 0
   646	000202	0 064231 3 2 0 11 11 		MOVB	MPGP1			;TO SAY END OF DIAGNOSTIC
   647	000203	0 002200 0 1 0 200 		LDBR	ATA			;GET ATTENTION BIT
   648	000204	0 064031 3 2 0 01 11 		MOVB	MPSCR1			;SET IT
   649	000205	0 116003 4 7 0003 		JMPSUB	WAITGO			;WAIT FOR GO TO SET
   650	000206	0 100001 4 0 0001 		JMP	BEGIN			;START DIAGNOSTIC OVER AGAIN
   651
   652
   653	000207				TSTART:					;COME HERE TO START THE TESTING
   654
   655
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 1
MCOD2M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 1

   656						SUBTTL	CHANNEL BUS INTERFACE TEST - PART 1
   657
   658					DEFTST	MCODE2
   659						TEST	154,TEST MICROBUS PARITY CHECKING NETWORK
   660					;***********************************************************************
   661					;* MCODE2 * TEST 154 *    TEST MICROBUS PARITY CHECKING NETWORK
   662					;***********************************************************************
   663						SALL
   664	000207	0 002011 0 1 0 011 
   665	000210	0 066371 3 3 0 17 11 
   666	000211	0 002000 0 1 0 000 
   667	000212	0 064231 3 2 0 11 11 
   668	000213	0 002232 0 1 0 232 
   669	000214	0 116045 4 7 0045 
   670
   671	000215				TST154:	SALL
   672
   673					;*WRITE TO INTERFACE WITH SPECIAL DATA PATTERNS DESIGNED TO TEST THE 74S280
   674					;*PARITY CHECKING CHIP.
   675					;*THIS WILL CHECK THAT THE MICROBUS PARITY NETWORK DETECTS CORRECT PARITY
   676					;*ON WRITES (DETECTION OF BAD PARITY ON WRITES WAS TESTED PREVIOUSLY).
   677
   678					;*CLEAR "UB PE FLAG" IN REG 0.
   679					;*WRITE THE DATA PATTERN TO REG 2.
   680					;*CHECK THE "UB PE FLAG" IS NOT SET.
   681
   682	000215	0 010001 0 4 0 001 		LDMEM	1			;SET ADDITIONAL PNT ROUTINE NUMBER
   683	000216	0 002221 0 1 0 221 		GOSUB	SETPNT
   684	000217	0 177231 7 7 2 11 11 
   685	000220	0 002021 0 1 0 021 		LDBR	^D17			;SETUP LOOP COUNT MINUS 1
   686	000221	0 072011 3 5 0 00 11 		MOVB	AC0
   687	000222	0 001001 0 0 2 001 		LDMAR	PATS			;SET MAR TO FIRST DATA PATTERN
   688	000223	0 002002 0 1 0 002 	PAR2A:	LDBR	CLRFLG			;CLEAR REG 0 - UB PE FLAG
   689	000224	0 064011 3 2 0 00 11 		MOVB	CSR0
   690	000225	0 044171 2 2 0 07 11 		MOVMEM	CBILO			;WRITE PATTERN TO INTERFACE
   691	000226	0 002011 0 1 0 011 		LDBR	11			;SELECT MASSBUS INTERFACE
   692	000227	0 066371 3 3 0 17 11 		MOVB	IOSEL
   693	000230	0 046051 2 3 0 02 11 		MOVMEM	MPGP12			;STORE DATA FOR PRINTOUT
   694	000231	0 002033 0 1 0 033 		LDBR	33			;SELECT CHANNEL BUS INTERFACE
   695	000232	0 066371 3 3 0 17 11 		MOVB	IOSEL
   696	000233	0 022000 1 1 0 00 00 		DATI	CSR0,BR			;READ REG 0 INTO BR
   697	000234	0 106236 4 3 0236 		JMPB4	.+2			;JUMP IF "UB PE FLAG" SET
   698	000235	0 100237 4 0 0237 		JMP	.+2			;ELSE, RESULTS OKAY
   699	000236	0 116104 4 7 0104 		ERROR	PAR2A,UB PARITY ERROR DETECTED,,PNT
   700
   701						ERLOOP	PAR2A			^SALL
   702	000237	0 002200 0 1 0 200 
   703	000240	0 116141 4 7 0141 
   704	000241	0 114223 4 6 0223 
   705	000242	0 073407 3 5 3 00 07 		DECR	AC0,I			;DEC LOOP CNT AND INC MAR
   706	000243	0 114245 4 6 0245 		JMPZ	.+2			;JUMP IF ALL DONE
   707	000244	0 100223 4 0 0223 		JMP	PAR2A			;ELSE, CONTINUE
   708
   709	000245	0 002153 0 1 0 153 		GOSUB	INITL			;CLEAR REGS
   710	000246	0 177231 7 7 2 11 11 
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 1-1
MCOD2M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 1

   711	000247	0 116173 4 7 0173 		REPEAT	TST
   712	000250	0 114215 4 6 0215 
   713
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 2
MCOD2M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 1

   714						TEST	155,TEST REGISTER 1 (CSR1)
   715					;***********************************************************************
   716					;* MCODE2 * TEST 155 *    TEST REGISTER 1 (CSR1)
   717					;***********************************************************************
   718						SALL
   719	000251	0 002233 0 1 0 233 
   720	000252	0 116045 4 7 0045 
   721
   722	000253				TST155:	SALL
   723
   724					;*TEST WRITING AND READING REGISTER 1.
   725					;*WRITING A ONE TO "ON LINE" MAY ENABLE THE BUS DRIVERS WHICH IS UNACCEPTABLE
   726					;*WHEN A CONTROL UNIT.  THEREFORE, DEFER TESTING OF THAT BIT UNTIL LATER
   727					;*WHEN DRIVERS CAN BE DISABLED BY SETTING "CU RESET".
   728
   729					;*WRITE ZEROS TO THE REGISTER.
   730					;*CHECK THAT BITS 7-2,0 ARE ZERO.
   731
   732	000253	0 001000 0 0 2 000 		LDMAR	0			;CLEAR MAR
   733	000254	0 010000 0 4 0 000 		LDMEM	0			;WRITE ZEROS TO REG 1
   734	000255	0 044031 2 2 0 01 11 		MOVMEM	CSR1
   735	000256	0 032001 1 5 0 00 01 		DATI	CSR1,AC0		;READ REG 1
   736	000257	0 040017 2 0 0 00 17 		OSM	AC0			;COMPARE DATA WITH EXPECTED
   737	000260	0 114262 4 6 0262 		JMPZ	.+2			;JUMP IF DATA CORRECT
   738	000261	0 116104 4 7 0104 		ERRORM	TST,CAN NOT WRITE ALL ZEROS TO REG 1
   739
   740						ERLOOP	TST			^SALL
   741	000262	0 002100 0 1 0 100 
   742	000263	0 116145 4 7 0145 
   743	000264	0 114253 4 6 0253 
   744					;*WRITE ONES TO THE REGISTER.
   745					;*CHECK THAT BITS 7-2,0 ARE ONES.
   746
   747	000265	0 010375 0 4 0 375 	REG1A:	LDMEM	375			;WRITE ONES INTO REG 1
   748	000266	0 044031 2 2 0 01 11 		MOVMEM	CSR1
   749	000267	0 032001 1 5 0 00 01 		DATI	CSR1,AC0		;READ REG 1
   750	000270	0 040017 2 0 0 00 17 		OSM	AC0			;COMPARE DATA
   751	000271	0 114273 4 6 0273 		JMPZ	.+2			;JUMP IF DATA CORRECT
   752	000272	0 116104 4 7 0104 		ERRORM	REG1A,<CAN NOT WRITE ALL ONES TO BITS 7-2,0 OF REG 1>
   753
   754						ERLOOP	REG1A			^SALL
   755	000273	0 002101 0 1 0 101 
   756	000274	0 116145 4 7 0145 
   757	000275	0 114265 4 6 0265 
   758					;*DO A MICROBUS INIT.
   759					;*CHECK THAT BITS 7-2,0 ARE ZERO.
   760
   761	000276	0 002153 0 1 0 153 		GOSUB	INITL			;DO A MICROBUS INIT
   762	000277	0 177231 7 7 2 11 11 
   763	000300	0 032001 1 5 0 00 01 		DATI	CSR1,AC0		;READ REG 1
   764	000301	0 040017 2 0 0 00 17 		OSM	AC0			;COMPARE DATA WITH EXPECTED
   765	000302	0 114304 4 6 0304 		JMPZ	.+2			;JUMP IF CORRECT
   766						ERRORM	REG1A,CAN NOT CLEAR ALL BIT(S) IN REG 1,^_
   767	000303	0 116104 4 7 0104 	DIAG DID A MICROBUS INIT
   768
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 2-1
MCOD2M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 1

   769						ERLOOP	REG1A			^SALL
   770	000304	0 002102 0 1 0 102 
   771	000305	0 116145 4 7 0145 
   772	000306	0 114265 4 6 0265 
   773					;*WRITE FLOATING ZEROS AND FLOATING ONES PATTERNS TO THE REGISTER.
   774					;*CHECK THAT THE PATTERN GOT WRITTEN CORRECTLY.
   775
   776	000307	0 002015 0 1 0 015 		LDBR	^D13			;SETUP LOOP COUNT MINUS 1
   777	000310	0 072031 3 5 0 01 11 		MOVB	AC1
   778	000311	0 001023 0 0 2 023 		LDMAR	FLTZA			;SET MAR TO FIRST PATTERN
   779	000312	0 044031 2 2 0 01 11 	FLT1:	MOVMEM	CSR1			;WRITE REG 1 WITH FLOATING PATTERN
   780	000313	0 032001 1 5 0 00 01 		DATI	CSR1,AC0		;READ IT BACK
   781	000314	0 040017 2 0 0 00 17 		OSM	AC0			;COMPARE WITH PATTERN WRITTEN
   782	000315	0 114317 4 6 0317 		JMPZ	.+2			;JUMP IF READ DATA IS CORRECT
   783						ERRORM	FLT1,FLOATING ONES/ZEROS FAILED,^_
   784	000316	0 116104 4 7 0104 	DIAG WROTE REG 1
   785
   786						ERLOOP	FLT1			^SALL
   787	000317	0 002103 0 1 0 103 
   788	000320	0 116145 4 7 0145 
   789	000321	0 114312 4 6 0312 
   790	000322	0 073427 3 5 3 01 07 		DECR	AC1,I			;DEC LOOP CNT AND INC MAR
   791	000323	0 114325 4 6 0325 		JMPZ	.+2			;JUMP IF ALL DONE
   792	000324	0 100312 4 0 0312 		JMP	FLT1			;ELSE, CONTINUE
   793
   794	000325	0 116173 4 7 0173 		REPEAT	TST
   795	000326	0 114253 4 6 0253 
   796
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 3
MCOD2M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 1

   797						TEST	156,NO INTERRUPT TEST
   798					;***********************************************************************
   799					;* MCODE2 * TEST 156 *    NO INTERRUPT TEST
   800					;***********************************************************************
   801						SALL
   802	000327	0 002234 0 1 0 234 
   803	000330	0 116045 4 7 0045 
   804
   805	000331				TST156:	SALL
   806
   807					;*TEST THAT A MICROBUS INIT CLEARS ALL INTERRUPTS.
   808
   809	000331	0 002153 0 1 0 153 		GOSUB	INITL			;DO A MICROBUS INIT
   810	000332	0 177231 7 7 2 11 11 
   811	000333	0 102167 4 1 0167 		JMPI	ZRTN			;JUMP IF INTERRUPT IS PRESENT
   812	000334	0 114336 4 6 0336 		JMPZ	.+2			;JUMP IF INTERRUPT JUMP WAS TAKEN
   813	000335	0 100337 4 0 0337 		JMP	.+2			;ELSE, NO INTERRUPTS
   814						ERROR	TST,UNEXPECTED INTERRUPT OCCURRED,^_
   815	000336	0 116104 4 7 0104 	DIAG DID A MICROBUS INIT AND SET CHAN MODE
   816
   817						ERLOOP	TST			^SALL
   818	000337	0 002000 0 1 0 000 
   819	000340	0 116141 4 7 0141 
   820	000341	0 114331 4 6 0331 
   821	000342	0 116173 4 7 0173 		REPEAT	TST
   822	000343	0 114331 4 6 0331 
   823
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 4
MCOD2M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 1

   824						TEST	157,TEST REGISTER 2 (TOR0)
   825					;***********************************************************************
   826					;* MCODE2 * TEST 157 *    TEST REGISTER 2 (TOR0)
   827					;***********************************************************************
   828						SALL
   829	000344	0 002235 0 1 0 235 
   830	000345	0 116045 4 7 0045 
   831
   832	000346				TST157:	SALL
   833
   834					;*TEST WRITING AND READING REGISTER 2.
   835
   836					;*WRITE A ONE TO THE "TMR EN" BIT (THIS STARTS TIMER).
   837					;*CHECK THAT "TMR EN" SETS.
   838
   839	000346	0 001000 0 0 2 000 		LDMAR	0			;CLEAR MAR
   840	000347	0 002004 0 1 0 004 		LDBR	TMREN			;START TIMER AND ENABLE INTERRUPT
   841	000350	0 064051 3 2 0 02 11 		MOVB	TOR0
   842	000351	0 022002 1 1 0 00 02 		DATI	TOR0,BR			;READ REG 2
   843	000352	0 014000 0 6 0 000 		SHR				;RIGHT ADJUST "TMR EN" BIT
   844	000353	0 014000 0 6 0 000 		SHR
   845	000354	0 104356 4 2 0356 		JMPB0	.+2			;JUMP IF IT SET OKAY
   846	000355	0 116104 4 7 0104 		ERROR	TST,"TMR EN" BIT DID NOT SET
   847
   848						ERLOOP	TST			^SALL
   849	000356	0 002000 0 1 0 000 
   850	000357	0 116141 4 7 0141 
   851	000360	0 114346 4 6 0346 
   852					;*WAIT FOR 20 MS THEN CHECK THAT TIMER HASN'T TIMED OUT.
   853
   854	000361	0 002162 0 1 0 162 		GOSUB	WAIT			;GO WAIT FOR APPROX. 20 MS
   855	000362	0 177231 7 7 2 11 11 
   856	000363	0 032000 1 5 0 00 00 		DATI	CSR0,AC0		;READ TIME OUT BIT
   857	000364	0 062005 3 1 0 00 05 		SHL	AC0,BR			;LEFT ADJUST IT
   858	000365	0 110367 4 4 0367 		JMPB7	.+2			;JUMP IF IT SET TOO SOON
   859	000366	0 100370 4 0 0370 		JMP	.+2			;ELSE, CONTINUE
   860						ERROR	TST,"TIME OUT" FLAG SET TOO SOON,^_
   861	000367	0 116104 4 7 0104 	DIAG STARTED TIMER THEN WAITED APPROX 20 MS
   862
   863						ERLOOP	TST			^SALL
   864	000370	0 002001 0 1 0 001 
   865	000371	0 116141 4 7 0141 
   866	000372	0 114346 4 6 0346 
   867					;*WAIT FOR ANOTHER 20 MS, THEN CHECK THAT THE "TIME OUT" BIT HAS SET.
   868
   869	000373	0 002162 0 1 0 162 		GOSUB	WAIT			;GO WAIT ANOTHER 20 MS
   870	000374	0 177231 7 7 2 11 11 
   871	000375	0 032000 1 5 0 00 00 		DATI	CSR0,AC0		;READ TIME OUT BIT
   872	000376	0 062005 3 1 0 00 05 		SHL	AC0,BR			;LEFT ADJUST IT
   873	000377	0 110401 4 4 0401 		JMPB7	.+2			;JUMP IF IT SET CORRECTLY
   874	000400	0 116104 4 7 0104 		ERROR	TST,"TIME OUT" FLAG DID NOT SET AFTER 40 MS
   875
   876						ERLOOP	TST			^SALL
   877	000401	0 002002 0 1 0 002 
   878	000402	0 116141 4 7 0141 
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 4-1
MCOD2M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 1

   879	000403	0 114346 4 6 0346 
   880					;*CHECK THAT "TIME OUT" CAUSES AN INTERRUPT.
   881
   882	000404	0 102167 4 1 0167 		JMPI	ZRTN			;JUMP IF INTERRUPT OCCURRED
   883	000405	0 114407 4 6 0407 		JMPZ	.+2			;JUMP IF INTERRUPT JUMP WAS TAKEN
   884	000406	0 116104 4 7 0104 		ERROR	TST,"TIME OUT" FLAG DID NOT CAUSE AN INTERRUPT
   885
   886						ERLOOP	TST			^SALL
   887	000407	0 002003 0 1 0 003 
   888	000410	0 116141 4 7 0141 
   889	000411	0 114346 4 6 0346 
   890					;*CLEAR "TMR EN" (THIS STARTS TIMER AGAIN).
   891					;*CHECK THAT IT CLEARS.
   892
   893	000412	0 002000 0 1 0 000 	REG2A:	LDBR	0			;CLEAR "TMR EN"
   894	000413	0 064051 3 2 0 02 11 		MOVB	TOR0
   895	000414	0 022002 1 1 0 00 02 		DATI	TOR0,BR			;READ REG 2
   896	000415	0 014000 0 6 0 000 		SHR				;RIGHT ADJUST "TMR EN" BIT
   897	000416	0 014000 0 6 0 000 		SHR
   898	000417	0 104421 4 2 0421 		JMPB0	.+2			;JUMP IF IT DIDN'T CLEAR
   899	000420	0 100422 4 0 0422 		JMP	.+2			;ELSE, OKAY
   900	000421	0 116104 4 7 0104 		ERROR	REG2A,"TMR EN" BIT DID NOT CLEAR
   901
   902						ERLOOP	REG2A			^SALL
   903	000422	0 002004 0 1 0 004 
   904	000423	0 116141 4 7 0141 
   905	000424	0 114412 4 6 0412 
   906					;*WAIT 40 MS FOR TIMER TO TIME OUT.
   907					;*CHECK THAT "TIME OUT" FLAG DOES NOT SET.
   908
   909	000425	0 002162 0 1 0 162 		GOSUB	WAIT			;WAIT 20 MS
   910	000426	0 177231 7 7 2 11 11 
   911	000427	0 002162 0 1 0 162 		GOSUB	WAIT			;WAIT 20 MS
   912	000430	0 177231 7 7 2 11 11 
   913	000431	0 032000 1 5 0 00 00 		DATI	CSR0,AC0		;READ REG 0
   914	000432	0 062005 3 1 0 00 05 		SHL	AC0,BR			;LEFT ADJUST IT
   915	000433	0 110435 4 4 0435 		JMPB7	.+2			;JUMP IF IT SET, SHOULDN'T HAVE
   916	000434	0 100436 4 0 0436 		JMP	.+2			;ELSE, OKAY
   917	000435	0 116104 4 7 0104 		ERROR	REG2A,"TIME OUT" FLAG SET WITH "TMR EN" CLEARED
   918
   919						ERLOOP	REG2A			^SALL
   920	000436	0 002005 0 1 0 005 
   921	000437	0 116141 4 7 0141 
   922	000440	0 114412 4 6 0412 
   923					;*WRITE ZEROS TO THE REGISTER.
   924					;*CHECK THAT ALL BITS ARE ZEROS.
   925
   926	000441	0 010000 0 4 0 000 	REG2B:	LDMEM	0			;WRITE ZEROS TO REG 2
   927	000442	0 044051 2 2 0 02 11 		MOVMEM	TOR0
   928	000443	0 032002 1 5 0 00 02 		DATI	TOR0,AC0		;READ REG 2
   929	000444	0 040017 2 0 0 00 17 		OSM	AC0			;COMPARE DATA
   930	000445	0 114447 4 6 0447 		JMPZ	.+2			;JUMP IF ALL ZEROS
   931	000446	0 116104 4 7 0104 		ERRORM	REG2B,CAN NOT WRITE ALL ZEROS TO REG 2
   932
   933						ERLOOP	REG2B			^SALL
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 4-2
MCOD2M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 1

   934	000447	0 002106 0 1 0 106 
   935	000450	0 116145 4 7 0145 
   936	000451	0 114441 4 6 0441 
   937					;*WRITE ONES TO THE REGISTER.
   938					;*CHECK THAT ALL BITS ARE ONES.
   939
   940	000452	0 010377 0 4 0 377 	REG2C:	LDMEM	-1			;WRITE ONES TO REG 2
   941	000453	0 044051 2 2 0 02 11 		MOVMEM	TOR0
   942	000454	0 032002 1 5 0 00 02 		DATI	TOR0,AC0		;READ REG 2
   943	000455	0 040017 2 0 0 00 17 		OSM	AC0			;COMPARE DATA
   944	000456	0 114460 4 6 0460 		JMPZ	.+2			;JUMP IF ALL ONES
   945	000457	0 116104 4 7 0104 		ERRORM	REG2C,CAN NOT WRITE ALL ONES TO REG 2
   946
   947						ERLOOP	REG2C			^SALL
   948	000460	0 002107 0 1 0 107 
   949	000461	0 116145 4 7 0145 
   950	000462	0 114452 4 6 0452 
   951					;*DO A MICROBUS INIT.
   952					;*CHECK THAT ALL BITS CLEARED.
   953
   954	000463	0 002153 0 1 0 153 		GOSUB	INITL			;DO A MICROBUS INIT
   955	000464	0 177231 7 7 2 11 11 
   956	000465	0 032002 1 5 0 00 02 		DATI	TOR0,AC0		;READ REG 2
   957	000466	0 040017 2 0 0 00 17 		OSM	AC0			;ALL BITS ZERO?
   958	000467	0 114471 4 6 0471 		JMPZ	.+2			;JUMP IF ALL ZEROS
   959						ERRORM	REG2C,CAN NOT CLEAR ALL BIT(S) IN REGISTER 2,^_
   960	000470	0 116104 4 7 0104 	DIAG DID A MICROBUS INIT
   961
   962						ERLOOP	REG2C			^SALL
   963	000471	0 002110 0 1 0 110 
   964	000472	0 116145 4 7 0145 
   965	000473	0 114452 4 6 0452 
   966					;*WRITE FLOATING ZEROS AND FLOATING ONES PATTERNS TO THE REGISTER.
   967					;*CHECK THAT THE PATTERN GOT WRITTEN CORRECTLY.
   968
   969	000474	0 002017 0 1 0 017 		LDBR	^D15			;SETUP LOOP COUNT MINUS 1
   970	000475	0 072031 3 5 0 01 11 		MOVB	AC1
   971	000476	0 001003 0 0 2 003 		LDMAR	FLTZ			;SET MAR TO FIRST PATTERN
   972	000477	0 044051 2 2 0 02 11 	FLT2:	MOVMEM	TOR0			;WRITE REG 2 WITH FLOATING PATTERN
   973	000500	0 032002 1 5 0 00 02 		DATI	TOR0,AC0		;READ REG 2
   974	000501	0 040017 2 0 0 00 17 		OSM	AC0			;CHECK FOR CORRECT DATA
   975	000502	0 114504 4 6 0504 		JMPZ	.+2			;JUMP IF DATA CORRECT
   976						ERRORM	FLT2,FLOATING ZEROS/ONES FAILED,^_
   977	000503	0 116104 4 7 0104 	DIAG WROTE REG 2
   978
   979						ERLOOP	FLT2			^SALL
   980	000504	0 002111 0 1 0 111 
   981	000505	0 116145 4 7 0145 
   982	000506	0 114477 4 6 0477 
   983	000507	0 073427 3 5 3 01 07 		DECR	AC1,I			;DEC. AC1 AND INC. PATTERN ADDR
   984	000510	0 114512 4 6 0512 		JMPZ	.+2			;JUMP IF ALL DONE
   985	000511	0 100477 4 0 0477 		JMP	FLT2			;ELSE, CONTINUE
   986
   987	000512	0 116173 4 7 0173 		REPEAT	TST
   988	000513	0 114346 4 6 0346 
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 4-3
MCOD2M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 1

   989
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 5
MCOD2M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 1

   990						TEST	158,TEST REGISTER 3 (TOR1)
   991					;***********************************************************************
   992					;* MCODE2 * TEST 158 *    TEST REGISTER 3 (TOR1)
   993					;***********************************************************************
   994						SALL
   995	000514	0 002236 0 1 0 236 
   996	000515	0 116045 4 7 0045 
   997
   998	000516				TST158:	SALL
   999
  1000					;*TEST WRITING AND READING REGISTER 3.
  1001					;*BITS 2-0 ARE READ ONLY BITS.
  1002
  1003					;*WRITE ZEROS TO THE REGISTER.
  1004					;*CHECK THAT BITS 7-3 ARE ZEROS.
  1005
  1006	000516	0 001000 0 0 2 000 		LDMAR	0			;CLEAR MAR
  1007	000517	0 010000 0 4 0 000 		LDMEM	0			;WRITE ZEROS TO REG 3
  1008	000520	0 044071 2 2 0 03 11 		MOVMEM	TOR1
  1009	000521	0 032003 1 5 0 00 03 		DATI	TOR1,AC0		;READ REG 3
  1010	000522	0 002370 0 1 0 370 		LDBR	370			;SET MASK OF WRITEABLE BITS
  1011	000523	0 072013 3 5 0 00 13 		LANDBR	AC0			;ISOLATE THEM IN AC0
  1012	000524	0 040017 2 0 0 00 17 		OSM	AC0			;COMPARE DATA
  1013	000525	0 114527 4 6 0527 		JMPZ	.+2			;JUMP IF ZEROS
  1014	000526	0 116104 4 7 0104 		ERRORM	TST,CAN NOT WRITE ZEROS TO BITS 7-3 OF REG 3
  1015
  1016						ERLOOP	TST			^SALL
  1017	000527	0 002100 0 1 0 100 
  1018	000530	0 116145 4 7 0145 
  1019	000531	0 114516 4 6 0516 
  1020					;*WRITE ONES TO THE REGISTER.
  1021					;*CHECK THAT BITS 7-3 ARE ONES.
  1022
  1023	000532	0 010370 0 4 0 370 	REG3A:	LDMEM	370			;WRITE ONES TO BITS 2-7 OF REG 3
  1024	000533	0 044071 2 2 0 03 11 		MOVMEM	TOR1
  1025	000534	0 032003 1 5 0 00 03 		DATI	TOR1,AC0		;READ BACK REG 3
  1026	000535	0 052013 2 5 0 00 13 		LANDMR	AC0			;ISOLATE THE WRITEABLE BITS
  1027	000536	0 040017 2 0 0 00 17 		OSM	AC0			;COMPARE DATA
  1028	000537	0 114541 4 6 0541 		JMPZ	.+2			;JUMP IF ALL ONES
  1029	000540	0 116104 4 7 0104 		ERRORM	REG3A,CAN NOT WRITE ONES TO BITS 7-3 OF REG 3
  1030
  1031						ERLOOP	REG3A			^SALL
  1032	000541	0 002101 0 1 0 101 
  1033	000542	0 116145 4 7 0145 
  1034	000543	0 114532 4 6 0532 
  1035					;*DO A MICROBUS INIT.
  1036					;*CHECK THAT BITS 7-3 ARE CLEARED.
  1037
  1038	000544	0 002153 0 1 0 153 		GOSUB	INITL			;DO A MICROBUS INIT
  1039	000545	0 177231 7 7 2 11 11 
  1040	000546	0 032003 1 5 0 00 03 		DATI	TOR1,AC0		;READ REG 3
  1041	000547	0 002370 0 1 0 370 		LDBR	370			;SET MASK OF CLEARABLE BITS
  1042	000550	0 072013 3 5 0 00 13 		LANDBR	AC0			;ISOLATE THEM IN AC0
  1043	000551	0 040017 2 0 0 00 17 		OSM	AC0			;CHECK IF ALL BITS GOT ZEROED
  1044	000552	0 114554 4 6 0554 		JMPZ	.+2			;JUMP IF THEY DID
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 5-1
MCOD2M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 1

  1045						ERRORM	REG3A,CAN NOT CLEAR BITS 7-3 OF REG 3,^_
  1046	000553	0 116104 4 7 0104 	DIAG DID A MICROBUS INIT
  1047
  1048						ERLOOP	REG3A			^SALL
  1049	000554	0 002102 0 1 0 102 
  1050	000555	0 116145 4 7 0145 
  1051	000556	0 114532 4 6 0532 
  1052					;*WRITE FLOATING ZEROS AND FLOATING ONES PATTERNS TO THE REGISTER.
  1053					;*CHECK THAT THE PATTERN GOT WRITTEN CORRECTLY.
  1054
  1055	000557	0 002011 0 1 0 011 		LDBR	^D9			;SETUP LOOP COUNT MINUS 1
  1056	000560	0 072031 3 5 0 01 11 		MOVB	AC1
  1057	000561	0 001065 0 0 2 065 		LDMAR	FLTZD			;SET MAR TO FIRST PATTERN
  1058	000562	0 044071 2 2 0 03 11 	FLT3:	MOVMEM	TOR1			;WRITE REG 3 WITH FLOATING PATTERN
  1059	000563	0 032003 1 5 0 00 03 		DATI	TOR1,AC0		;READ IT BACK
  1060	000564	0 002370 0 1 0 370 		LDBR	370			;SET MASK OF WRITEABLE BITS
  1061	000565	0 072013 3 5 0 00 13 		LANDBR	AC0			;ISOLATE THEM IN AC0
  1062	000566	0 040017 2 0 0 00 17 		OSM	AC0			;COMPARE WITH PATTERN WRITTEN
  1063	000567	0 114571 4 6 0571 		JMPZ	.+2			;JUMP IF READ DATA IS CORRECT
  1064						ERRORM	FLT3,FLOATING ZEROS/ONES FAILED,^_
  1065	000570	0 116104 4 7 0104 	DIAG WROTE REG 3
  1066
  1067						ERLOOP	FLT3			^SALL
  1068	000571	0 002103 0 1 0 103 
  1069	000572	0 116145 4 7 0145 
  1070	000573	0 114562 4 6 0562 
  1071	000574	0 073427 3 5 3 01 07 		DECR	AC1,I			;DEC LOOP CNT AND INC MAR
  1072	000575	0 114577 4 6 0577 		JMPZ	.+2			;JUMP IF ALL DONE
  1073	000576	0 100562 4 0 0562 		JMP	FLT3			;ELSE, CONTINUE
  1074
  1075	000577	0 116173 4 7 0173 		REPEAT	TST
  1076	000600	0 114516 4 6 0516 
  1077
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 6
MCOD2M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 1

  1078						TEST	159,TEST REGISTER 4 (TAGIN0)
  1079					;***********************************************************************
  1080					;* MCODE2 * TEST 159 *    TEST REGISTER 4 (TAGIN0)
  1081					;***********************************************************************
  1082						SALL
  1083	000601	0 002237 0 1 0 237 
  1084	000602	0 116045 4 7 0045 
  1085
  1086	000603				TST159:	SALL
  1087
  1088					;*WRITE REGISTER 2 AND READ REGISTER 4.
  1089					;*WITH LOOP ENABLE SET, BITS 7,6,4,3,1,0 OF REG 2 ARE READ BACK IN REG 4.
  1090					;*BIT 2 SHOULD ALWAYS BE ZERO.
  1091					;*WITH NO BUS EXTENSION, BIT 5 SHOULD ALWAYS BE ZERO.
  1092					;*LOOP ENABLE IS SET FOR THIS TEST.
  1093
  1094					;*WRITE ZEROS TO REG 2.
  1095					;*CHECK THAT LOOPED BACK BITS IN REG 4 ARE ZEROS.
  1096
  1097	000603	0 001000 0 0 2 000 		LDMAR	0			;CLEAR MAR
  1098	000604	0 002004 0 1 0 004 		LDBR	LOOPEN			;SET LOOP ENABLE FOR THIS TEST
  1099	000605	0 064031 3 2 0 01 11 		MOVB	CSR1
  1100	000606	0 010000 0 4 0 000 		LDMEM	0			;CLEAR REG 2
  1101	000607	0 044051 2 2 0 02 11 		MOVMEM	TOR0
  1102	000610	0 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  1103	000611	0 032004 1 5 0 00 04 		DATI	TAGIN0,AC0		;READ REG 4
  1104	000612	0 040017 2 0 0 00 17 		OSM	AC0			;COMPARE WITH EXPECTED DATA
  1105	000613	0 114615 4 6 0615 		JMPZ	.+2			;JUMP IF CORRECT (LOOPED BACK BITS = ZEROS)
  1106						ERRORM	TST,CAN NOT READ ALL LOOPED-BACK BITS ZEROS,^_
  1107	000614	0 116104 4 7 0104 	DIAG CLEARED REG 2 AND READ REG 4 WITH LOOP ENABLED
  1108
  1109						ERLOOP	TST			^SALL
  1110	000615	0 002100 0 1 0 100 
  1111	000616	0 116145 4 7 0145 
  1112	000617	0 114603 4 6 0603 
  1113					;*WRITE ONES TO REG 2.
  1114					;*CHECK THAT LOOPED BACK BITS IN REG 4 ARE ONES.
  1115
  1116	000620	0 010333 0 4 0 333 	REG4A:	LDMEM	333			;SET LOAD DATA
  1117	000621	0 044051 2 2 0 02 11 		MOVMEM	TOR0
  1118	000622	0 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  1119	000623	0 032004 1 5 0 00 04 		DATI	TAGIN0,AC0		;READ REG 4
  1120	000624	0 040017 2 0 0 00 17 		OSM	AC0			;COMPARE WITH EXPECTED DATA
  1121	000625	0 114627 4 6 0627 		JMPZ	.+2			;JUMP IF CORRECT (LOOPED-BACK BITS = ONES)
  1122						ERRORM	REG4A,CAN NOT READ ALL LOOPED-BACK BITS ONES,^_
  1123	000626	0 116104 4 7 0104 	DIAG WROTE ONES TO REG 2 AND READ REG 4 WITH LOOP ENABLED
  1124
  1125						ERLOOP	REG4A			^SALL
  1126	000627	0 002101 0 1 0 101 
  1127	000630	0 116145 4 7 0145 
  1128	000631	0 114620 4 6 0620 
  1129					;*WRITE FLOATING ZEROS AND FLOATING ONES PATTERNS TO THE LOOPED BACK BITS
  1130					;*IN REG 2.
  1131					;*READ BACK REG 4 FOR THE PATTERN.
  1132
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 6-1
MCOD2M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 1

  1133	000632	0 002013 0 1 0 013 		LDBR	^D11			;SETUP LOOP COUNT MINUS 1
  1134	000633	0 072031 3 5 0 01 11 		MOVB	AC1
  1135	000634	0 001041 0 0 2 041 		LDMAR	FLTZB			;SET MAR TO FLOATING PATTERNS
  1136	000635	0 044051 2 2 0 02 11 	FLT4:	MOVMEM	TOR0			;LOAD REG 2 WITH PATTERN
  1137	000636	0 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  1138	000637	0 032004 1 5 0 00 04 		DATI	TAGIN0,AC0		;READ REG 4
  1139	000640	0 040017 2 0 0 00 17 		OSM	AC0			;COMPARE WITH EXPECTED DATA PATTERN
  1140	000641	0 114643 4 6 0643 		JMPZ	.+2			;JUMP IF CORRECT
  1141						ERRORM	FLT4,FLOATING ZEROS/ONES FAILED,^_
  1142	000642	0 116104 4 7 0104 	DIAG WROTE REG 2 AND READ REG 4 WITH LOOP ENABLED
  1143
  1144						ERLOOP	FLT4			^SALL
  1145	000643	0 002102 0 1 0 102 
  1146	000644	0 116145 4 7 0145 
  1147	000645	0 114635 4 6 0635 
  1148	000646	0 073427 3 5 3 01 07 		DECR	AC1,I			;DEC LOOP COUNT AND INC PATTERN ADDR
  1149	000647	0 114651 4 6 0651 		JMPZ	.+2			;JUMP IF ALL DONE
  1150	000650	0 100635 4 0 0635 		JMP	FLT4			;ELSE, CONTINUE
  1151
  1152	000651	0 116173 4 7 0173 		REPEAT	TST
  1153	000652	0 114603 4 6 0603 
  1154
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 7
MCOD2M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 1

  1155						TEST	160,TEST REGISTER 5 (TAGIN1)
  1156					;***********************************************************************
  1157					;* MCODE2 * TEST 160 *    TEST REGISTER 5 (TAGIN1)
  1158					;***********************************************************************
  1159						SALL
  1160	000653	0 002240 0 1 0 240 
  1161	000654	0 116045 4 7 0045 
  1162
  1163	000655				TST160:	SALL
  1164
  1165					;*WRITE REGISTER 3 AND READ REGISTER 5.
  1166					;*WITH LOOP ENABLE SET, BITS 7-4 OF REG 3 ARE READ BACK IN REG 5.
  1167					;*LOOP ENABLE IS SET FOR THIS TEST.
  1168
  1169					;*WRITE ZEROS TO REG 3.
  1170					;*CHECK THAT LOOPED BACK BITS IN REG 5 ARE ZEROS.
  1171
  1172	000655	0 001000 0 0 2 000 		LDMAR	0			;CLEAR MAR
  1173	000656	0 002004 0 1 0 004 		LDBR	LOOPEN			;SET LOOP ENABLE FOR THIS TEST
  1174	000657	0 064031 3 2 0 01 11 		MOVB	CSR1
  1175	000660	0 010000 0 4 0 000 		LDMEM	0			;WRITE ZEROS TO REG 3
  1176	000661	0 044071 2 2 0 03 11 		MOVMEM	TOR1
  1177	000662	0 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  1178	000663	0 032005 1 5 0 00 05 		DATI	TAGIN1,AC0		;READ REG 5
  1179	000664	0 002360 0 1 0 360 		LDBR	360			;MASK OUT SP ADR BITS
  1180	000665	0 072013 3 5 0 00 13 		LANDBR	AC0
  1181	000666	0 040017 2 0 0 00 17 		OSM	AC0			;COMPARE WITH EXPECTED DATA
  1182	000667	0 114671 4 6 0671 		JMPZ	.+2			;JUMP IF CORRECT (LOOPED-BACK BITS = ZEROS)
  1183						ERRORM	TST,CAN NOT READ ALL LOOPED-BACK BITS ZEROS,^_
  1184	000670	0 116104 4 7 0104 	DIAG CLEARED REG 3 AND READ REG 5 WITH LOOP ENABLED
  1185
  1186						ERLOOP	TST			^SALL
  1187	000671	0 002100 0 1 0 100 
  1188	000672	0 116145 4 7 0145 
  1189	000673	0 114655 4 6 0655 
  1190					;*WRITE ONES TO REG 3.
  1191					;*CHECK THAT LOOPED BACK BITS IN REG 5 ARE ONES.
  1192
  1193	000674	0 010360 0 4 0 360 	REG5A:	LDMEM	360			;WRITE ONES TO LOOPED-BACK BITS IN REG 3
  1194	000675	0 044071 2 2 0 03 11 		MOVMEM	TOR1
  1195	000676	0 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  1196	000677	0 032005 1 5 0 00 05 		DATI	TAGIN1,AC0		;READ REG 5
  1197	000700	0 052013 2 5 0 00 13 		LANDMR	AC0			;MASK OUT SP ADR BITS
  1198	000701	0 040017 2 0 0 00 17 		OSM	AC0			;COMPARE WITH EXPECTED DATA
  1199	000702	0 114704 4 6 0704 		JMPZ	.+2			;JUMP IF CORRECT (LOOPED-BACK BITS = ONES)
  1200						ERRORM	REG5A,CAN NOT READ ALL LOOPED-BACK BITS ONES,^_
  1201	000703	0 116104 4 7 0104 	DIAG WROTE ONES TO REG 3 AND READ REG 5 WITH LOOP ENABLED
  1202
  1203						ERLOOP	REG5A			^SALL
  1204	000704	0 002101 0 1 0 101 
  1205	000705	0 116145 4 7 0145 
  1206	000706	0 114674 4 6 0674 
  1207					;*WRITE FLOATING ZEROS AND FLOATING ONES PATTERNS TO LOOPED BACK BITS
  1208					;*IN REG 3.
  1209					;*READ BACK REG 5 FOR PATTERN.
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 7-1
MCOD2M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 1

  1210
  1211	000707	0 002007 0 1 0 007 		LDBR	^D7			;SETUP LOOP COUNT MINUS 1
  1212	000710	0 072031 3 5 0 01 11 		MOVB	AC1
  1213	000711	0 001055 0 0 2 055 		LDMAR	FLTZC			;SET MAR TO FIRST PATTERN
  1214	000712	0 044071 2 2 0 03 11 	FLT5:	MOVMEM	TOR1			;WRITE PATTERN TO REG 3
  1215	000713	0 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  1216	000714	0 032005 1 5 0 00 05 		DATI	TAGIN1,AC0		;READ REG 5
  1217	000715	0 002360 0 1 0 360 		LDBR	360			;MASK OUT SP ADR BITS
  1218	000716	0 072013 3 5 0 00 13 		LANDBR	AC0
  1219	000717	0 040017 2 0 0 00 17 		OSM	AC0			;COMPARE WITH PATTERN WRITTEN
  1220	000720	0 114722 4 6 0722 		JMPZ	.+2			;JUMP IF READ DATA IS CORRECT
  1221						ERRORM	FLT5,FLOATING ZEROS/ONES FAILED,^_
  1222	000721	0 116104 4 7 0104 	DIAG WROTE REG 3 AND READ REG 5 WITH LOOP ENABLED
  1223
  1224						ERLOOP	FLT5			^SALL
  1225	000722	0 002102 0 1 0 102 
  1226	000723	0 116145 4 7 0145 
  1227	000724	0 114712 4 6 0712 
  1228	000725	0 073427 3 5 3 01 07 		DECR	AC1,I			;DEC AC1 AND INC MAR
  1229	000726	0 114730 4 6 0730 		JMPZ	.+2			;JUMP IF ALL DONE
  1230	000727	0 100712 4 0 0712 		JMP	FLT5			;ELSE, CONTINUE
  1231
  1232	000730	0 116173 4 7 0173 		REPEAT	TST
  1233	000731	0 114655 4 6 0655 
  1234
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 8
MCOD2M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 1

  1235						TEST	161,TEST REGISTER 5 (SPADR)
  1236					;***********************************************************************
  1237					;* MCODE2 * TEST 161 *    TEST REGISTER 5 (SPADR)
  1238					;***********************************************************************
  1239						SALL
  1240	000732	0 002241 0 1 0 241 
  1241	000733	0 116045 4 7 0045 
  1242
  1243	000734				TST161:	SALL
  1244
  1245					;*TEST WRITING AND READING BITS 3-0 OF REG 5 (SP ADR BITS).
  1246					;*LOOP ENABLE IS NOT SET FOR THIS TEST.
  1247					;*THE "CHAN MODE" BIT MUST BE SET TO ALLOW READING OF SP ADR BITS.
  1248
  1249					;*WRITE ZEROS TO BITS 3-0.
  1250					;*CHECK THAT BITS 3-0 ARE ZEROS.
  1251
  1252	000734	0 001000 0 0 2 000 		LDMAR	0			;CLEAR MAR
  1253	000735	0 002001 0 1 0 001 		LDBR	CHANL			;SET "CHAN MODE"
  1254	000736	0 064031 3 2 0 01 11 		MOVB	CSR1
  1255	000737	0 010000 0 4 0 000 		LDMEM	0			;WRITE ZEROS INTO BITS 3-0 OF REG 5
  1256	000740	0 044131 2 2 0 05 11 		MOVMEM	SPADR
  1257	000741	0 032005 1 5 0 00 05 		DATI	SPADR,AC0		;READ BACK SP ADR BITS IN REG 5
  1258	000742	0 002017 0 1 0 017 		LDBR	17			;SETUP BIT MASK FOR SP ADR BITS
  1259	000743	0 072013 3 5 0 00 13 		LANDBR	AC0			;ISOLATE THE SP ADR BITS
  1260	000744	0 040017 2 0 0 00 17 		OSM	AC0			;CHECK IF ALL ZEROS
  1261	000745	0 114747 4 6 0747 		JMPZ	.+2			;JUMP IF ALL ZEROS
  1262	000746	0 116104 4 7 0104 		ERRORM	TST,CAN NOT WRITE ALL ZEROS TO BITS 3-0 OF REG 5
  1263
  1264						ERLOOP	TST			^SALL
  1265	000747	0 002100 0 1 0 100 
  1266	000750	0 116145 4 7 0145 
  1267	000751	0 114734 4 6 0734 
  1268					;*WRITE ONES TO BITS 3-0 OF REG 5.
  1269					;*CHECK THAT BITS 3-0 OF REG 5 ARE ONES.
  1270
  1271	000752	0 010017 0 4 0 017 	REG5AA:	LDMEM	17			;SETUP BIT MASK FOR SP ADR BITS
  1272	000753	0 044131 2 2 0 05 11 		MOVMEM	SPADR			;WRITE ONES INTO SP ADR BITS
  1273	000754	0 032005 1 5 0 00 05 		DATI	SPADR,AC0		;READ REG 5
  1274	000755	0 052013 2 5 0 00 13 		LANDMR	AC0			;ISOLATE SP ADR BITS
  1275	000756	0 040017 2 0 0 00 17 		OSM	AC0			;CHECK IF ALL ONES
  1276	000757	0 114761 4 6 0761 		JMPZ	.+2			;JUMP IF ALL ONES
  1277	000760	0 116104 4 7 0104 		ERRORM	REG5AA,CAN NOT WRITE ALL ONES TO BITS 3-0 OF REG 5
  1278
  1279						ERLOOP	REG5AA			^SALL
  1280	000761	0 002101 0 1 0 101 
  1281	000762	0 116145 4 7 0145 
  1282	000763	0 114752 4 6 0752 
  1283					;*WRITE FLOATING ZEROS AND FLOATING ONES PATTERNS TO BITS 3-0 OF REG 5.
  1284					;*READ BACK BITS 3-0 OF REG 5 FOR THE PATTERN.
  1285
  1286	000764	0 002007 0 1 0 007 		LDBR	^D7			;SETUP LOOP COUNT MINUS 1
  1287	000765	0 072031 3 5 0 01 11 		MOVB	AC1
  1288	000766	0 001077 0 0 2 077 		LDMAR	FLTZE			;SET MAR TO FIRST PATTERN
  1289	000767	0 044131 2 2 0 05 11 	FLT5A:	MOVMEM	SPADR			;WRITE PATTERN TO BITS 3-0 OF REG 5
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 8-1
MCOD2M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 1

  1290	000770	0 032005 1 5 0 00 05 		DATI	SPADR,AC0		;READ REG 5
  1291	000771	0 002017 0 1 0 017 		LDBR	17			;SETUP BIT MASK FOR SP ADR BITS
  1292	000772	0 072013 3 5 0 00 13 		LANDBR	AC0			;ISOLATE SP ADR BITS
  1293	000773	0 040017 2 0 0 00 17 		OSM	AC0			;CHECK FOR CORRECT PATTERN
  1294	000774	0 114776 4 6 0776 		JMPZ	.+2			;JUMP IF CORRECT PATTERN
  1295						ERRORM	FLT5A,FLOATING ZEROS/ONES FAILED,^_
  1296	000775	0 116104 4 7 0104 	DIAG WROTE BITS 3-0 OF REG 5
  1297
  1298						ERLOOP	FLT5A			^SALL
  1299	000776	0 002102 0 1 0 102 
  1300	000777	0 116145 4 7 0145 
  1301	001000	0 114767 4 6 0767 
  1302	001001	0 073427 3 5 3 01 07 		DECR	AC1,I			;DEC LOOP COUNT AND INC MAR
  1303	001002	0 115004 4 6 1004 		JMPZ	.+2			;JUMP IF ALL DONE
  1304	001003	0 100767 4 0 0767 		JMP	FLT5A			;ELSE,CONTINUE
  1305
  1306	001004	0 116173 4 7 0173 		REPEAT	TST
  1307	001005	0 114734 4 6 0734 
  1308
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 9
MCOD2M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 1

  1309						TEST	162,TEST REGISTER 11 (BORLO) AND REGISTER 7 (CBILO)
  1310					;***********************************************************************
  1311					;* MCODE2 * TEST 162 *    TEST REGISTER 11 (BORLO) AND REGISTER 7 (CBILO)
  1312					;***********************************************************************
  1313						SALL
  1314	001006	0 002242 0 1 0 242 
  1315	001007	0 116045 4 7 0045 
  1316
  1317	001010				TST162:	SALL
  1318
  1319					;*WRITE REGISTER 11 AND READ REGISTER 7 FOR THE COMPLEMENT OF REGISTER 0.
  1320					;*LOOP ENABLE IS SET FOR THIS TEST.
  1321
  1322					;*WRITE ZEROS TO REG 11.
  1323					;*CHECK THAT REG 7 IS ALL ONES.
  1324
  1325	001010	0 001000 0 0 2 000 		LDMAR	0			;CLEAR MAR
  1326	001011	0 002004 0 1 0 004 		LDBR	LOOPEN			;SET LOOP ENABLE
  1327	001012	0 064031 3 2 0 01 11 		MOVB	CSR1
  1328	001013	0 002000 0 1 0 000 		LDBR	0			;WRITE ZEROS TO REG 11
  1329	001014	0 064231 3 2 0 11 11 		MOVB	BORLO
  1330	001015	0 010377 0 4 0 377 		LDMEM	-1			;SETUP EXPECTED DATA
  1331	001016	0 032007 1 5 0 00 07 		DATI	CBILO,AC0		;READ REG 7
  1332	001017	0 040017 2 0 0 00 17 		OSM	AC0			;COMPARE DATA
  1333	001020	0 115022 4 6 1022 		JMPZ	.+2			;JUMP IF ALL ZEROS
  1334						ERRORM	TST,CAN NOT WRITE ALL ZEROS TO REG 11,^_
  1335	001021	0 116104 4 7 0104 	DIAG WROTE ZEROS TO REG 11 AND READ REG 7 WITH LOOP ENABLED
  1336
  1337						ERLOOP	TST			^SALL
  1338	001022	0 002100 0 1 0 100 
  1339	001023	0 116145 4 7 0145 
  1340	001024	0 115010 4 6 1010 
  1341					;*WRITE ONES TO REG 11.
  1342					;*CHECK THAT REG 7 IS ALL ZEROS.
  1343
  1344	001025	0 002377 0 1 0 377 	REG11A:	LDBR	-1			;WRITE ONES TO REG 11
  1345	001026	0 064231 3 2 0 11 11 		MOVB	BORLO
  1346	001027	0 010000 0 4 0 000 		LDMEM	0			;SETUP EXPECTED DATA
  1347	001030	0 032007 1 5 0 00 07 		DATI	CBILO,AC0		;READ REG 7
  1348	001031	0 040017 2 0 0 00 17 		OSM	AC0			;COMPARE DATA
  1349	001032	0 115034 4 6 1034 		JMPZ	.+2			;JUMP IF ALL ONES
  1350						ERRORM	REG11A,CAN NOT WRITE ALL ONES TO REG 11,^_
  1351	001033	0 116104 4 7 0104 	DIAG WROTE ONES TO REG 11 AND READ REG 7 WITH LOOP ENABLED
  1352
  1353						ERLOOP	REG11A			^SALL
  1354	001034	0 002101 0 1 0 101 
  1355	001035	0 116145 4 7 0145 
  1356	001036	0 115025 4 6 1025 
  1357					;*WRITE FLOATING ZEROS AND FLOATING ONES PATTERNS TO REG 11.
  1358					;*READ BACK REG 7 FOR THE COMPLEMENT OF THE PATTERN.
  1359
  1360	001037	0 002017 0 1 0 017 		LDBR	^D15			;SETUP LOOP COUNT MINUS 1
  1361	001040	0 072031 3 5 0 01 11 		MOVB	AC1
  1362	001041	0 001003 0 0 2 003 		LDMAR	FLTZ			;SET MAR TO FIRST PATTERN
  1363	001042	0 002000 0 1 0 000 	FLT11:	LDBR	0			;SETUP COMPLEMENT OF PATTERN
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 9-1
MCOD2M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 1

  1364	001043	0 072051 3 5 0 02 11 		MOVB	AC2
  1365	001044	0 042052 2 1 0 02 12 		LORCM	AC2,BR			;IN THE BR AND
  1366	001045	0 064231 3 2 0 11 11 		MOVB	BORLO			;WRITE IT TO REG 11
  1367	001046	0 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  1368	001047	0 032007 1 5 0 00 07 		DATI	CBILO,AC0		;READ REG 7
  1369	001050	0 040017 2 0 0 00 17 		OSM	AC0			;CHECK FOR CORRECT DATA
  1370	001051	0 115053 4 6 1053 		JMPZ	.+2			;JUMP IF DATA CORRECT
  1371						ERRORM	FLT11,FLOATING ZEROS/ONES FAILED,^_
  1372	001052	0 116104 4 7 0104 	DIAG WROTE REG 11 AND READ REG 7 WITH LOOP ENABLED
  1373
  1374						ERLOOP	FLT11			^SALL
  1375	001053	0 002102 0 1 0 102 
  1376	001054	0 116145 4 7 0145 
  1377	001055	0 115042 4 6 1042 
  1378	001056	0 073427 3 5 3 01 07 		DECR	AC1,I			;DEC. LOOP CNT AND INC. MAR.
  1379	001057	0 115061 4 6 1061 		JMPZ	.+2			;JUMP IF ALL DONE
  1380	001060	0 101042 4 0 1042 		JMP	FLT11			;ELSE, CONTINUE
  1381
  1382					;*CLEAR LOOP ENABLE.
  1383					;*CHECK THAT REG 11 DOES NOT LOOP BACK TO REG 7.
  1384
  1385	001061	0 002000 0 1 0 000 	REG11B:	LDBR	0			;CLEAR LOOP ENABLE
  1386	001062	0 064031 3 2 0 01 11 		MOVB	CSR1
  1387	001063	0 002252 0 1 0 252 		LDBR	252			;WRITE REG 11 WITH ALTERNATE 1'S & 0'S
  1388	001064	0 064231 3 2 0 11 11 		MOVB	BORLO
  1389	001065	0 010125 0 4 0 125 		LDMEM	125			;SET MEMORY TO COMPLEMENT OF THAT
  1390	001066	0 032007 1 5 0 00 07 		DATI	CBILO,AC0		;READ REG 7
  1391	001067	0 040017 2 0 0 00 17 		OSM	AC0			;CHECK FOR LOOPED BACK DATA
  1392	001070	0 115072 4 6 1072 		JMPZ	.+2			;JUMP IF DATA WAS LOOPED BACK
  1393	001071	0 101073 4 0 1073 		JMP	.+2			;ELSE, RESULTS OKAY
  1394	001072	0 116104 4 7 0104 		ERRORM	REG11B,REG 11 DATA LOOPED BACK TO REG 7 WITHOUT LOOP ENABLED
  1395
  1396						ERLOOP	REG11B			^SALL
  1397	001073	0 002103 0 1 0 103 
  1398	001074	0 116145 4 7 0145 
  1399	001075	0 115061 4 6 1061 
  1400	001076	0 116173 4 7 0173 		REPEAT	TST
  1401	001077	0 115010 4 6 1010 
  1402
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 10
MCOD2M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 1

  1403						TEST	163,TEST REGISTER 6 (DRLO)
  1404					;***********************************************************************
  1405					;* MCODE2 * TEST 163 *    TEST REGISTER 6 (DRLO)
  1406					;***********************************************************************
  1407						SALL
  1408	001100	0 002243 0 1 0 243 
  1409	001101	0 116045 4 7 0045 
  1410
  1411	001102				TST163:	SALL
  1412
  1413					;*TEST THAT ONES, ZEROS, FLOATING ZEROS AND FLOATING ONES PATTERNS CAN BE CLOCKED
  1414					;*INTO THE DRLO REGISTER (7-0).
  1415					;*LOOP ENABLE IS SET FOR THIS OPERATION.
  1416
  1417					;*CLEAR "DATA TO DEVICE".
  1418					;*WRITE COMPLEMENT OF PATTERN TO REG 11.
  1419					;*GENERATE A "CLOCK DR" PULSE.
  1420					;*READ REG 6 FOR PATTERN.
  1421
  1422	001102	0 002203 0 1 0 203 		GOSUB	DEVRD			;SETUP FOR A DEVICE READ
  1423	001103	0 177231 7 7 2 11 11 
  1424	001104	0 002004 0 1 0 004 		LDBR	LOOPEN			;SET LOOP ENABLE
  1425	001105	0 064031 3 2 0 01 11 		MOVB	CSR1
  1426	001106	0 002021 0 1 0 021 		LDBR	^D17			;SET LOOP COUNT MINUS 1
  1427	001107	0 072031 3 5 0 01 11 		MOVB	AC1
  1428	001110	0 001001 0 0 2 001 		LDMAR	PATS			;SET MAR TO FIRST PATTERN
  1429	001111	0 002000 0 1 0 000 	FLT6:	LDBR	0			;SETUP COMPLEMENT OF PATTERN IN
  1430	001112	0 072051 3 5 0 02 11 		MOVB	AC2
  1431	001113	0 042052 2 1 0 02 12 		LORCM	AC2,BR			;BR THEN
  1432	001114	0 064231 3 2 0 11 11 		MOVB	BORLO			;WRITE IT TO REG 11
  1433	001115	0 064151 3 2 0 06 11 		MOVB	CLKDRL			;CLOCK THE DR REG
  1434	001116	0 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  1435	001117	0 032006 1 5 0 00 06 		DATI	DRLO,AC0		;READ DATA FROM DR REG
  1436	001120	0 040017 2 0 0 00 17 		OSM	AC0			;COMPARE WITH EXPECTED PATTERN
  1437	001121	0 115123 4 6 1123 		JMPZ	.+2			;JUMP IF CORRECT
  1438						ERRORM	FLT6,DATA PATTERN ERROR,^_
  1439	001122	0 116104 4 7 0104 	DIAG CLOCKED DATA FROM BORLO INTO THE DR REG USING LOOP BACK
  1440
  1441						ERLOOP	FLT6			^SALL
  1442	001123	0 002100 0 1 0 100 
  1443	001124	0 116145 4 7 0145 
  1444	001125	0 115111 4 6 1111 
  1445	001126	0 073427 3 5 3 01 07 		DECR	AC1,I			;DEC LOOP COUNT AND INC PATTERN ADDR
  1446	001127	0 115131 4 6 1131 		JMPZ	.+2			;JUMP IF ALL DONE
  1447	001130	0 101111 4 0 1111 		JMP	FLT6			;ELSE, CONTINUE
  1448
  1449	001131	0 116173 4 7 0173 		REPEAT TST
  1450	001132	0 115102 4 6 1102 
  1451	001133	0 002000 0 1 0 000 		JUMP	NXTBNK			;JUMP TO NEXT BANK OF CRAM
  1452	001134	0 160231 7 0 0 11 11 
  1453	002000					.LOC	2000
  1454	002000				NXTBNK:
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 11
MCOD2M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 1

  1455						TEST	164,TEST LOADING OF DRLO FROM SLVE DATA LINES
  1456					;***********************************************************************
  1457					;* MCODE2 * TEST 164 *    TEST LOADING OF DRLO FROM SLVE DATA LINES
  1458					;***********************************************************************
  1459						SALL
  1460	002000	1 002244 0 1 0 244 
  1461	002001	1 117320 4 7 1320 
  1462
  1463	002002				TST164:	SALL
  1464
  1465					;*TEST THAT CLOCKING DRLO WITH "DATA TO DEV" SET LOADS DRLO WITH
  1466					;*SLVE DATA LINES DATA.  THE ACTUAL SLVE DATA LINES DATA CANNOT BE READ
  1467					;*DIRECTLY.  HOWEVER, IF THE DATA PATH BOARDS ARE FUNCTIONING CORRECTLY,
  1468					;*A MICROBUS INIT SHOULD SET THEM TO ALL ONES.
  1469
  1470					;*CLEAR "DATA TO DEV".
  1471					;*DO A MICROBUS INIT.
  1472					;*CLOCK ALL ZEROS INTO DRLO FROM BORLO.
  1473					;*SET "DATA TO DEV".
  1474					;*CLOCK DRLO.
  1475					;*CHECK THAT DRLO CONTAINS ALL ONES.
  1476
  1477	002002	1 117203 4 7 1203 		JMPSUB	DEVRD			;SETUP DEVICE READ
  1478	002003	1 117153 4 7 1153 		JMPSUB	INITL			;DO A MICROBUS INIT
  1479	002004	1 002004 0 1 0 004 		LDBR	LOOPEN			;SET LOOP ENABLE
  1480	002005	1 064031 3 2 0 01 11 		MOVB	CSR1
  1481	002006	1 010377 0 4 0 377 		LDMEM	-1			;LOAD BORLO WITH ALL ONES
  1482	002007	1 044231 2 2 0 11 11 		MOVMEM	BORLO
  1483	002010	1 064151 3 2 0 06 11 		MOVB	CLKDRL			;CLOCK ALL ZEROS INTO DRLO
  1484	002011	1 117212 4 7 1212 		JMPSUB	DEVWR			;SETUP DEVICE WRITE
  1485	002012	1 064151 3 2 0 06 11 		MOVB	CLKDRL			;CLOCK DRLO
  1486	002013	1 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  1487	002014	1 032006 1 5 0 00 06 		DATI	DRLO,AC0		;READ DRLO
  1488	002015	1 114017 4 6 0017 		JMPZ	.+2			;JUMP IF DRLO IS ALL ONES
  1489						ERRORM	TST,DATA PATH DATA DID NOT LOAD INTO DRLO REG,^_
  1490					<DIAG DID A MICROBUS INIT, LOADED DRLO WITH ALL ZEROS, THEN
  1491	002016	1 117331 4 7 1331 	SET "DATA TO DEVICE" AND CLOCKED DRLO.>
  1492
  1493						ERLOOP	TST			^SALL
  1494	002017	1 002100 0 1 0 100 
  1495	002020	1 117326 4 7 1326 
  1496	002021	1 114002 4 6 0002 
  1497	002022	1 117333 4 7 1333 		REPEAT	TST
  1498	002023	1 114002 4 6 0002 
  1499
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 12
MCOD2M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 1

  1500						TEST	165,TEST "ON LINE"
  1501					;***********************************************************************
  1502					;* MCODE2 * TEST 165 *    TEST "ON LINE"
  1503					;***********************************************************************
  1504						SALL
  1505	002024	1 002245 0 1 0 245 
  1506	002025	1 117320 4 7 1320 
  1507
  1508	002026				TST165:	SALL
  1509
  1510					;*TEST THAT THE "ON LINE" BIT CAN BE SET AND CLEARED.
  1511					;*TO INHIBIT TURNING ON THE CHANNEL BUS DRIVERS SET "CU RESET".
  1512
  1513					;*WRITE ONES TO REG 16.
  1514					;*WRITE A ONE TO "ON LINE".
  1515					;*CHECK THAT IT SET.
  1516
  1517	002026	1 002007 0 1 0 007 		LDBR	7			;WRITE ONES TO REG 16 TO SET "CU RESET"
  1518	002027	1 064351 3 2 0 16 11 		MOVB	CUSTAT
  1519	002030	1 002100 0 1 0 100 		LDBR	CURSEN			;SET "CU RESET EN"
  1520	002031	1 064071 3 2 0 03 11 		MOVB	TOR1
  1521	002032	1 002002 0 1 0 002 		LDBR	ONLINE			;SET "ON LINE"
  1522	002033	1 064031 3 2 0 01 11 		MOVB	CSR1
  1523	002034	1 022001 1 1 0 00 01 		DATI	CSR1,BR			;READ "ON LINE"
  1524	002035	1 014000 0 6 0 000 		SHR				;RIGHT ADJUST IT
  1525	002036	1 104040 4 2 0040 		JMPB0	.+2			;JUMP IF IT SET
  1526	002037	1 117331 4 7 1331 		ERROR	TST,CANNOT WRITE A ONE TO "ON LINE"
  1527
  1528						ERLOOP	TST			^SALL
  1529	002040	1 002000 0 1 0 000 
  1530	002041	1 117323 4 7 1323 
  1531	002042	1 114026 4 6 0026 
  1532					;*CLEAR "ON LINE".
  1533					;*CHECK THAT IT GOT CLEARED.
  1534
  1535	002043	1 002000 0 1 0 000 		LDBR	0			;CLEAR "ONLINE"
  1536	002044	1 064031 3 2 0 01 11 		MOVB	CSR1
  1537	002045	1 022001 1 1 0 00 01 		DATI	CSR1,BR			;READ "ON LINE"
  1538	002046	1 014000 0 6 0 000 		SHR				;RIGHT ADJUST IT
  1539	002047	1 104051 4 2 0051 		JMPB0	.+2			;JUMP IF IT DIDN'T CLEAR
  1540	002050	1 100052 4 0 0052 		JMP	.+2			;ELSE, OKAY
  1541	002051	1 117331 4 7 1331 		ERROR	TST,CANNOT WRITE A ZERO TO "ON LINE"
  1542
  1543						ERLOOP	TST			^SALL
  1544	002052	1 002001 0 1 0 001 
  1545	002053	1 117323 4 7 1323 
  1546	002054	1 114026 4 6 0026 
  1547	002055	1 002162 0 1 0 162 		GOSUB	WAIT			;WAIT BEFORE SETTING LOOPEN OR CHAN MODE
  1548	002056	1 177231 7 7 2 11 11 
  1549	002057	1 002000 0 1 0 000 		LDBR	0			;CLEAR "CU RESET"
  1550	002060	1 064351 3 2 0 16 11 		MOVB	CUSTAT
  1551	002061	1 064071 3 2 0 03 11 		MOVB	TOR1			;CLEAR "CU RESET EN"
  1552	002062	1 117333 4 7 1333 		REPEAT	TST
  1553	002063	1 114026 4 6 0026 
  1554
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 13
MCOD2M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 1

  1555						TEST	166,TEST GENERATION OF "SLVE END XFER"
  1556					;***********************************************************************
  1557					;* MCODE2 * TEST 166 *    TEST GENERATION OF "SLVE END XFER"
  1558					;***********************************************************************
  1559						SALL
  1560	002064	1 002246 0 1 0 246 
  1561	002065	1 117320 4 7 1320 
  1562
  1563	002066				TST166:	SALL
  1564
  1565					;*TEST THAT "SLVE END XFER" SETS WHEN AND ONLY WHEN
  1566					;*"STA IN" AND "DX HIGH SPEED" ARE ASSERTED AND "DATA TO DEV" IS CLEARED.
  1567					;*LOOP ENABLE IS SET FOR THIS TEST.
  1568
  1569					;*CLEAR "DATA TO DEV".
  1570					;*SET "DIAG HIGH SPEED" AND "STA IN".
  1571					;*CHECK THAT "SLVE END XFER" IS ASSERTED.
  1572
  1573	002066	1 117203 4 7 1203 		JMPSUB	DEVRD			;SETUP DEVICE READ.
  1574	002067	1 002104 0 1 0 104 		LDBR	DIHISP+LOOPEN		;SET "DIAG HIGH SPEED" AND LOOP ENABLE.
  1575	002070	1 064031 3 2 0 01 11 		MOVB	CSR1
  1576	002071	1 002001 0 1 0 001 		LDBR	STAINL			;SET "STA IN"
  1577	002072	1 064051 3 2 0 02 11 		MOVB	TOR0
  1578	002073	1 117235 4 7 1235 		JMPSUB	RDSEX			;READ "SLVE END XFER" RIGHT ADJUSTED
  1579	002074	1 104076 4 2 0076 		JMPB0	.+2			;JUMP IF IT SET
  1580						ERROR	TST,"SLVE END XFER" DIDN'T SET,^_
  1581	002075	1 117331 4 7 1331 	DIAG SET "STA IN" AND "DX HIGH SPEED" AND CLEARED "DATA TO DEVICE"
  1582
  1583						ERLOOP	TST			^SALL
  1584	002076	1 002000 0 1 0 000 
  1585	002077	1 117323 4 7 1323 
  1586	002100	1 114066 4 6 0066 
  1587					;*CLEAR "STA IN".
  1588					;*CHECK THAT "SLVE END XFER" IS CLEARED.
  1589
  1590	002101	1 002000 0 1 0 000 	SEX1:	LDBR	0			;CLEAR "STA IN"
  1591	002102	1 064051 3 2 0 02 11 		MOVB	TOR0
  1592	002103	1 117235 4 7 1235 		JMPSUB	RDSEX			;READ "SLVE END XFER" RIGHT ADJUSTED
  1593	002104	1 104106 4 2 0106 		JMPB0	.+2			;JUMP IF IT SET
  1594	002105	1 100107 4 0 0107 		JMP	.+2			;ELSE, OKAY
  1595						ERROR	SEX1,"SLVE END XFER" DIDN'T CLEAR,^_
  1596	002106	1 117331 4 7 1331 	DIAG SET "DX HIGH SPEED" AND CLEARED "STA IN" AND "DATA TO DEVICE"
  1597
  1598						ERLOOP	SEX1			^SALL
  1599	002107	1 002001 0 1 0 001 
  1600	002110	1 117323 4 7 1323 
  1601	002111	1 114101 4 6 0101 
  1602					;*SET "STA IN" AND CLEAR "HIGH SPEED".
  1603					;*CHECK THAT "SLVE END XFER" IS CLEARED.
  1604
  1605	002112	1 002001 0 1 0 001 	SEX2:	LDBR	STAINL			;SET "STA IN"
  1606	002113	1 064051 3 2 0 02 11 		MOVB	TOR0
  1607	002114	1 002004 0 1 0 004 		LDBR	LOOPEN			;CLEAR "DX HIGH SPEED"
  1608	002115	1 064031 3 2 0 01 11 		MOVB	CSR1
  1609	002116	1 117235 4 7 1235 		JMPSUB	RDSEX			;READ "SLVE END XFER" RIGHT ADJUSTED
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 13-1
MCOD2M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 1

  1610	002117	1 104121 4 2 0121 		JMPB0	.+2			;JUMP IF IT SET
  1611	002120	1 100122 4 0 0122 		JMP	.+2			;ELSE, OKAY
  1612						ERROR	SEX2,"SLVE END XFER" DIDN'T CLEAR,^_
  1613	002121	1 117331 4 7 1331 	DIAG SET "STA IN" AND CLEARED "DX HIGH SPEED" AND "DATA TO DEVICE"
  1614
  1615						ERLOOP	SEX2			^SALL
  1616	002122	1 002002 0 1 0 002 
  1617	002123	1 117323 4 7 1323 
  1618	002124	1 114112 4 6 0112 
  1619					;*SET "HIGH SPEED" AND "DATA TO DEV".
  1620					;*CHECK THAT "SLVE END XFER" IS CLEARED.
  1621
  1622	002125	1 002104 0 1 0 104 	SEX3:	LDBR	DIHISP+LOOPEN		;SET "DX HIGH SPEED"
  1623	002126	1 064031 3 2 0 01 11 		MOVB	CSR1
  1624	002127	1 117212 4 7 1212 		JMPSUB	DEVWR			;SET "DATA TO DEVICE"
  1625	002130	1 117235 4 7 1235 		JMPSUB	RDSEX			;READ "SLVE END XFER" RIGHT ADJUSTED	
  1626	002131	1 104133 4 2 0133 		JMPB0	.+2			;JUMP IF IT SET
  1627	002132	1 100134 4 0 0134 		JMP	.+2			;ELSE, OKAY
  1628						ERROR	SEX3,"SLVE END XFER" DIDN'T CLEAR,^_
  1629	002133	1 117331 4 7 1331 	DIAG SET "STA IN" AND "DX HIGH SPEED" AND "DATA TO DEVICE"
  1630
  1631						ERLOOP	SEX3			^SALL
  1632	002134	1 002003 0 1 0 003 
  1633	002135	1 117323 4 7 1323 
  1634	002136	1 114125 4 6 0125 
  1635	002137	1 117333 4 7 1333 		REPEAT	TST
  1636	002140	1 114066 4 6 0066 
  1637
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 14
MCOD2M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 1

  1638						TEST	167,TEST "DIS IN" INTERRUPT
  1639					;***********************************************************************
  1640					;* MCODE2 * TEST 167 *    TEST "DIS IN" INTERRUPT
  1641					;***********************************************************************
  1642						SALL
  1643	002141	1 002247 0 1 0 247 
  1644	002142	1 117320 4 7 1320 
  1645
  1646	002143				TST167:	SALL
  1647
  1648					;*TEST THAT AN INTERRUPT OCCURS WHEN AND ONLY WHEN "DIS IN" IS
  1649					;*RECEIVED WITH CHANNEL MODE SET.
  1650					;*LOOP ENABLE IS SET FOR THIS TEST.
  1651
  1652					;*SET CHANNEL MODE AND "DIS IN".
  1653					;*CHECK FOR AN INTERRUPT.
  1654
  1655	002143	1 002002 0 1 0 002 		LDBR	CLRFLG			;CLEAR REG 0 INTERRUPT FLAGS
  1656	002144	1 064011 3 2 0 00 11 		MOVB	CSR0
  1657	002145	1 002005 0 1 0 005 		LDBR	LOOPEN+CHANL		;SET LOOP ENABLE AND CHANNEL MODE
  1658	002146	1 064031 3 2 0 01 11 		MOVB	CSR1
  1659	002147	1 002100 0 1 0 100 		LDBR	DISINL			;SET "DIS IN"
  1660	002150	1 064071 3 2 0 03 11 		MOVB	TOR1
  1661	002151	1 103152 4 1 1152 		JMPI	ZRTNH			;JMP IF INTERRUPT OCCURRED
  1662	002152	1 114154 4 6 0154 		JMPZ	.+2			;JMP IF TOOK INTERRUPT JMP
  1663	002153	1 117331 4 7 1331 		ERROR	TST,NO INTERRUPT OCCURRED WHEN "DIS IN" SET IN CHANNEL MODE
  1664
  1665						ERLOOP	TST			^SALL
  1666	002154	1 002000 0 1 0 000 
  1667	002155	1 117323 4 7 1323 
  1668	002156	1 114143 4 6 0143 
  1669					;*SET "OPL IN" AND "REQ IN" TO INSURE "CU RESET" INTERRUPT IS CLEARED.
  1670					;*CLEAR CHANNEL MODE.
  1671					;*CHECK THAT INTERRUPT GOES AWAY.
  1672
  1673	002157	1 002200 0 1 0 200 		LDBR	OPLINL			;SET "OPL IN"
  1674	002160	1 064051 3 2 0 02 11 		MOVB	TOR0
  1675	002161	1 002140 0 1 0 140 		LDBR	REQINL+DISINL		;SET "REQ IN"
  1676	002162	1 064071 3 2 0 03 11 		MOVB	TOR1
  1677	002163	1 002004 0 1 0 004 		LDBR	LOOPEN			;CLEAR CHANNEL MODE
  1678	002164	1 064031 3 2 0 01 11 		MOVB	CSR1
  1679	002165	1 103152 4 1 1152 		JMPI	ZRTNH			;JMP IF INTERRUPT STILL THERE
  1680	002166	1 114170 4 6 0170 		JMPZ	.+2			;JMP IF TOOK INTERRUPT JMP
  1681	002167	1 100171 4 0 0171 		JMP	.+2
  1682						ERROR	TST,INTERRUPT OCCURRED WHEN "DIS IN" SET WITH CHANNEL ^_
  1683	002170	1 117331 4 7 1331 	MODE CLEARED
  1684
  1685						ERLOOP	TST			^SALL
  1686	002171	1 002001 0 1 0 001 
  1687	002172	1 117323 4 7 1323 
  1688	002173	1 114143 4 6 0143 
  1689					;*SET CHANNEL MODE AND CLEAR "DIS IN"
  1690					;*CHECK THAT NO INTERRUPT OCCURS
  1691
  1692	002174	1 002000 0 1 0 000 	DIS1:	LDBR	0			;CLEAR "DIS IN"
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 14-1
MCOD2M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 1

  1693	002175	1 064071 3 2 0 03 11 		MOVB	TOR1
  1694	002176	1 002005 0 1 0 005 		LDBR	LOOPEN+CHANL		;SET CHANNEL MODE
  1695	002177	1 064031 3 2 0 01 11 		MOVB	CSR1
  1696	002200	1 103152 4 1 1152 		JMPI	ZRTNH			;JMP IF INTERRUPT OCCURRED
  1697	002201	1 114203 4 6 0203 		JMPZ	.+2			;JMP IF TOOK INTERRUPT JMP
  1698	002202	1 100204 4 0 0204 		JMP	.+2
  1699						ERROR	DIS1,INTERRUPT OCCURRED WITH CHANNEL MODE SET AND ^_
  1700	002203	1 117331 4 7 1331 	"DIS IN" CLEARED
  1701
  1702						ERLOOP	DIS1			^SALL
  1703	002204	1 002002 0 1 0 002 
  1704	002205	1 117323 4 7 1323 
  1705	002206	1 114174 4 6 0174 
  1706	002207	1 117333 4 7 1333 		REPEAT	TST
  1707	002210	1 114143 4 6 0143 
  1708
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 15
MCOD2M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 1

  1709						TEST	168,TEST CHANNEL MODE HIGH SPEED WRITE XFER
  1710					;***********************************************************************
  1711					;* MCODE2 * TEST 168 *    TEST CHANNEL MODE HIGH SPEED WRITE XFER
  1712					;***********************************************************************
  1713						SALL
  1714	002211	1 002250 0 1 0 250 
  1715	002212	1 117320 4 7 1320 
  1716
  1717	002213				TST168:	SALL
  1718
  1719					;*SIMULATE A HIGH SPEED, DEVICE WRITE TRANSFER IN THE CHANNEL MODE.
  1720					;*VERIFY THAT THE CORRECT SIGNALS ARE GENERATED AT THE APPROPRIATE TIMES.
  1721					;*LOOP ENABLE IS SET FOR THIS TEST.
  1722
  1723					;*SET "DATA TO DEVICE", "CHANNEL MODE", THEN "HIGH SPEED".
  1724					;*CHECK THAT "CU INIT" DID NOT GET SET.
  1725
  1726	002213	1 117153 4 7 1153 		JMPSUB	INITL			;DO A MICROBUS INIT
  1727	002214	1 002005 0 1 0 005 		LDBR	LOOPEN+CHANL		;SET LOOP ENABLE AND CHANNEL MODE
  1728	002215	1 064031 3 2 0 01 11 		MOVB	CSR1
  1729	002216	1 002105 0 1 0 105 		LDBR	DIHISP+LOOPEN+CHANL	;SET "HIGH SPEED"
  1730	002217	1 064031 3 2 0 01 11 		MOVB	CSR1
  1731	002220	1 002000 0 1 0 000 		LDBR	0			;LOAD ZEROS INTO BORLO
  1732	002221	1 064231 3 2 0 11 11 		MOVB	BORLO
  1733	002222	1 064151 3 2 0 06 11 		MOVB	CLKDRL			;CLOCK ONES INTO DRLO
  1734	002223	1 117212 4 7 1212 		JMPSUB	DEVWR			;SET DATA TO DEVICE
  1735	002224	1 117310 4 7 1310 		JMPSUB	DPINIT			;DO A DATA PATH INIT
  1736	002225	1 117265 4 7 1265 		JMPSUB	RDCUIN			;GO READ "CU INIT"
  1737	002226	1 104230 4 2 0230 		JMPB0	.+2			;JUMP IF IT SET, SHOULDN'T HAVE
  1738	002227	1 100231 4 0 0231 		JMP	.+2			;ELSE OKAY
  1739						ERROR	TST,"CU INIT" SET WHEN IT SHOULDN'T HAVE,^_
  1740	002230	1 117331 4 7 1331 	DIAG SET CHANNEL MODE THEN SET "HIGH SPEED"
  1741
  1742						ERLOOP	TST			^SALL
  1743	002231	1 002000 0 1 0 000 
  1744	002232	1 117323 4 7 1323 
  1745	002233	1 114213 4 6 0213 
  1746					;*SET "DAT IN".
  1747					;*CHECK THAT "ST DATA REQ", "DATA REQ DLY", AND "SLVE REQ" ARE SET.
  1748					;*CHECK THAT "DIS SLVE REQ", "DR READY", AND "TO DAT OUT" ARE NOT SET.
  1749
  1750	002234	1 002020 0 1 0 020 		LDBR	DATINL			;SET "DAT IN"
  1751	002235	1 064071 3 2 0 03 11 		MOVB	TOR1
  1752	002236	1 117273 4 7 1273 		JMPSUB	RDSDRQ			;READ "ST DATA REQ"
  1753	002237	1 104241 4 2 0241 		JMPB0	.+2			;JUMP IF IT SET.
  1754	002240	1 117331 4 7 1331 		ERROR	TST,"ST DATA REQ" DIDN'T SET WHEN "DAT IN" SET
  1755
  1756						ERLOOP	TST			^SALL
  1757	002241	1 002001 0 1 0 001 
  1758	002242	1 117323 4 7 1323 
  1759	002243	1 114213 4 6 0213 
  1760	002244	1 117262 4 7 1262 		JMPSUB	RDRDLY			;READ "NOT DATA REQ DLY"
  1761	002245	1 104247 4 2 0247 		JMPB0	.+2			;JUMP IF IT SET
  1762	002246	1 100250 4 0 0250 		JMP	.+2			;JUMP IF CLEARED
  1763	002247	1 117331 4 7 1331 		ERROR	TST,"DATA REQ DLY" DIDN'T SET WHEN "DAT IN" SET
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 15-1
MCOD2M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 1

  1764
  1765						ERLOOP	TST			^SALL
  1766	002250	1 002002 0 1 0 002 
  1767	002251	1 117323 4 7 1323 
  1768	002252	1 114213 4 6 0213 
  1769	002253	1 117276 4 7 1276 		JMPSUB	RDDSRQ			;READ "NOT DIS SLVE REQ"
  1770	002254	1 104256 4 2 0256 		JMPB0	.+2			;JUMP IF IT SET
  1771	002255	1 117331 4 7 1331 		ERROR	TST,"DIS SLVE REQ" SET WHEN "DAT IN" SET IN CHANNEL MODE
  1772
  1773						ERLOOP	TST			^SALL
  1774	002256	1 002003 0 1 0 003 
  1775	002257	1 117323 4 7 1323 
  1776	002260	1 114213 4 6 0213 
  1777	002261	1 117257 4 7 1257 		JMPSUB	RDSLRQ			;READ "SLVE REQ"
  1778	002262	1 104264 4 2 0264 		JMPB0	.+2			;JUMP IF SET
  1779						ERROR	TST,"SLVE REQ" DIDN'T SET WHEN "DAT IN" SET,^_
  1780	002263	1 117331 4 7 1331 	<"CHANNEL MODE", "HIGH SPEED" AND "DATA TO DEVICE" ARE SET>
  1781
  1782						ERLOOP	TST			^SALL
  1783	002264	1 002004 0 1 0 004 
  1784	002265	1 117323 4 7 1323 
  1785	002266	1 114213 4 6 0213 
  1786	002267	1 117254 4 7 1254 		JMPSUB	RDRRDY			;READ "DR READY"
  1787	002270	1 104272 4 2 0272 		JMPB0	.+2			;JUMP IF SET, SHOULDN'T BE
  1788	002271	1 100273 4 0 0273 		JMP	.+2			;ELSE, OKAY
  1789						ERROR	TST,"DR READY" SET BEFORE IT SHOULD HAVE,^_
  1790	002272	1 117331 4 7 1331 	DIAG SET "CHANNEL MODE" AND "HIGH SPEED" THEN SET "DAT IN"
  1791
  1792						ERLOOP	TST			^SALL
  1793	002273	1 002005 0 1 0 005 
  1794	002274	1 117323 4 7 1323 
  1795	002275	1 114213 4 6 0213 
  1796	002276	1 022003 1 1 0 00 03 		DATI	TOR1,BR			;READ REG 4
  1797	002277	1 014000 0 6 0 000 		SHR				;RIGHT ADJUST "TO DAT OUT"
  1798	002300	1 104302 4 2 0302 		JMPB0	.+2			;JUMP IF IT SET, SHOULDN'T HAVE
  1799	002301	1 100303 4 0 0303 		JMP	.+2			;ELSE, OKAY
  1800						ERROR	TST,"TO DAT OUT" SET BEFORE IT SHOULD HAVE,^_
  1801	002302	1 117331 4 7 1331 	DIAG SET "CHANNEL MODE" AND "HIGH SPEED" THEN SET "DAT IN"
  1802
  1803						ERLOOP	TST			^SALL
  1804	002303	1 002006 0 1 0 006 
  1805	002304	1 117323 4 7 1323 
  1806	002305	1 114213 4 6 0213 
  1807					;*SET "SLVE ACK".
  1808
  1809					;*CHECK THAT "SLVE REQ" AND "DIAG SLVE ACK" GET CLEARED.
  1810					;*CHECK THAT "DR READY" AND "TO DAT OUT" GET SET.
  1811					;*CHECK THAT THE DRLO REG GETS CLOCKED.
  1812					;*CHECK THAT "2ND BYTE" DOESN'T GET SET.
  1813
  1814	002306	1 002030 0 1 0 030 		LDBR	DATINL+DISACK		;SET "DIAG SLVE ACK"
  1815	002307	1 064071 3 2 0 03 11 		MOVB	TOR1
  1816	002310	1 117257 4 7 1257 		JMPSUB	RDSLRQ			;READ "SLVE REQ"
  1817	002311	1 104313 4 2 0313 		JMPB0	.+2			;JUMP IF IT DIDN'T CLEAR
  1818	002312	1 100314 4 0 0314 		JMP	.+2			;ELSE, OKAY
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 15-2
MCOD2M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 1

  1819						ERROR	TST,"SLVE REQ" DIDN'T CLEAR,^_
  1820	002313	1 117331 4 7 1331 	DIAG SET "SLVE REQ" THEN SET "DIAG SLVE ACK"
  1821
  1822						ERLOOP	TST			^SALL
  1823	002314	1 002007 0 1 0 007 
  1824	002315	1 117323 4 7 1323 
  1825	002316	1 114213 4 6 0213 
  1826	002317	1 117254 4 7 1254 		JMPSUB	RDRRDY			;READ "DR READY"
  1827	002320	1 104322 4 2 0322 		JMPB0	.+2			;JUMP IF IT SET
  1828						ERROR	TST,"DR READY" DID NOT SET,^_
  1829	002321	1 117331 4 7 1331 	DIAG SET "SLVE REQ" THEN "DIAG SLVE ACK" WITH "DATA TO DEV" SET
  1830
  1831						ERLOOP	TST			^SALL
  1832	002322	1 002010 0 1 0 010 
  1833	002323	1 117323 4 7 1323 
  1834	002324	1 114213 4 6 0213 
  1835	002325	1 022003 1 1 0 00 03 		DATI	TOR1,BR			;READ REG 3
  1836	002326	1 014000 0 6 0 000 		SHR				;RIGHT ADJ "TO DAT OUT" BIT
  1837	002327	1 104331 4 2 0331 		JMPB0	.+2			;JUMP IF IT SET
  1838						ERROR	TST,"TO DAT OUT" DID NOT SET,^_
  1839	002330	1 117331 4 7 1331 	DIAG SET "DAT IN" THEN SET "DR READY"
  1840
  1841						ERLOOP	TST			^SALL
  1842	002331	1 002011 0 1 0 011 
  1843	002332	1 117323 4 7 1323 
  1844	002333	1 114213 4 6 0213 
  1845	002334	1 010000 0 4 0 000 		LDMEM	0			;SET EXPECTED DATA
  1846	002335	1 032006 1 5 0 00 06 		DATI	DRLO,AC0		;READ DR
  1847	002336	1 114340 4 6 0340 		JMPZ	.+2			;JUMP IF ONES STILL THERE
  1848	002337	1 100341 4 0 0341 		JMP	.+2			;ELSE, IT GOT CLOCKED
  1849						ERRORM	TST,"DRLO" REG DID NOT GET CLOCKED,^_
  1850	002340	1 117331 4 7 1331 	DIAG SET AND CLEARED "SLVE REQ" WITH "DATA TO DEVICE" SET
  1851
  1852						ERLOOP	TST			^SALL
  1853	002341	1 002112 0 1 0 112 
  1854	002342	1 117326 4 7 1326 
  1855	002343	1 114213 4 6 0213 
  1856	002344	1 117251 4 7 1251 		JMPSUB	RD2BYT			;READ "2ND BYTE"
  1857	002345	1 104347 4 2 0347 		JMPB0	.+2			;JUMP IF IT SET, SHOULDN'T HAVE
  1858	002346	1 100350 4 0 0350 		JMP	.+2			;ELSE, OKAY
  1859						ERROR	TST,"2ND BYTE" SET WITH NO BUS EXTENSION BOARD,^_
  1860	002347	1 117331 4 7 1331 	DIAG SET "SLVE ACK DL75"
  1861
  1862						ERLOOP	TST			^SALL
  1863	002350	1 002013 0 1 0 013 
  1864	002351	1 117323 4 7 1323 
  1865	002352	1 114213 4 6 0213 
  1866	002353	1 032003 1 5 0 00 03 		DATI	TOR1,AC0		;READ REG 4
  1867	002354	1 062005 3 1 0 00 05 		SHL	AC0,BR			;MOVE "DIAG SLVE ACK" TO BIT 4
  1868	002355	1 106357 4 3 0357 		JMPB4	.+2			;JUMP IF IT DIDN'T CLEAR
  1869	002356	1 100360 4 0 0360 		JMP	.+2			;ELSE, OKAY
  1870						ERROR	TST,"DIAG SLVE ACK" DIDN'T CLEAR,^_
  1871	002357	1 117331 4 7 1331 	DIAG SET "SLVE REQ" THEN SET "DIAG SLVE ACK"
  1872
  1873						ERLOOP	TST			^SALL
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 15-3
MCOD2M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 1

  1874	002360	1 002014 0 1 0 014 
  1875	002361	1 117323 4 7 1323 
  1876	002362	1 114213 4 6 0213 
  1877					;*CLEAR "DAT IN".
  1878					;*CHECK THAT "ST DATA REQ", "DATA REQ DLY", "DR READY", AND "TO DAT OUT" GET CLEARED.
  1879					;*CHECK THAT "END XFER" AND "CU RUN" DON'T SET.
  1880
  1881	002363	1 002000 0 1 0 000 		LDBR	0			;CLEAR "DAT IN"
  1882	002364	1 064071 3 2 0 03 11 		MOVB	TOR1
  1883	002365	1 117273 4 7 1273 		JMPSUB	RDSDRQ			;READ "ST DATA REQ"
  1884	002366	1 104370 4 2 0370 		JMPB0	.+2			;JUMP IF DIDN'T CLEAR
  1885	002367	1 100371 4 0 0371 		JMP	.+2			;ELSE, OKAY
  1886						ERROR	TST,"ST DATA REQ" DIDN'T CLEAR,^_
  1887	002370	1 117331 4 7 1331 	DIAG SET AND CLEARED "DAT IN"
  1888
  1889						ERLOOP	TST			^SALL
  1890	002371	1 002015 0 1 0 015 
  1891	002372	1 117323 4 7 1323 
  1892	002373	1 114213 4 6 0213 
  1893	002374	1 117262 4 7 1262 		JMPSUB	RDRDLY			;READ "NOT DATA REQ DLY"
  1894	002375	1 104377 4 2 0377 		JMPB0	.+2			;JUMP IF DIDN'T CLEAR
  1895						ERROR	TST,"DATA REQ DLY" DIDN'T CLEAR,^_
  1896	002376	1 117331 4 7 1331 	DIAG SET "DATA REQ DLY" THEN CLEARED "ST DATA REQ"
  1897
  1898						ERLOOP	TST			^SALL
  1899	002377	1 002016 0 1 0 016 
  1900	002400	1 117323 4 7 1323 
  1901	002401	1 114213 4 6 0213 
  1902	002402	1 117254 4 7 1254 		JMPSUB	RDRRDY			;READ "DR READY"
  1903	002403	1 104405 4 2 0405 		JMPB0	.+2			;JUMP IF IT DIDN'T CLEAR
  1904	002404	1 100406 4 0 0406 		JMP	.+2			;ELSE, OKAY
  1905						ERROR	TST,"DR READY" DIDN'T CLEAR,^_
  1906	002405	1 117331 4 7 1331 	DIAG SET "DR READY" THEN CLEARED "DATA REQ DLY"
  1907
  1908						ERLOOP	TST			^SALL
  1909	002406	1 002017 0 1 0 017 
  1910	002407	1 117323 4 7 1323 
  1911	002410	1 114213 4 6 0213 
  1912	002411	1 022003 1 1 0 00 03 		DATI	TOR1,BR			;READ REG 4
  1913	002412	1 014000 0 6 0 000 		SHR				;RIGHT ADJUST "TO DAT OUT"
  1914	002413	1 104415 4 2 0415 		JMPB0	.+2			;JUMP IF IT DIDN'T CLEAR
  1915	002414	1 100416 4 0 0416 		JMP	.+2
  1916						ERROR	TST,"TO DAT OUT" DIDN'T CLEAR,^_
  1917	002415	1 117331 4 7 1331 	DIAG SET "TO DAT OUT" THEN CLEARED "DAT IN"
  1918
  1919						ERLOOP	TST			^SALL
  1920	002416	1 002020 0 1 0 020 
  1921	002417	1 117323 4 7 1323 
  1922	002420	1 114213 4 6 0213 
  1923	002421	1 022000 1 1 0 00 00 		DATI	CSR0,BR			;READ "END XFER"
  1924	002422	1 110424 4 4 0424 		JMPB7	.+2			;JUMP IF IT SET, SHOULDN'T HAVE
  1925	002423	1 100425 4 0 0425 		JMP	.+2			;ELSE, OKAY
  1926						ERROR	TST,"END XFER" SET WHEN IT SHOULDN'T HAVE,^_
  1927	002424	1 117331 4 7 1331 	DIAG CLEARED "DATA REQ DLY" WITH "SLVE END XFER" CLEARED
  1928
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 15-4
MCOD2M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 1

  1929						ERLOOP	TST			^SALL
  1930	002425	1 002021 0 1 0 021 
  1931	002426	1 117323 4 7 1323 
  1932	002427	1 114213 4 6 0213 
  1933	002430	1 002104 0 1 0 104 		LDBR	LOOPEN+DIHISP		;CLEAR CHANNEL MODE TO READ "CU RUN"
  1934	002431	1 064031 3 2 0 01 11 		MOVB	CSR1
  1935	002432	1 032005 1 5 0 00 05 		DATI	SPADR,AC0		;READ CU MODE BITS
  1936	002433	1 062005 3 1 0 00 05 		SHL	AC0,BR			;MOVE "CU RUN" TO BIT 4
  1937	002434	1 106436 4 3 0436 		JMPB4	.+2			;JUMP IF IT SET, SHOULDN'T HAVE
  1938	002435	1 100437 4 0 0437 		JMP	.+2			;ELSE, OKAY
  1939						ERROR	TST,"CU RUN" SET WHEN IT SHOULDN'T HAVE,^_
  1940	002436	1 117331 4 7 1331 	DIAG SET AND CLEAR "DATA REQ DLY" WITH "CU INIT" CLEARED
  1941
  1942						ERLOOP	TST			^SALL
  1943	002437	1 002022 0 1 0 022 
  1944	002440	1 117323 4 7 1323 
  1945	002441	1 114213 4 6 0213 
  1946	002442	1 117333 4 7 1333 		REPEAT	TST
  1947	002443	1 114213 4 6 0213 
  1948
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 16
MCOD2M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 1

  1949						TEST	169,TEST CHANNEL MODE HIGH SPEED READ XFER
  1950					;***********************************************************************
  1951					;* MCODE2 * TEST 169 *    TEST CHANNEL MODE HIGH SPEED READ XFER
  1952					;***********************************************************************
  1953						SALL
  1954	002444	1 002251 0 1 0 251 
  1955	002445	1 117320 4 7 1320 
  1956
  1957	002446				TST169:	SALL
  1958
  1959					;*SIMULATE A HIGH SPEED, DEVICE READ TRANSFER IN THE CHANNEL MODE.
  1960					;*VERIFY THAT THE CORRECT SIGNALS ARE GENERATED AT THE APPROPRIATE TIMES.
  1961					;*LOOP ENABLE IS SET FOR THIS TEST.
  1962
  1963					;*CLEAR "DATA TO DEVICE".
  1964					;*SET "CHANNEL MODE" THEN "HIGH SPEED".
  1965					;*SET "SRV IN".
  1966					;*CHECK THAT "ST DATA REQ" AND "SLVE REQ" ARE SET.
  1967					;*CHECK THAT "DR READY" AND "TO SRV OUT" ARE NOT SET AND THAT
  1968					;*DRLO REG IS NOT CLOCKED.
  1969
  1970	002446	1 117153 4 7 1153 		JMPSUB	INITL			;DO A MICROBUS INIT
  1971	002447	1 117203 4 7 1203 		JMPSUB	DEVRD			;CLEAR "DATA TO DEVICE"
  1972	002450	1 002005 0 1 0 005 		LDBR	LOOPEN+CHANL		;SET LOOP ENABLE AND CHANNEL MODE
  1973	002451	1 064031 3 2 0 01 11 		MOVB	CSR1
  1974	002452	1 002105 0 1 0 105 		LDBR	DIHISP+LOOPEN+CHANL	;SET "HIGH SPEED"
  1975	002453	1 064031 3 2 0 01 11 		MOVB	CSR1
  1976	002454	1 117212 4 7 1212 		JMPSUB	DEVWR			;SET DATA TO DEVICE
  1977	002455	1 117310 4 7 1310 		JMPSUB	DPINIT			;DO A DATA PATH INIT
  1978	002456	1 117203 4 7 1203 		JMPSUB	DEVRD			;CLEAR DATA TO DEVICE
  1979	002457	1 117175 4 7 1175 		JMPSUB	LOADDR			;GO LOAD DRLO WITH ZEROS
  1980	002460	1 002200 0 1 0 200 		LDBR	SRVINL			;SET "SRV IN"
  1981	002461	1 064071 3 2 0 03 11 		MOVB	TOR1
  1982	002462	1 117273 4 7 1273 		JMPSUB	RDSDRQ			;READ "ST DATA REQ"
  1983	002463	1 104465 4 2 0465 		JMPB0	.+2			;JUMP IF SET
  1984	002464	1 117331 4 7 1331 		ERROR	TST,"ST DATA REQ" DIDN'T SET WHEN "SRV IN" SET
  1985
  1986						ERLOOP	TST			^SALL
  1987	002465	1 002000 0 1 0 000 
  1988	002466	1 117323 4 7 1323 
  1989	002467	1 114446 4 6 0446 
  1990	002470	1 117257 4 7 1257 		JMPSUB	RDSLRQ			;READ "SLVE REQ"
  1991	002471	1 104473 4 2 0473 		JMPB0	.+2			;JUMP IF IT SET
  1992						ERROR	TST,"SLVE REQ" DIDN'T SET WHEN "SRV IN" SET,^_
  1993	002472	1 117331 4 7 1331 	"CHANNEL MODE" AND "HIGH SPEED" ARE SET AND "DATA TO DEVICE" IS CLEARED
  1994
  1995						ERLOOP	TST			^SALL
  1996	002473	1 002001 0 1 0 001 
  1997	002474	1 117323 4 7 1323 
  1998	002475	1 114446 4 6 0446 
  1999	002476	1 117254 4 7 1254 		JMPSUB	RDRRDY			;READ "DR READY"
  2000	002477	1 104501 4 2 0501 		JMPB0	.+2			;JUMP IF SET, SHOULDN'T BE
  2001	002500	1 100502 4 0 0502 		JMP	.+2			;ELSE, OKAY
  2002						ERROR	TST,"DR READY" SET BEFORE IT SHOULD HAVE,^_
  2003	002501	1 117331 4 7 1331 	DIAG SET "CHANNEL MODE" AND "HIGH SPEED" THEN SET "SRV IN"
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 16-1
MCOD2M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 1

  2004
  2005						ERLOOP	TST			^SALL
  2006	002502	1 002002 0 1 0 002 
  2007	002503	1 117323 4 7 1323 
  2008	002504	1 114446 4 6 0446 
  2009	002505	1 022003 1 1 0 00 03 		DATI	TOR1,BR			;READ "TO SRV OUT"
  2010	002506	1 104510 4 2 0510 		JMPB0	.+2			;JUMP IF IT SET, SHOULDN'T HAVE
  2011	002507	1 100511 4 0 0511 		JMP	.+2			;ELSE, OKAY
  2012						ERROR	TST,"TO SRV OUT" SET WITH "DR READY" CLEARED,^_
  2013	002510	1 117331 4 7 1331 	DIAG SET "SRV IN"
  2014
  2015						ERLOOP	TST			^SALL
  2016	002511	1 002003 0 1 0 003 
  2017	002512	1 117323 4 7 1323 
  2018	002513	1 114446 4 6 0446 
  2019	002514	1 010377 0 4 0 377 		LDMEM	-1			;SET EXPECTED DATA
  2020	002515	1 032006 1 5 0 00 06 		DATI	DRLO,AC0		;READ DR REG
  2021	002516	1 114520 4 6 0520 		JMPZ	.+2			;JUMP IF DRLO CLOCKED
  2022						ERRORM	TST,"DRLO" REG DIDN'T GET CLOCKED,^_
  2023	002517	1 117331 4 7 1331 	DIAG SET "SRV IN" WITH "DATA TO DEV" CLEARED
  2024
  2025						ERLOOP	TST			^SALL
  2026	002520	1 002104 0 1 0 104 
  2027	002521	1 117326 4 7 1326 
  2028	002522	1 114446 4 6 0446 
  2029					;*SET "DIAG SLVE ACK".
  2030					;*CHECK THAT "DR READY" AND "TO SRV OUT" ARE SET.
  2031
  2032	002523	1 002210 0 1 0 210 		LDBR	DISACK+SRVINL		;SET "DIAG SLVE ACK"
  2033	002524	1 064071 3 2 0 03 11 		MOVB	TOR1
  2034	002525	1 117254 4 7 1254 		JMPSUB	RDRRDY			;READ "DR READY"
  2035	002526	1 104530 4 2 0530 		JMPB0	.+2			;JUMP IF SET
  2036						ERROR	TST,"DR READY" DIDN'T SET,^_
  2037					<DIAG SET "SLVE REQ" THEN "DIAG SLVE ACK" WITH
  2038	002527	1 117331 4 7 1331 	"DATA TO DEV" CLEARED>
  2039
  2040						ERLOOP	TST			^SALL
  2041	002530	1 002005 0 1 0 005 
  2042	002531	1 117323 4 7 1323 
  2043	002532	1 114446 4 6 0446 
  2044	002533	1 022003 1 1 0 00 03 		DATI	TOR1,BR			;READ "TO SRV OUT"
  2045	002534	1 104536 4 2 0536 		JMPB0	.+2			;JUMP IF SET
  2046						ERROR	TST,"TO SRV OUT" DIDN'T SET,^_
  2047	002535	1 117331 4 7 1331 	DIAG SET "SRV IN" THEN SET "DR READY"
  2048
  2049						ERLOOP	TST			^SALL
  2050	002536	1 002006 0 1 0 006 
  2051	002537	1 117323 4 7 1323 
  2052	002540	1 114446 4 6 0446 
  2053					;*CLEAR "SRV IN".
  2054					;*CHECK THAT "ST DATA REQ" AND "TO SRV OUT" CLEAR.
  2055
  2056	002541	1 002000 0 1 0 000 		LDBR	0			;CLEAR "SRV IN"
  2057	002542	1 064071 3 2 0 03 11 		MOVB	TOR1
  2058	002543	1 117273 4 7 1273 		JMPSUB	RDSDRQ			;READ "ST DATA REQ"
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 16-2
MCOD2M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 1

  2059	002544	1 104546 4 2 0546 		JMPB0	.+2			;JUMP IF IT DIDN'T CLEAR
  2060	002545	1 100547 4 0 0547 		JMP	.+2			;ELSE, OKAY
  2061						ERROR	TST,"ST DATA REQ" DIDN'T CLEAR,^_
  2062	002546	1 117331 4 7 1331 	DIAG SET AND CLEARED "SRV IN"
  2063
  2064						ERLOOP	TST			^SALL
  2065	002547	1 002007 0 1 0 007 
  2066	002550	1 117323 4 7 1323 
  2067	002551	1 114446 4 6 0446 
  2068	002552	1 022003 1 1 0 00 03 		DATI	TOR1,BR
  2069	002553	1 104555 4 2 0555 		JMPB0	.+2
  2070	002554	1 100556 4 0 0556 		JMP	.+2
  2071						ERROR	TST,"TO SRV OUT" DIDN'T CLEAR,^_
  2072	002555	1 117331 4 7 1331 	DIAG SET "TO SRV OUT" THEN CLEARED "SRV IN"
  2073
  2074						ERLOOP	TST			^SALL
  2075	002556	1 002010 0 1 0 010 
  2076	002557	1 117323 4 7 1323 
  2077	002560	1 114446 4 6 0446 
  2078	002561	1 117333 4 7 1333 		REPEAT	TST
  2079	002562	1 114446 4 6 0446 
  2080
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 17
MCOD2M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 1

  2081						TEST	170,TEST CHANNEL MODE HIGH SPEED XFER TERMINATION
  2082					;***********************************************************************
  2083					;* MCODE2 * TEST 170 *    TEST CHANNEL MODE HIGH SPEED XFER TERMINATION
  2084					;***********************************************************************
  2085						SALL
  2086	002563	1 002252 0 1 0 252 
  2087	002564	1 117320 4 7 1320 
  2088
  2089	002565				TST170:	SALL
  2090
  2091					;*SIMULATE THE TERMINATION OF A HIGH SPEED, DEVICE READ XFER IN CHANNEL MODE.
  2092					;*VERIFY THAT THE CORRECT SIGNALS ARE GENERATED AT THE APPROPRIATE TIMES.
  2093					;*LOOP ENABLE IS SET FOR THIS TEST.
  2094
  2095					;*CLEAR "DATA TO DEVICE", SET "CHANNEL MODE" THEN "HIGH SPEED".
  2096					;*SET "DAT IN".
  2097					;*SET "STA IN" TO SET "SLVE END XFER".
  2098					;*SET "DIAG SLVE ACK".
  2099					;*CLR "DAT IN" TO CLEAR "DATA REQ DLY".
  2100					;*CHECK THAT "END XFER" IS SET.
  2101
  2102	002565	1 117153 4 7 1153 		JMPSUB	INITL			;DO A MICROBUS INIT
  2103	002566	1 117203 4 7 1203 		JMPSUB	DEVRD			;CLEAR "DATA TO DEVICE"
  2104	002567	1 002005 0 1 0 005 		LDBR	LOOPEN+CHANL		;SET LOOP ENABLE AND CHANNEL MODE
  2105	002570	1 064031 3 2 0 01 11 		MOVB	CSR1
  2106	002571	1 002105 0 1 0 105 		LDBR	LOOPEN+DIHISP+CHANL	;SET "HIGH SPEED"
  2107	002572	1 064031 3 2 0 01 11 		MOVB	CSR1
  2108	002573	1 117212 4 7 1212 		JMPSUB	DEVWR			;SET DATA TO DEVICE
  2109	002574	1 117310 4 7 1310 		JMPSUB	DPINIT			;DO A DATA PATH INIT
  2110	002575	1 117203 4 7 1203 		JMPSUB	DEVRD			;CLEAR DATA TO DEVICE
  2111	002576	1 002020 0 1 0 020 		LDBR	DATINL			;SET "DAT IN"
  2112	002577	1 064071 3 2 0 03 11 		MOVB	TOR1
  2113	002600	1 002001 0 1 0 001 		LDBR	STAINL			;SET "STA IN" TO SET "SLVE END XFER"
  2114	002601	1 064051 3 2 0 02 11 		MOVB	TOR0
  2115	002602	1 002000 0 1 0 000 		LDBR	0			;CLEAR "DAT IN"
  2116	002603	1 064071 3 2 0 03 11 		MOVB	TOR1
  2117	002604	1 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  2118	002605	1 022000 1 1 0 00 00 		DATI	CSR0,BR			;READ "END XFER"
  2119	002606	1 110610 4 4 0610 		JMPB7	.+2			;JUMP IF IT SET, SHOULD HAVE
  2120						ERROR	TST,"END XFER" DIDN'T SET,^_
  2121	002607	1 117331 4 7 1331 	DIAG CLEARED "DATA REQ DLY" WITH "SLVE END XFER" SET
  2122
  2123						ERLOOP	TST			^SALL
  2124	002610	1 002000 0 1 0 000 
  2125	002611	1 117323 4 7 1323 
  2126	002612	1 114565 4 6 0565 
  2127					;*SET "DAT IN".
  2128					;*CHECK THAT "SLVE REQ" DOES NOT SET AND "DR READY" DOES SET.
  2129
  2130	002613	1 002020 0 1 0 020 		LDBR	DATINL			;SET "DAT IN"
  2131	002614	1 064071 3 2 0 03 11 		MOVB	TOR1
  2132	002615	1 117257 4 7 1257 		JMPSUB	RDSLRQ			;READ "SLVE REQ"
  2133	002616	1 104620 4 2 0620 		JMPB0	.+2			;JUMP IF SET, SHOULDN'T BE
  2134	002617	1 100621 4 0 0621 		JMP	.+2			;ELSE, OKAY
  2135	002620	1 117331 4 7 1331 		ERROR	TST,"SLVE REQ" SET WITH "SLVE END XFER" SET
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 17-1
MCOD2M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 1

  2136
  2137						ERLOOP	TST			^SALL
  2138	002621	1 002001 0 1 0 001 
  2139	002622	1 117323 4 7 1323 
  2140	002623	1 114565 4 6 0565 
  2141	002624	1 117254 4 7 1254 		JMPSUB	RDRRDY			;READ "DR READY"
  2142	002625	1 104627 4 2 0627 		JMPB0	.+2			;JUMP IF SET, SHOULD BE
  2143						ERROR	TST,"DR READY" DIDN'T SET,^_
  2144	002626	1 117331 4 7 1331 	DIAG SET "DAT IN" WITH "END XFER" SET
  2145
  2146						ERLOOP	TST			^SALL
  2147	002627	1 002002 0 1 0 002 
  2148	002630	1 117323 4 7 1323 
  2149	002631	1 114565 4 6 0565 
  2150					;*CLEAR "DX HIGH SPEED"
  2151					;*CHECK THAT "END XFER" IS CLEARED.
  2152
  2153	002632	1 002005 0 1 0 005 		LDBR	LOOPEN+CHANL		;CLEAR "HIGH SPEED"
  2154	002633	1 064031 3 2 0 01 11 		MOVB	CSR1
  2155	002634	1 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  2156	002635	1 022000 1 1 0 00 00 		DATI	CSR0,BR			;READ "END XFER"
  2157	002636	1 110640 4 4 0640 		JMPB7	.+2			;JUMP IF STILL SET
  2158	002637	1 100641 4 0 0641 		JMP	.+2			;ELSE, OKAY
  2159	002640	1 117331 4 7 1331 		ERROR	TST,"END XFER" DIDN'T CLEAR WHEN "HIGH SPEED" CLEARED
  2160
  2161						ERLOOP	TST			^SALL
  2162	002641	1 002003 0 1 0 003 
  2163	002642	1 117323 4 7 1323 
  2164	002643	1 114565 4 6 0565 
  2165					;*TEST THAT "END XFER" TOGGLES.
  2166					;*CLEAR "DATA TO DEVICE", SET "CHANNEL MODE" THEN "HIGH SPEED".
  2167					;*SET "DAT IN".
  2168					;*SET "STA IN" TO SET "SLVE END XFER".
  2169					;*SET "DIAG SLVE ACK".
  2170					;*CLR "DAT IN" TO CLEAR "DATA REQ DLY" AND SET "END XFER".
  2171					;*SET AND CLEAR "DAT IN" TO CLOCK "END XFER" AGAIN.
  2172					;*CHECK THAT "END XFER" IS CLEARED.
  2173
  2174	002644	1 117153 4 7 1153 	EXFER1:	JMPSUB	INITL			;DO A MICROBUS INIT
  2175	002645	1 117203 4 7 1203 		JMPSUB	DEVRD			;CLEAR "DATA TO DEVICE"
  2176	002646	1 002005 0 1 0 005 		LDBR	LOOPEN+CHANL		;SET LOOP ENABLE AND CHANNEL MODE
  2177	002647	1 064031 3 2 0 01 11 		MOVB	CSR1
  2178	002650	1 002105 0 1 0 105 		LDBR	LOOPEN+DIHISP+CHANL	;SET "HIGH SPEED"
  2179	002651	1 064031 3 2 0 01 11 		MOVB	CSR1
  2180	002652	1 117212 4 7 1212 		JMPSUB	DEVWR			;SET DATA TO DEVICE
  2181	002653	1 117310 4 7 1310 		JMPSUB	DPINIT			;DO A DATA PATH INIT
  2182	002654	1 117203 4 7 1203 		JMPSUB	DEVRD			;CLEAR DATA TO DEVICE
  2183	002655	1 002020 0 1 0 020 		LDBR	DATINL			;SET "DAT IN"
  2184	002656	1 064071 3 2 0 03 11 		MOVB	TOR1
  2185	002657	1 002001 0 1 0 001 		LDBR	STAINL			;SET "STA IN" TO SET "SLVE END XFER"
  2186	002660	1 064051 3 2 0 02 11 		MOVB	TOR0
  2187	002661	1 002000 0 1 0 000 		LDBR	0			;CLEAR "DAT IN"
  2188	002662	1 064071 3 2 0 03 11 		MOVB	TOR1
  2189	002663	1 002020 0 1 0 020 		LDBR	DATINL			;SET "DAT IN"
  2190	002664	1 064071 3 2 0 03 11 		MOVB	TOR1
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 17-2
MCOD2M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 1

  2191	002665	1 002000 0 1 0 000 		LDBR	0			;CLEAR "DAT IN"
  2192	002666	1 064071 3 2 0 03 11 		MOVB	TOR1
  2193	002667	1 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  2194	002670	1 022000 1 1 0 00 00 		DATI	CSR0,BR			;READ "END XFER"
  2195	002671	1 110673 4 4 0673 		JMPB7	.+2			;JUMP IF STILL SET
  2196	002672	1 100674 4 0 0674 		JMP	.+2			;ELSE, OKAY
  2197						ERROR	EXFER1,"END XFER" DIDN'T CLEAR,^_
  2198	002673	1 117331 4 7 1331 	DIAG SET "END XFER" THEN TOGGLED "DATA REQ DLY"
  2199
  2200						ERLOOP	EXFER1			^SALL
  2201	002674	1 002004 0 1 0 004 
  2202	002675	1 117323 4 7 1323 
  2203	002676	1 114644 4 6 0644 
  2204	002677	1 117333 4 7 1333 		REPEAT	TST
  2205	002700	1 114565 4 6 0565 
  2206
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 18
MCOD2M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 1

  2207						TEST	171,TEST OVERLAPPING "SRV IN" AND "DAT IN"
  2208					;***********************************************************************
  2209					;* MCODE2 * TEST 171 *    TEST OVERLAPPING "SRV IN" AND "DAT IN"
  2210					;***********************************************************************
  2211						SALL
  2212	002701	1 002253 0 1 0 253 
  2213	002702	1 117320 4 7 1320 
  2214
  2215	002703				TST171:	SALL
  2216
  2217					;*SIMULATE THE RECEPTION OF "DAT IN" WITH "SRV IN" ALREADY SET AND VICE-VERSA.
  2218					;*CHECK THAT THESE CONDITIONS ARE PROCESSED CORRECTLY, I.E., THE SECOND SIGNAL RECEIVED
  2219					;*IS NOT PROCESSED UNTIL THE FIRST ONE CLEARS.
  2220					;*LOOP ENABLE IS SET FOR THIS TEST.
  2221
  2222					;*SET "CHANNEL MODE" AND "HIGH SPEED".
  2223					;*SET "SRV IN".
  2224					;*SET "DIAG SLVE ACK".
  2225					;*SET "DAT IN".
  2226					;*CHECK THAT "TO DAT OUT" IS NOT SET.
  2227
  2228	002703	1 117153 4 7 1153 		JMPSUB	INITL			;DO A MICROBUS INIT
  2229	002704	1 002005 0 1 0 005 		LDBR	LOOPEN+CHANL		;SET LOOP ENABLE AND CHANNEL MODE.
  2230	002705	1 064031 3 2 0 01 11 		MOVB	CSR1
  2231	002706	1 002105 0 1 0 105 		LDBR	LOOPEN+CHANL+DIHISP	;SET "HIGH SPEED"
  2232	002707	1 064031 3 2 0 01 11 		MOVB	CSR1
  2233	002710	1 117212 4 7 1212 		JMPSUB	DEVWR			;SET DATA TO DEVICE
  2234	002711	1 117310 4 7 1310 		JMPSUB	DPINIT			;DO A DATA PATH INIT
  2235	002712	1 117203 4 7 1203 		JMPSUB	DEVRD			;CLEAR DATA TO DEVICE
  2236	002713	1 002200 0 1 0 200 		LDBR	SRVINL			;SET "SRV IN"
  2237	002714	1 064071 3 2 0 03 11 		MOVB	TOR1
  2238	002715	1 002210 0 1 0 210 		LDBR	DISACK+SRVINL		;SET "DIAG SLVE ACK"
  2239	002716	1 064071 3 2 0 03 11 		MOVB	TOR1
  2240	002717	1 002220 0 1 0 220 		LDBR	DATINL+SRVINL		;SET "DAT IN"
  2241	002720	1 064071 3 2 0 03 11 		MOVB	TOR1
  2242	002721	1 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  2243	002722	1 022003 1 1 0 00 03 		DATI	TOR1,BR			;READ "TO DAT OUT"
  2244	002723	1 014000 0 6 0 000 		SHR				;RIGHT ADJUST IT
  2245	002724	1 104726 4 2 0726 		JMPB0	.+2			;JUMP IF SET TOO SOON
  2246	002725	1 100727 4 0 0727 		JMP	.+2			;ELSE, OKAY
  2247						ERROR	TST,"TO DAT OUT" SET TOO SOON,^_
  2248	002726	1 117331 4 7 1331 	<DIAG SET "SRV IN", "DIAG SLVE ACK", THEN "DAT IN">
  2249
  2250						ERLOOP	TST			^SALL
  2251	002727	1 002000 0 1 0 000 
  2252	002730	1 117323 4 7 1323 
  2253	002731	1 114703 4 6 0703 
  2254					;*CLEAR "SRV IN".
  2255					;*CHECK THAT "ST DATA REQ" IS SET.
  2256
  2257	002732	1 002020 0 1 0 020 		LDBR	DATINL			;CLEAR "SRV IN"
  2258	002733	1 064071 3 2 0 03 11 		MOVB	TOR1
  2259	002734	1 117273 4 7 1273 		JMPSUB	RDSDRQ			;READ "ST DATA REQ"
  2260	002735	1 104737 4 2 0737 		JMPB0	.+2			;JUMP IF SET
  2261						ERROR	TST,"ST DATA REQ" DIDN'T SET,^_
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 18-1
MCOD2M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 1

  2262	002736	1 117331 4 7 1331 	DIAG SET "TO SRV OUT" THEN SET "DAT IN" AND CLEARED "SRV IN"
  2263
  2264						ERLOOP	TST			^SALL
  2265	002737	1 002001 0 1 0 001 
  2266	002740	1 117323 4 7 1323 
  2267	002741	1 114703 4 6 0703 
  2268					;*SET "DIAG SLVE ACK".
  2269					;*CHECK THAT "TO DAT OUT" IS SET.
  2270
  2271	002742	1 002030 0 1 0 030 		LDBR	DATINL+DISACK		;SET "DIAG SLVE ACK"
  2272	002743	1 064071 3 2 0 03 11 		MOVB	TOR1
  2273	002744	1 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  2274	002745	1 022003 1 1 0 00 03 		DATI	TOR1,BR			;READ "TO DAT OUT"
  2275	002746	1 014000 0 6 0 000 		SHR				;RIGHT ADJUST IT
  2276	002747	1 104751 4 2 0751 		JMPB0	.+2			;JUMP IF SET
  2277						ERROR	TST,"TO DAT OUT" DIDN'T SET,^_
  2278					<DIAG SET "TO SRV OUT", SET "DAT IN", CLEARED "SRV IN" THEN
  2279	002750	1 117331 4 7 1331 	SET "DIAG SLVE ACK">
  2280
  2281						ERLOOP	TST			^SALL
  2282	002751	1 002002 0 1 0 002 
  2283	002752	1 117323 4 7 1323 
  2284	002753	1 114703 4 6 0703 
  2285					;*SET "SRV IN".
  2286					;*CHECK THAT "TO SRV OUT" DOES NOT SET.
  2287
  2288	002754	1 002220 0 1 0 220 		LDBR	SRVINL+DATINL		;SET "SRV IN"
  2289	002755	1 064071 3 2 0 03 11 		MOVB	TOR1
  2290	002756	1 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  2291	002757	1 022003 1 1 0 00 03 		DATI	TOR1,BR			;READ "TO SRV OUT"
  2292	002760	1 104762 4 2 0762 		JMPB0	.+2			;JUMP IF IT SET, SHOULDN'T HAVE
  2293	002761	1 100763 4 0 0763 		JMP	.+2			;ELSE, OKAY
  2294						ERROR	TST,"TO SRV OUT" SET TOO SOON,^_
  2295	002762	1 117331 4 7 1331 	DIAG SET "TO DAT OUT" THEN SET "SRV IN"
  2296
  2297						ERLOOP	TST			^SALL
  2298	002763	1 002003 0 1 0 003 
  2299	002764	1 117323 4 7 1323 
  2300	002765	1 114703 4 6 0703 
  2301					;*CLEAR "DAT IN".
  2302					;*CHECK THAT "ST DATA REQ" IS SET.
  2303
  2304	002766	1 002200 0 1 0 200 		LDBR	SRVINL			;CLEAR "DAT IN"
  2305	002767	1 064071 3 2 0 03 11 		MOVB	TOR1
  2306	002770	1 117273 4 7 1273 		JMPSUB	RDSDRQ			;READ "ST DATA REQ"
  2307	002771	1 104773 4 2 0773 		JMPB0	.+2			;JUMP IF SET OKAY
  2308						ERROR	TST,"ST DATA REQ" DID NOT SET,^_
  2309	002772	1 117331 4 7 1331 	DIAG SET "TO DAT OUT" THEN SET "SRV IN" AND CLEARED "DAT IN"
  2310
  2311						ERLOOP	TST			^SALL
  2312	002773	1 002004 0 1 0 004 
  2313	002774	1 117323 4 7 1323 
  2314	002775	1 114703 4 6 0703 
  2315					;*SET "DIAG SLVE ACK".
  2316					;*CHECK THAT "TO SRV OUT" IS SET.
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 18-2
MCOD2M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 1

  2317
  2318	002776	1 002210 0 1 0 210 		LDBR	DISACK+SRVINL		;SET "DIAG SLVE ACK"
  2319	002777	1 064071 3 2 0 03 11 		MOVB	TOR1
  2320	003000	1 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  2321	003001	1 022003 1 1 0 00 03 		DATI	TOR1,BR			;READ "TO SRV OUT"
  2322	003002	1 105004 4 2 1004 		JMPB0	.+2			;JUMP IF SET, SHOULD BE
  2323						ERROR	TST,"TO SRV OUT" DIDN'T SET,^_
  2324					<DIAG SET "TO DAT OUT", SET "SRV IN", CLEARED "DAT IN" THEN
  2325	003003	1 117331 4 7 1331 	SET "DIAG SLVE ACK">
  2326
  2327						ERLOOP	TST			^SALL
  2328	003004	1 002005 0 1 0 005 
  2329	003005	1 117323 4 7 1323 
  2330	003006	1 114703 4 6 0703 
  2331					;*CLEAR "SRV IN".
  2332					;*CHECK THAT "ST DATA REQ" IS CLEARED.
  2333
  2334	003007	1 002000 0 1 0 000 		LDBR	0			;CLEAR "SRV IN"
  2335	003010	1 064071 3 2 0 03 11 		MOVB	TOR1
  2336	003011	1 117273 4 7 1273 		JMPSUB	RDSDRQ			;READ "ST DATA REQ"
  2337	003012	1 105014 4 2 1014 		JMPB0	.+2			;JUMP IF SET, SHOULDN'T BE
  2338	003013	1 101015 4 0 1015 		JMP	.+2			;ELSE, OKAY
  2339						ERROR	TST,"ST DATA REQ" DIDN'T CLEAR,^_
  2340					<DIAG SET AND CLEARED "TO DAT OUT" THEN SET "TO SRV OUT" AND
  2341	003014	1 117331 4 7 1331 	CLEARED "SRV IN">
  2342
  2343						ERLOOP	TST			^SALL
  2344	003015	1 002006 0 1 0 006 
  2345	003016	1 117323 4 7 1323 
  2346	003017	1 114703 4 6 0703 
  2347	003020	1 117333 4 7 1333 		REPEAT	TST
  2348	003021	1 114703 4 6 0703 
  2349
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 19
MCOD2M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 1

  2350						TEST	172,TEST CHANNEL MODE XFER WITH SCRATCH PAD ENABLED
  2351					;***********************************************************************
  2352					;* MCODE2 * TEST 172 *    TEST CHANNEL MODE XFER WITH SCRATCH PAD ENABLED
  2353					;***********************************************************************
  2354						SALL
  2355	003022	1 002254 0 1 0 254 
  2356	003023	1 117320 4 7 1320 
  2357
  2358	003024				TST172:	SALL
  2359
  2360					;*SIMULATE A CHANNEL MODE WRITE XFER WITH THE SCRATCH PAD ENABLED.
  2361					;*CHECK THAT THE CORRECT SIGNALS ARE GENERATED AT THE APPROPRIATE TIMES.
  2362					;*LOOP ENABLE IS SET FOR THIS TEST.
  2363
  2364					;*SET "DATA TO DEVICE", "CHANNEL MODE" AND "SP EN".
  2365					;*CHECK THAT "DR READY" IS NOT SET.
  2366
  2367	003024	1 117153 4 7 1153 		JMPSUB	INITL			;DO A MICROBUS INIT
  2368	003025	1 117212 4 7 1212 		JMPSUB	DEVWR			;SET "DATA TO DEVICE"
  2369	003026	1 002004 0 1 0 004 		LDBR	LOOPEN			;SET LOOP ENABLE
  2370	003027	1 064031 3 2 0 01 11 		MOVB	CSR1
  2371	003030	1 002205 0 1 0 205 		LDBR	LOOPEN+SPEN+CHANL	;SET LOOP AND SP ENABLE AND
  2372	003031	1 064031 3 2 0 01 11 		MOVB	CSR1			;CHANNEL MODE
  2373	003032	1 117310 4 7 1310 		JMPSUB	DPINIT			;DO A DATA PATH INIT
  2374	003033	1 117254 4 7 1254 		JMPSUB	RDRRDY			;READ "DR READY"
  2375	003034	1 105036 4 2 1036 		JMPB0	.+2			;JUMP IF IT SET TOO SOON
  2376	003035	1 101037 4 0 1037 		JMP	.+2			;ELSE, OKAY
  2377	003036	1 117331 4 7 1331 		ERROR	TST,"DR READY" SET WHEN DIAG SET "SP EN"
  2378
  2379						ERLOOP	TST			^SALL
  2380	003037	1 002000 0 1 0 000 
  2381	003040	1 117323 4 7 1323 
  2382	003041	1 115024 4 6 1024 
  2383					;*SET "SRV IN".
  2384					;*CHECK THAT "DATA REQ DLY" AND "DR READY" GET SET AND
  2385					;*THAT "SLVE REQ" DOES NOT SET.
  2386
  2387	003042	1 002200 0 1 0 200 		LDBR	SRVINL			;SET "SRV IN"
  2388	003043	1 064071 3 2 0 03 11 		MOVB	TOR1
  2389	003044	1 117262 4 7 1262 		JMPSUB	RDRDLY			;READ "NOT DATA REQ DLY"
  2390	003045	1 105047 4 2 1047 		JMPB0	.+2			;JUMP IF IT SET
  2391	003046	1 101050 4 0 1050 		JMP	.+2			;JUMP IF CLEARED
  2392						ERROR	TST,"DATA REQ DLY" DIDN'T SET,^_
  2393	003047	1 117331 4 7 1331 	DIAG SET "SRV IN" WITH "CHANNEL MODE" AND "SP EN" SET
  2394
  2395						ERLOOP	TST			^SALL
  2396	003050	1 002001 0 1 0 001 
  2397	003051	1 117323 4 7 1323 
  2398	003052	1 115024 4 6 1024 
  2399	003053	1 117254 4 7 1254 		JMPSUB	RDRRDY			;READ "DR READY"
  2400	003054	1 105056 4 2 1056 		JMPB0	.+2			;JUMP IF SET, SHOULD BE
  2401						ERROR	TST,"DR READY" DIDN'T SET,^_
  2402	003055	1 117331 4 7 1331 	DIAG SET "SRV IN" WITH "CHANNEL MODE" AND "SP EN" SET
  2403
  2404						ERLOOP	TST			^SALL
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 19-1
MCOD2M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 1

  2405	003056	1 002002 0 1 0 002 
  2406	003057	1 117323 4 7 1323 
  2407	003060	1 115024 4 6 1024 
  2408	003061	1 117257 4 7 1257 		JMPSUB	RDSLRQ			;READ "SLVE REQ"
  2409	003062	1 105064 4 2 1064 		JMPB0	.+2			;JUMP IF SET, SHOULDN'T BE
  2410	003063	1 101065 4 0 1065 		JMP	.+2			;ELSE, OKAY
  2411						ERROR	TST,"SLVE REQ" SET WHEN IT SHOULDN'T HAVE,^_
  2412	003064	1 117331 4 7 1331 	DIAG SET "SRV IN" WITH "HIGH SPEED" CLEARED
  2413
  2414						ERLOOP	TST			^SALL
  2415	003065	1 002003 0 1 0 003 
  2416	003066	1 117323 4 7 1323 
  2417	003067	1 115024 4 6 1024 
  2418	003070	1 117333 4 7 1333 		REPEAT	TST
  2419	003071	1 115024 4 6 1024 
  2420
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 20
MCOD2M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 1

  2421						TEST	173,TEST INHIBITING "DATA REQ"
  2422					;***********************************************************************
  2423					;* MCODE2 * TEST 173 *    TEST INHIBITING "DATA REQ"
  2424					;***********************************************************************
  2425						SALL
  2426	003072	1 002255 0 1 0 255 
  2427	003073	1 117320 4 7 1320 
  2428
  2429	003074				TST173:	SALL
  2430
  2431					;*TEST THAT "DATA REQ" DOES NOT GET GENERATED IF
  2432					;*	(1) "HIGH SPEED" AND "SP EN" ARE BOTH CLEARED, OR
  2433					;*	(2) "CHANNEL MODE" IS CLEARED AND "SLVE END XFER" IS SET
  2434					;*LOOP ENABLE IS SET FOR THIS TEST.
  2435
  2436					;*SET CHANNEL MODE.
  2437					;*SET "SRV IN".
  2438					;*CHECK THAT "DATA REQ DLY" DOES NOT SET.
  2439
  2440	003074	1 117153 4 7 1153 		JMPSUB	INITL			;DO A MICROBUS INIT
  2441	003075	1 002005 0 1 0 005 		LDBR	LOOPEN+CHANL		;SET LOOP ENABLE AND CHANNEL MODE
  2442	003076	1 064031 3 2 0 01 11 		MOVB	CSR1
  2443	003077	1 002200 0 1 0 200 		LDBR	SRVINL			;SET "SRV IN"
  2444	003100	1 064071 3 2 0 03 11 		MOVB	TOR1
  2445	003101	1 117262 4 7 1262 		JMPSUB	RDRDLY			;READ "NOT DATA REQ DLY"
  2446	003102	1 105104 4 2 1104 		JMPB0	.+2			;JUMP IF SET, SHOULD BE
  2447						ERROR	TST,"DATA REQ DLY" SET WHEN IT SHOULDN'T HAVE,^_
  2448	003103	1 117331 4 7 1331 	DIAG SET "SRV IN" WITH "HIGH SPEED" AND "SP EN" CLEARED
  2449
  2450						ERLOOP	TST			^SALL
  2451	003104	1 002000 0 1 0 000 
  2452	003105	1 117323 4 7 1323 
  2453	003106	1 115074 4 6 1074 
  2454					;*CLEAR "SRV IN".
  2455					;*SET "SLVE END XFER" BY SETTING "HIGH SPEED" AND "STA IN", AND CLEARING
  2456					;*"DATA TO DEVICE".
  2457					;*CLEAR "CHANNEL MODE".
  2458					;*SET "SRV IN".
  2459					;*CHECK THAT "DATA REQ DLY" DOES NOT SET.
  2460
  2461	003107	1 002000 0 1 0 000 	DREQ1:	LDBR	0			;CLEAR "SRV IN"
  2462	003110	1 064071 3 2 0 03 11 		MOVB	TOR1
  2463	003111	1 002105 0 1 0 105 		LDBR	LOOPEN+DIHISP+CHANL	;SET "HIGH SPEED"
  2464	003112	1 064031 3 2 0 01 11 		MOVB	CSR1
  2465	003113	1 002001 0 1 0 001 		LDBR	STAINL			;SET "STA IN"
  2466	003114	1 064051 3 2 0 02 11 		MOVB	TOR0
  2467	003115	1 117203 4 7 1203 		JMPSUB	DEVRD			;CLEAR "DATA TO DEVICE"
  2468	003116	1 002104 0 1 0 104 		LDBR	LOOPEN+DIHISP		;CLEAR "CHANNEL MODE"
  2469	003117	1 064031 3 2 0 01 11 		MOVB	CSR1
  2470	003120	1 002200 0 1 0 200 		LDBR	SRVINL			;SET "SRV IN"
  2471	003121	1 064071 3 2 0 03 11 		MOVB	TOR1
  2472	003122	1 117262 4 7 1262 		JMPSUB	RDRDLY			;READ "NOT DATA REQ DLY"
  2473	003123	1 105125 4 2 1125 		JMPB0	.+2			;JUMP IF SET, SHOULD BE
  2474						ERROR	DREQ1,"DATA REQ DLY" SET WHEN IT SHOULDN'T HAVE,^_
  2475	003124	1 117331 4 7 1331 	DIAG SET "SRV IN" WITH "SLVE END XFER" SET AND "CHANNEL MODE" CLEARED
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 20-1
MCOD2M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 1

  2476
  2477						ERLOOP	DREQ1			^SALL
  2478	003125	1 002001 0 1 0 001 
  2479	003126	1 117323 4 7 1323 
  2480	003127	1 115107 4 6 1107 
  2481	003130	1 117333 4 7 1333 		REPEAT	TST
  2482	003131	1 115074 4 6 1074 
  2483
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 21
MCOD2M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 1

  2484						TEST	174,TEST "SLVE ACK" PROPAGATION
  2485					;***********************************************************************
  2486					;* MCODE2 * TEST 174 *    TEST "SLVE ACK" PROPAGATION
  2487					;***********************************************************************
  2488						SALL
  2489	003132	1 002256 0 1 0 256 
  2490	003133	1 117320 4 7 1320 
  2491
  2492	003134				TST174:	SALL
  2493
  2494					;*SET "DIAG SLVE ACK" WITH "SLVE REQ" CLEARED.
  2495					;*SLVE ACK SHOULD NOT PROPAGATE AND "DIAG SLVE ACK" SHOULD REMAIN SET
  2496
  2497	003134	1 117153 4 7 1153 		JMPSUB	INITL			;CLEAR "SLVE REQ"
  2498	003135	1 002010 0 1 0 010 		LDBR	DISACK			;SET "DIAG SLVE ACK"
  2499	003136	1 064071 3 2 0 03 11 		MOVB	TOR1
  2500	003137	1 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  2501	003140	1 032003 1 5 0 00 03 		DATI	TOR1,AC0		;READ BACK "DIAG SLVE ACK"
  2502	003141	1 062005 3 1 0 00 05 		SHL	AC0,BR			;MOVE IT TO BIT 4
  2503	003142	1 107144 4 3 1144 		JMPB4	.+2			;JUMP IF STILL SET, OKAY
  2504						ERROR	TST,"DIAG SLVE ACK" GOT CLEARED,^_
  2505	003143	1 117331 4 7 1331 	DIAG CLEARED "SLVE REQ" THEN SET "DIAG SLVE ACK"
  2506
  2507						ERLOOP	TST			^SALL
  2508	003144	1 002000 0 1 0 000 
  2509	003145	1 117323 4 7 1323 
  2510	003146	1 115134 4 6 1134 
  2511	003147	1 117333 4 7 1333 		REPEAT	TST
  2512	003150	1 115134 4 6 1134 
  2513
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 22
MCOD2M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 1

  2514	003151	1 101316 4 0 1316 		JMP	END			;JUMP AROUND SUBROUTINES
  2515
  2516	003152	1 016377 0 7 0 377 	ZRTNH:	RETURN	-1
  2517
  2518	003153	1 002233 0 1 0 233 	INITL:	LDBR	INIT+33			;SET INIT
  2519	003154	1 066371 3 3 0 17 11 		MOVB	IOSEL
  2520	003155	1 002033 0 1 0 033 		LDBR	33			;CLR INIT & SELECT CB
  2521	003156	1 066371 3 3 0 17 11 		MOVB	IOSEL
  2522	003157	1 001000 0 0 2 000 		LDMAR	0			;PUT MEMORY ADDRESS TO 0
  2523	003160	1 010000 0 4 0 000 		LDMEM	0			;CLR MEMORY LOC. 0
  2524	003161	1 016000 0 7 0 000 		RETURN
  2525
  2526					;"WAIT" IS USED TO WAIT APPROX 20 MS.  IT CONSISTS OF AN INNER WAIT LOOP
  2527					;OF APPROX 960 NSEC AND AN OUTER LOOP OF APPROX 200 USEC.
  2528	003162	1 002144 0 1 0 144 	WAIT:	LDBR	^D100			;SET OUTER LOOP WAIT COUNT
  2529	003163	1 072011 3 5 0 00 11 		MOVB	AC0
  2530	003164	1 002317 0 1 0 317 	WAITO:	LDBR	^D207			;SET INNER LOOP WAIT COUNT
  2531	003165	1 072031 3 5 0 01 11 		MOVB	AC1
  2532	003166	1 072027 3 5 0 01 07 	WAITI:	DECR	AC1			;DEC INNER LOOP COUNT
  2533	003167	1 115171 4 6 1171 		JMPZ	.+2			;JUMP IF INNER LOOP TIMED OUT
  2534	003170	1 101166 4 0 1166 		JMP	WAITI			;ELSE, CONTINUE
  2535	003171	1 072007 3 5 0 00 07 		DECR	AC0			;DEC OUTER LOOP COUNT
  2536	003172	1 115174 4 6 1174 		JMPZ	.+2			;JUMP IF OUTER LOOP TIMED OUT
  2537	003173	1 101164 4 0 1164 		JMP	WAITO			;ELSE CONTINUE
  2538	003174	1 016000 0 7 0 000 		RETURN
  2539
  2540	003175	1 002377 0 1 0 377 	LOADDR:	LDBR	-1			;LOAD ONES INTO BORLO
  2541	003176	1 064231 3 2 0 11 11 		MOVB	BORLO
  2542	003177	1 064151 3 2 0 06 11 		MOVB	CLKDRL			;LOAD ZEROS INTO DRLO
  2543	003200	1 002000 0 1 0 000 		LDBR	0			;LOAD ZEROS INTO BORLO
  2544	003201	1 064231 3 2 0 11 11 		MOVB	BORLO
  2545	003202	1 016000 0 7 0 000 		RETURN
  2546
  2547
  2548	003203	1 002011 0 1 0 011 	DEVRD:	LDBR	11			;SELECT MASSBUS INTERFACE
  2549	003204	1 066371 3 3 0 17 11 		MOVB	IOSEL
  2550	003205	1 002000 0 1 0 000 		LDBR	0			;SETUP FOR A DEVICE READ
  2551	003206	1 064031 3 2 0 01 11 		MOVB	MPSCR1
  2552	003207	1 002033 0 1 0 033 		LDBR	33			;SELECT CHANNEL BUS INTERFACE
  2553	003210	1 066371 3 3 0 17 11 		MOVB	IOSEL
  2554	003211	1 016000 0 7 0 000 		RETURN
  2555
  2556	003212	1 002011 0 1 0 011 	DEVWR:	LDBR	11			;SELECT MASSBUS INTERFACE
  2557	003213	1 066371 3 3 0 17 11 		MOVB	IOSEL
  2558	003214	1 002010 0 1 0 010 		LDBR	DTD			;SETUP FOR A DEVICE WRITE
  2559	003215	1 064031 3 2 0 01 11 		MOVB	MPSCR1
  2560	003216	1 002033 0 1 0 033 		LDBR	33			;SELECT CHANNEL BUS INTERFACE
  2561	003217	1 066371 3 3 0 17 11 		MOVB	IOSEL
  2562	003220	1 016000 0 7 0 000 		RETURN
  2563
  2564	003221	1 002011 0 1 0 011 	SETPNT:	LDBR	11			;SELECT MASSBUS INTERFACE
  2565	003222	1 066371 3 3 0 17 11 		MOVB	IOSEL
  2566	003223	1 044351 2 2 0 16 11 		MOVMEM	MPGP6			;STORE ADDITIONAL PNT ROUTINE NUMBER
  2567	003224	1 002033 0 1 0 033 		LDBR	33			;SELECT CHANNEL BUS INTERFACE
  2568	003225	1 066371 3 3 0 17 11 		MOVB	IOSEL
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 22-1
MCOD2M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 1

  2569	003226	1 016000 0 7 0 000 		RETURN
  2570
  2571	003227	1 002000 0 1 0 000 	RDBRP0:	LDBR	0			;SET "BOR P0" INDEX
  2572	003230	1 064131 3 2 0 05 11 		MOVB	SPADR
  2573	003231	1 101304 4 0 1304 		JMP	RDIT
  2574
  2575	003232	1 002002 0 1 0 002 	RDB0OD:	LDBR	2			;SET "BUS0 ODD PAR" INDEX
  2576	003233	1 064131 3 2 0 05 11 		MOVB	SPADR
  2577	003234	1 101304 4 0 1304 		JMP	RDIT
  2578
  2579	003235	1 002003 0 1 0 003 	RDSEX:	LDBR	3			;SET "SLVE END XFER" INDEX
  2580	003236	1 064131 3 2 0 05 11 		MOVB	SPADR
  2581	003237	1 101304 4 0 1304 		JMP	RDIT
  2582
  2583	003240	1 002004 0 1 0 004 	RDTSFF:	LDBR	4			;SET "TRA SEL FF" INDEX
  2584	003241	1 064131 3 2 0 05 11 		MOVB	SPADR
  2585	003242	1 101304 4 0 1304 		JMP	RDIT
  2586
  2587	003243	1 002005 0 1 0 005 	RDAMK1:	LDBR	5			;SET "ALLOW MK 1 OUT" INDEX
  2588	003244	1 064131 3 2 0 05 11 		MOVB	SPADR
  2589	003245	1 101304 4 0 1304 		JMP	RDIT
  2590
  2591	003246	1 002006 0 1 0 006 	RDODDE:	LDBR	6			;SET "ODD END" INDEX
  2592	003247	1 064131 3 2 0 05 11 		MOVB	SPADR
  2593	003250	1 101304 4 0 1304 		JMP	RDIT
  2594
  2595	003251	1 002007 0 1 0 007 	RD2BYT:	LDBR	7			;SET "2ND BYTE" INDEX
  2596	003252	1 064131 3 2 0 05 11 		MOVB	SPADR
  2597	003253	1 101304 4 0 1304 		JMP	RDIT
  2598
  2599	003254	1 002010 0 1 0 010 	RDRRDY:	LDBR	10			;SET "DR READY" INDEX
  2600	003255	1 064131 3 2 0 05 11 		MOVB	SPADR
  2601	003256	1 101304 4 0 1304 		JMP	RDIT
  2602
  2603	003257	1 002011 0 1 0 011 	RDSLRQ:	LDBR	11			;SET "SLVE REQ" INDEX
  2604	003260	1 064131 3 2 0 05 11 		MOVB	SPADR
  2605	003261	1 101304 4 0 1304 		JMP	RDIT
  2606
  2607	003262	1 002012 0 1 0 012 	RDRDLY:	LDBR	12			;SET "DATA RDY DLY" INDEX
  2608	003263	1 064131 3 2 0 05 11 		MOVB	SPADR
  2609	003264	1 101304 4 0 1304 		JMP	RDIT
  2610
  2611	003265	1 002013 0 1 0 013 	RDCUIN:	LDBR	13			;SET "CU INIT" INDEX
  2612	003266	1 064131 3 2 0 05 11 		MOVB	SPADR
  2613	003267	1 101304 4 0 1304 		JMP	RDIT
  2614
  2615	003270	1 002014 0 1 0 014 	RDENSD:	LDBR	14			;SET "EN SRV/DAT OUT" INDEX
  2616	003271	1 064131 3 2 0 05 11 		MOVB	SPADR
  2617	003272	1 101304 4 0 1304 		JMP	RDIT
  2618
  2619	003273	1 002015 0 1 0 015 	RDSDRQ:	LDBR	15			;SET "ST DATA REQ" INDEX
  2620	003274	1 064131 3 2 0 05 11 		MOVB	SPADR
  2621	003275	1 101304 4 0 1304 		JMP	RDIT
  2622
  2623	003276	1 002016 0 1 0 016 	RDDSRQ:	LDBR	16			;SET "NOT DIS SLVE REQ" INDEX
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 22-2
MCOD2M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 1

  2624	003277	1 064131 3 2 0 05 11 		MOVB	SPADR
  2625	003300	1 101304 4 0 1304 		JMP	RDIT
  2626
  2627	003301	1 002017 0 1 0 017 	RDDPPE:	LDBR	17			;SET "DP PE" INDEX
  2628	003302	1 064131 3 2 0 05 11 		MOVB	SPADR
  2629	003303	1 101304 4 0 1304 		JMP	RDIT
  2630
  2631	003304	1 022003 1 1 0 00 03 	RDIT:	DATI	TOR1,BR			;READ REG 3
  2632	003305	1 014000 0 6 0 000 		SHR				;RIGHT ADJUST DIAG MUX BIT
  2633	003306	1 014000 0 6 0 000 		SHR
  2634	003307	1 016000 0 7 0 000 		RETURN
  2635
  2636	003310	1 002022 0 1 0 022 	DPINIT:	LDBR	22			;SELECT DATA PATH
  2637	003311	1 066371 3 3 0 17 11 		MOVB	IOSEL
  2638	003312	1 064271 3 2 0 13 11 		MOVB	HSDPIN			;DO A HS DP INIT
  2639	003313	1 002033 0 1 0 033 		LDBR	33			;SELECT CHANNEL BUS INTERFACE
  2640	003314	1 066371 3 3 0 17 11 		MOVB	IOSEL
  2641	003315	1 016000 0 7 0 000 		RETURN
  2642
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 23
MCOD2M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 1

  2643	003316	1 002176 0 1 0 176 	END:	.ECRAM
  2644	003317	1 160211 7 0 0 10 11 
  2645	003320	1 072131 3 5 0 05 11 
  2646	003321	1 002044 0 1 0 044 
  2647	003322	1 160211 7 0 0 10 11 
  2648	003323	1 072131 3 5 0 05 11 
  2649	003324	1 002142 0 1 0 142 
  2650	003325	1 160211 7 0 0 10 11 
  2651	003326	1 072131 3 5 0 05 11 
  2652	003327	1 002146 0 1 0 146 
  2653	003330	1 160211 7 0 0 10 11 
  2654	003331	1 002104 0 1 0 104 
  2655	003332	1 160211 7 0 0 10 11 
  2656	003333	1 002173 0 1 0 173 
  2657	003334	1 160211 7 0 0 10 11 
  2658	003335	777777	777777		.MEM
  2659	000000	000000	000000			0
  2660	000001	777777	777777		PATS:	-1
  2661	000002	000000	000000			0
  2662	000003	000000	000376		FLTZ:	376
  2663	000004	000000	000375			375
  2664	000005	000000	000373			373
  2665	000006	000000	000367			367
  2666	000007	000000	000357			357
  2667	000010	000000	000337			337
  2668	000011	000000	000277			277
  2669	000012	000000	000177			177
  2670	000013	000000	000001		FLTO:	1
  2671	000014	000000	000002			2
  2672	000015	000000	000004			4
  2673	000016	000000	000010			10
  2674	000017	000000	000020			20
  2675	000020	000000	000040			40
  2676	000021	000000	000100			100
  2677	000022	000000	000200			200
  2678	000023	000000	000374		FLTZA:	374
  2679	000024	000000	000371			371
  2680	000025	000000	000365			365
  2681	000026	000000	000355			355
  2682	000027	000000	000335			335
  2683	000030	000000	000235			235
  2684	000031	000000	000135			135
  2685	000032	000000	000001			1
  2686	000033	000000	000004			4
  2687	000034	000000	000010			10
  2688	000035	000000	000020			20
  2689	000036	000000	000040			40
  2690	000037	000000	000100			100
  2691	000040	000000	000200			200
  2692	000041	000000	000332		FLTZB:	332
  2693	000042	000000	000331			331
  2694	000043	000000	000323			323
  2695	000044	000000	000313			313
  2696	000045	000000	000233			233
  2697	000046	000000	000133			133
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 23-1
MCOD2M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 1

  2698	000047	000000	000001			1
  2699	000050	000000	000002			2
  2700	000051	000000	000010			10
  2701	000052	000000	000020			20
  2702	000053	000000	000100			100
  2703	000054	000000	000200			200
  2704	000055	000000	000340		FLTZC:	340
  2705	000056	000000	000320			320
  2706	000057	000000	000260			260
  2707	000060	000000	000160			160
  2708	000061	000000	000020			20
  2709	000062	000000	000040			40
  2710	000063	000000	000100			100
  2711	000064	000000	000200			200
  2712	000065	000000	000360		FLTZD:	360
  2713	000066	000000	000350			350
  2714	000067	000000	000330			330
  2715	000070	000000	000270			270
  2716	000071	000000	000170			170
  2717	000072	000000	000010			10
  2718	000073	000000	000020			20
  2719	000074	000000	000040			40
  2720	000075	000000	000100			100
  2721	000076	000000	000200			200
  2722	000077	000000	000016		FLTZE:	16
  2723	000100	000000	000015			15
  2724	000101	000000	000013			13
  2725	000102	000000	000007			7
  2726	000103	000000	000001			1
  2727	000104	000000	000002			2
  2728	000105	000000	000004			4
  2729	000106	000000	000010			10
  2730	000107	000000	000334		FLTZF:	334
  2731	000110	000000	000332			332
  2732	000111	000000	000326			326
  2733	000112	000000	000316			316
  2734	000113	000000	000236			236
  2735	000114	000000	000136			136
  2736	000115	000000	000002			2
  2737	000116	000000	000004			4
  2738	000117	000000	000010			10
  2739	000120	000000	000020			20
  2740	000121	000000	000100			100
  2741	000122	000000	000200			200
  2742	000123	000000	000006		FLTZG:	6
  2743	000124	000000	000005			5
  2744	000125	000000	000003			3
  2745	000126	000000	000001			1
  2746	000127	000000	000002			2
  2747	000130	000000	000004			4
  2748	000131	000000	000011		EPATS:	11
  2749	000132	000000	000102			102
  2750	000133	000000	000220			220
  2751	000134	000000	000366			366
  2752	000135	000000	000044		OPATS:	44
MCODE2 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 1  VERSION 0.	MACRO %53B(1252) 15:29  6-Mar-89 Page 23-2
MCOD2M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 1

  2753	000136	000000	000157			157
  2754	000137	000000	000275			275
  2755	000140	000000	000333			333
  2756	000141	000000	000000		RAMADR:	0
  2757	000142	000000	000001			1
  2758	000143	000000	000002			2
  2759	000144	000000	000004			4
  2760	000145	000000	000010			10
  2761	000146	777777	777777			-1
  2762					.END
  2763
  2764						END

NO ERRORS DETECTED

PROGRAM BREAK IS 000000
ABSOLUTE BREAK IS 003505
CPU TIME USED 02:05.961

25P CORE USED

AC0	   616	   686	   705	   735	   736	   749	   750	   763	   764	   780	   781	   856	   857	   871
	   872	   913	   914	   928	   929	   942	   943	   956	   957	   973	   974	  1009	  1011	  1012
	  1025	  1026	  1027	  1040	  1042	  1043	  1059	  1061	  1062	  1103	  1104	  1119	  1120	  1138
	  1139	  1178	  1180	  1181	  1196	  1197	  1198	  1216	  1218	  1219	  1257	  1259	  1260	  1273
	  1274	  1275	  1290	  1292	  1293	  1331	  1332	  1347	  1348	  1368	  1369	  1390	  1391	  1435
	  1436	  1487	  1846	  1866	  1867	  1935	  1936	  2020	  2501	  2502	  2529	  2535
AC1	   614	   777	   790	   970	   983	  1056	  1071	  1134	  1148	  1212	  1228	  1287	  1302	  1361
	  1378	  1427	  1445	  2531	  2532
AC2	  1364	  1365	  1430	  1431
AC4	   544	   549
AC5	   512	   514	   516	   522	   556	   557	   559	   578	   580	   585	   589	   594	   597	   600
	   605	   611	   618	  2645	  2648	  2651
AC6	   525	   529	   539	   636
AC7	   497	   532	   533	   566	   571	   575	   579	   592	   595
ADRIN	   132#
ADRINL	   162#
ADROUT	   110#
ATA	   208#	   558	   584	   596	   647
BEGEND	   642#	  2643
BEGIN	   482#	   650
BORHI	    66#
BORLO	    62#	  1329	  1345	  1366	  1388	  1432	  1482	  1732	  2541	  2544
BUS0PE	    86#
BUS1PE	    85#
C	   265#
CATAB	   631	  1496	  1531	  1546	  1586	  1601	  1618	  1634	  1668	  1688	  1705	  1745	  1759	  1768
	  1776	  1785	  1795	  1806	  1825	  1834	  1844	  1855	  1865	  1876	  1892	  1901	  1911	  1922
	  1932	  1945	  1989	  1998	  2008	  2018	  2028	  2043	  2052	  2067	  2077	  2126	  2140	  2149
	  2164	  2203	  2253	  2267	  2284	  2300	  2314	  2330	  2346	  2382	  2398	  2407	  2417	  2453
	  2480	  2510
CBIHI	    64#
CBILO	    60#	   690	  1331	  1347	  1368	  1390
CHANL	   103#	  1253	  1657	  1694	  1727	  1729	  1972	  1974	  2104	  2106	  2153	  2176	  2178	  2229
	  2231	  2371	  2441	  2463
CHKLOP	   619#
CHKLP	   620#
CLKDRL	    72#	  1433	  1483	  1485	  1733	  2542
CLKOUT	   108#
CLRFLG	    91#	   688	  1655
CLRGO	   201#	   515
CLSLRQ	    71#
CMDF0	   491	   507#
CMDOUT	   114#
CMPERR	   202#
CORF	   700#	   702	   739#	   741	   753#	   755	   768#	   770	   785#	   787	   816#	   818	   847#	   849
	   862#	   864	   875#	   877	   885#	   887	   901#	   903	   918#	   920	   932#	   934	   946#	   948
	   961#	   963	   978#	   980	  1015#	  1017	  1030#	  1032	  1047#	  1049	  1066#	  1068	  1108#	  1110
	  1124#	  1126	  1143#	  1145	  1185#	  1187	  1202#	  1204	  1223#	  1225	  1263#	  1265	  1278#	  1280
	  1297#	  1299	  1336#	  1338	  1352#	  1354	  1373#	  1375	  1395#	  1397	  1440#	  1442	  1492#	  1494
	  1527#	  1529	  1542#	  1544	  1582#	  1584	  1597#	  1599	  1614#	  1616	  1630#	  1632	  1664#	  1666
	  1684#	  1686	  1701#	  1703	  1741#	  1743	  1755#	  1757	  1764#	  1766	  1772#	  1774	  1781#	  1783
	  1791#	  1793	  1802#	  1804	  1821#	  1823	  1830#	  1832	  1840#	  1842	  1851#	  1853	  1861#	  1863
	  1872#	  1874	  1888#	  1890	  1897#	  1899	  1907#	  1909	  1918#	  1920	  1928#	  1930	  1941#	  1943
	  1985#	  1987	  1994#	  1996	  2004#	  2006	  2014#	  2016	  2024#	  2026	  2039#	  2041	  2048#	  2050
	  2063#	  2065	  2073#	  2075	  2122#	  2124	  2136#	  2138	  2145#	  2147	  2160#	  2162	  2199#	  2201
	  2249#	  2251	  2263#	  2265	  2280#	  2282	  2296#	  2298	  2310#	  2312	  2326#	  2328	  2342#	  2344
	  2378#	  2380	  2394#	  2396	  2403#	  2405	  2413#	  2415	  2449#	  2451	  2476#	  2478	  2506#	  2508
CSLVSL	    92#
CSR0	    52#	   689	   696	   856	   871	   913	  1656	  1923	  2118	  2156	  2194
CSR1	    53#	   734	   735	   748	   749	   763	   779	   780	  1099	  1174	  1254	  1327	  1386	  1425
	  1480	  1522	  1523	  1536	  1537	  1575	  1608	  1623	  1658	  1678	  1695	  1728	  1730	  1934
	  1973	  1975	  2105	  2107	  2154	  2177	  2179	  2230	  2232	  2370	  2372	  2442	  2464	  2469
CUADRS	   295	   382	  1462	  1492	  1496	  1498	  1507	  1527	  1531	  1542	  1546	  1553	  1562	  1582
	  1586	  1597	  1601	  1614	  1618	  1630	  1634	  1636	  1645	  1664	  1668	  1684	  1688	  1701
	  1705	  1707	  1716	  1741	  1745	  1755	  1759	  1764	  1768	  1772	  1776	  1781	  1785	  1791
	  1795	  1802	  1806	  1821	  1825	  1830	  1834	  1840	  1844	  1851	  1855	  1861	  1865	  1872
	  1876	  1888	  1892	  1897	  1901	  1907	  1911	  1918	  1922	  1928	  1932	  1941	  1945	  1947
	  1956	  1985	  1989	  1994	  1998	  2004	  2008	  2014	  2018	  2024	  2028	  2039	  2043	  2048
	  2052	  2063	  2067	  2073	  2077	  2079	  2088	  2122	  2126	  2136	  2140	  2145	  2149	  2160
	  2164	  2199	  2203	  2205	  2214	  2249	  2253	  2263	  2267	  2280	  2284	  2296	  2300	  2310
	  2314	  2326	  2330	  2342	  2346	  2348	  2357	  2378	  2382	  2394	  2398	  2403	  2407	  2413
	  2417	  2419	  2428	  2449	  2453	  2476	  2480	  2482	  2491	  2506	  2510	  2512
CURSEN	   119#	  1519
CUSTAT	    67#	  1518	  1550
DATIN	   143#
DATINL	   172#	  1750	  1814	  2111	  2130	  2183	  2189	  2240	  2257	  2271	  2288
DATOUT	   121#
DB	   234#
DBEVEN	   237#
DBPAR	   235#
DBPARE	   236#
DEVRD	  1422	  1477	  1573	  1971	  1978	  2103	  2110	  2175	  2182	  2235	  2467	  2548#
DEVWR	  1484	  1624	  1734	  1976	  2108	  2180	  2233	  2368	  2556#
DIHISP	    97#	  1574	  1622	  1729	  1933	  1974	  2106	  2178	  2231	  2463	  2468
DIMUX	   123#
DIS1	  1692#	  1705
DISACK	   122#	  1814	  2032	  2238	  2271	  2318	  2498
DISIN	   141#
DISINL	   170#	  1659	  1675
DONE	   198#
DPINIT	  1735	  1977	  2109	  2181	  2234	  2373	  2636#
DPPE	    82#
DREQ1	  2461#	  2480
DRHI	    63#
DRLO	    59#	  1435	  1487	  1846	  2020
DTD	   204#	   513	   558	  2558
EBL	   199#
EDIT	     2#	     2	   480
ELOOPC	   621	   626#
END	  2514	  2643#
EPATS	  2748#
ERLP	   600#	   700	   816	   847	   862	   875	   885	   901	   918	  1495	  1527	  1530	  1542	  1545
	  1582	  1585	  1597	  1600	  1614	  1617	  1630	  1633	  1664	  1667	  1684	  1687	  1701	  1704
	  1741	  1744	  1755	  1758	  1764	  1767	  1772	  1775	  1781	  1784	  1791	  1794	  1802	  1805
	  1821	  1824	  1830	  1833	  1840	  1843	  1854	  1861	  1864	  1872	  1875	  1888	  1891	  1897
	  1900	  1907	  1910	  1918	  1921	  1928	  1931	  1941	  1944	  1985	  1988	  1994	  1997	  2004
	  2007	  2014	  2017	  2027	  2039	  2042	  2048	  2051	  2063	  2066	  2073	  2076	  2122	  2125
	  2136	  2139	  2145	  2148	  2160	  2163	  2199	  2202	  2249	  2252	  2263	  2266	  2280	  2283
	  2296	  2299	  2310	  2313	  2326	  2329	  2342	  2345	  2378	  2381	  2394	  2397	  2403	  2406
	  2413	  2416	  2449	  2452	  2476	  2479	  2506	  2509
ERLP0	   601#	  2649
ERLPA	   611#	  1496	  1531	  1546	  1586	  1601	  1618	  1634	  1668	  1688	  1705	  1745	  1759	  1768
	  1776	  1785	  1795	  1806	  1825	  1834	  1844	  1855	  1865	  1876	  1892	  1901	  1911	  1922
	  1932	  1945	  1989	  1998	  2008	  2018	  2028	  2043	  2052	  2067	  2077	  2126	  2140	  2149
	  2164	  2203	  2253	  2267	  2284	  2300	  2314	  2330	  2346	  2382	  2398	  2407	  2417	  2453
	  2480	  2510
ERLPA0	   612#
ERLPH	  1530	  1545	  1585	  1600	  1617	  1633	  1667	  1687	  1704	  1744	  1758	  1767	  1775	  1784
	  1794	  1805	  1824	  1833	  1843	  1864	  1875	  1891	  1900	  1910	  1921	  1931	  1944	  1988
	  1997	  2007	  2017	  2042	  2051	  2066	  2076	  2125	  2139	  2148	  2163	  2202	  2252	  2266
	  2283	  2299	  2313	  2329	  2345	  2381	  2397	  2406	  2416	  2452	  2479	  2509	  2648#
ERLPM	   605#	   739	   753	   768	   785	   932	   946	   961	   978	  1015	  1030	  1047	  1066	  1108
	  1124	  1143	  1185	  1202	  1223	  1263	  1278	  1297	  1336	  1352	  1373	  1395	  1440	  1492
	  1495	  1531	  1546	  1586	  1601	  1618	  1634	  1668	  1688	  1705	  1745	  1759	  1768	  1776
	  1785	  1795	  1806	  1825	  1834	  1844	  1851	  1854	  1865	  1876	  1892	  1901	  1911	  1922
	  1932	  1945	  1989	  1998	  2008	  2018	  2024	  2027	  2043	  2052	  2067	  2077	  2126	  2140
	  2149	  2164	  2203	  2253	  2267	  2284	  2300	  2314	  2330	  2346	  2382	  2398	  2407	  2417
	  2453	  2480	  2510
ERLPM0	   606#	  2652
ERLPMH	  1495	  1854	  2027	  2651#
ERRCA	   609	   616#
ERRCHK	   571#	   601	   606	   612
ERRCOM	   603	   618#
ERRSET	   565#	   699	   738	   752	   767	   784	   815	   846	   861	   874	   884	   900	   917	   931
	   945	   960	   977	  1014	  1029	  1046	  1065	  1107	  1123	  1142	  1184	  1201	  1222	  1262
	  1277	  1296	  1335	  1351	  1372	  1394	  1439	  2654
ERSETH	  1491	  1526	  1541	  1581	  1596	  1613	  1629	  1663	  1683	  1700	  1740	  1754	  1763	  1771
	  1780	  1790	  1801	  1820	  1829	  1839	  1850	  1860	  1871	  1887	  1896	  1906	  1917	  1927
	  1940	  1984	  1993	  2003	  2013	  2023	  2038	  2047	  2062	  2072	  2121	  2135	  2144	  2159
	  2198	  2248	  2262	  2279	  2295	  2309	  2325	  2341	  2377	  2393	  2402	  2412	  2448	  2475
	  2505	  2654#
EVPAR	    98#
EXC	   200#
EXFER	    80#
EXFER1	  2174#	  2203
EXTBUS	    99#
F0	   188#
F1	   189#
F2	   190#
F3	   191#
F4	   192#
FLT1	   779#	   789	   792
FLT11	  1363#	  1377	  1380
FLT2	   972#	   982	   985
FLT3	  1058#	  1070	  1073
FLT4	  1136#	  1147	  1150
FLT5	  1214#	  1227	  1230
FLT5A	  1289#	  1301	  1304
FLT6	  1429#	  1444	  1447
FLTO	  2670#
FLTZ	   971	  1362	  2662#
FLTZA	   778	  2678#
FLTZB	  1135	  2692#
FLTZC	  1213	  2704#
FLTZD	  1057	  2712#
FLTZE	  1288	  2722#
FLTZF	  2730#
FLTZG	  2742#
FN	   187#
GO	   186#
HALTIO	   153#
HLDOTL	   163#
HLDOUT	   111#
HSDPIN	   176#	  2638
I	   705	   790	   983	  1071	  1148	  1228	  1302	  1378	  1445
ILF	   206#
INADR	   271#
INIT	   274#	   498	  2518
INITL	   709	   761	   809	   954	  1038	  1478	  1726	  1970	  2102	  2174	  2228	  2367	  2440	  2497
	  2518#
INT0	   261#
INT1	   262#
INT2	   263#
INT3	   264#
IOSEL	   270#	   483	   499	   501	   525	   527	   530	   544	   546	   550	   643	   665	   692	   695
	  2519	  2521	  2549	  2553	  2557	  2561	  2565	  2568	  2637	  2640
LOADDR	  1979	  2540#
LOOPEN	   101#	  1098	  1173	  1326	  1424	  1479	  1574	  1607	  1622	  1657	  1677	  1694	  1727	  1729
	  1933	  1972	  1974	  2104	  2106	  2153	  2176	  2178	  2229	  2231	  2369	  2371	  2441	  2463
	  2468
LPADR	   700#	   703	   739#	   742	   753#	   756	   768#	   771	   785#	   788	   816#	   819	   847#	   850
	   862#	   865	   875#	   878	   885#	   888	   901#	   904	   918#	   921	   932#	   935	   946#	   949
	   961#	   964	   978#	   981	  1015#	  1018	  1030#	  1033	  1047#	  1050	  1066#	  1069	  1108#	  1111
	  1124#	  1127	  1143#	  1146	  1185#	  1188	  1202#	  1205	  1223#	  1226	  1263#	  1266	  1278#	  1281
	  1297#	  1300	  1336#	  1339	  1352#	  1355	  1373#	  1376	  1395#	  1398	  1440#	  1443	  1492#	  1495
	  1496	  1527#	  1530	  1531	  1542#	  1545	  1546	  1582#	  1585	  1586	  1597#	  1600	  1601	  1614#
	  1617	  1618	  1630#	  1633	  1634	  1664#	  1667	  1668	  1684#	  1687	  1688	  1701#	  1704	  1705
	  1741#	  1744	  1745	  1755#	  1758	  1759	  1764#	  1767	  1768	  1772#	  1775	  1776	  1781#	  1784
	  1785	  1791#	  1794	  1795	  1802#	  1805	  1806	  1821#	  1824	  1825	  1830#	  1833	  1834	  1840#
	  1843	  1844	  1851#	  1854	  1855	  1861#	  1864	  1865	  1872#	  1875	  1876	  1888#	  1891	  1892
	  1897#	  1900	  1901	  1907#	  1910	  1911	  1918#	  1921	  1922	  1928#	  1931	  1932	  1941#	  1944
	  1945	  1985#	  1988	  1989	  1994#	  1997	  1998	  2004#	  2007	  2008	  2014#	  2017	  2018	  2024#
	  2027	  2028	  2039#	  2042	  2043	  2048#	  2051	  2052	  2063#	  2066	  2067	  2073#	  2076	  2077
	  2122#	  2125	  2126	  2136#	  2139	  2140	  2145#	  2148	  2149	  2160#	  2163	  2164	  2199#	  2202
	  2203	  2249#	  2252	  2253	  2263#	  2266	  2267	  2280#	  2283	  2284	  2296#	  2299	  2300	  2310#
	  2313	  2314	  2326#	  2329	  2330	  2342#	  2345	  2346	  2378#	  2381	  2382	  2394#	  2397	  2398
	  2403#	  2406	  2407	  2413#	  2416	  2417	  2449#	  2452	  2453	  2476#	  2479	  2480	  2506#	  2509
	  2510
MK0IN	   130#
MK0INL	   160#
MK1IN	   131#
MK1INL	   161#
MKPE	    84#
MOD360	   100#
MPDB0	   224#
MPDB1	   228#
MPDB2	   232#
MPDTR	   216#
MPECR	   212#	   511	   590
MPERR	   207#	   558	   596
MPGP0	   241#	   528	   645
MPGP1	   242#	   646	   667
MPGP10	   249#
MPGP11	   250#
MPGP12	   251#	   693
MPGP13	   252#
MPGP14	   253#
MPGP15	   254#
MPGP16	   255#
MPGP17	   256#
MPGP2	   243#
MPGP3	   244#
MPGP4	   245#	   608	   615
MPGP5	   246#	   617
MPGP6	   247#	   503	  2566
MPGP7	   248#
MPHVR	   220#
MPSCR0	   184#	   484	   488
MPSCR1	   197#	   512	   517	   556	   560	   648	  2551	  2559
MPSTAT	   260#
MTRIN	   134#
MTROUT	   109#
NOFAIL	   581	   583#
NRTN	   547#	   602	   607	   613	   637
NXTBNK	  1451	  1454#
OCC	   205#
OFFGO	   504	   510#	   622	   626
ONLINE	   102#	  1521
OPATS	  2752#
OPLIN	   129#
OPLINL	   159#	  1673
OPLOUT	   118#
OUTADR	   272#
PAR2A	   688#	   704	   707
PATS	   687	  1428	  2660#
PNT	   325#	   700	   739	   753	   768	   785	   816	   847	   862	   875	   885	   901	   918	   932
	   946	   961	   978	  1015	  1030	  1047	  1066	  1108	  1124	  1143	  1185	  1202	  1223	  1263
	  1278	  1297	  1336	  1352	  1373	  1395	  1440	  1492	  1527	  1542	  1582	  1597	  1614	  1630
	  1664	  1684	  1701	  1741	  1755	  1764	  1772	  1781	  1791	  1802	  1821	  1830	  1840	  1851
	  1861	  1872	  1888	  1897	  1907	  1918	  1928	  1941	  1985	  1994	  2004	  2014	  2024	  2039
	  2048	  2063	  2073	  2122	  2136	  2145	  2160	  2199	  2249	  2263	  2280	  2296	  2310	  2326
	  2342	  2378	  2394	  2403	  2413	  2449	  2476	  2506
RAMADR	  2756#
RD2BYT	  1856	  2595#
RDAMK1	  2587#
RDB0OD	  2575#
RDBRP0	  2571#
RDCUIN	  1736	  2611#
RDDPPE	  2627#
RDDSRQ	  1769	  2623#
RDENSD	  2615#
RDIT	  2573	  2577	  2581	  2585	  2589	  2593	  2597	  2601	  2605	  2609	  2613	  2617	  2621	  2625
	  2629	  2631#
RDODDE	  2591#
RDRDLY	  1760	  1893	  2389	  2445	  2472	  2607#
RDRRDY	  1786	  1826	  1902	  1999	  2034	  2141	  2374	  2399	  2599#
RDSDRQ	  1752	  1883	  1982	  2058	  2259	  2306	  2336	  2619#
RDSEX	  1578	  1592	  1609	  1625	  2579#
RDSLRQ	  1777	  1816	  1990	  2132	  2408	  2603#
RDTSFF	  2583#
REG11A	  1344#	  1356
REG11B	  1385#	  1399
REG1A	   747#	   757	   772
REG2A	   893#	   905	   922
REG2B	   926#	   936
REG2C	   940#	   950	   965
REG3A	  1023#	  1034	  1051
REG4A	  1116#	  1128
REG5A	  1193#	  1206
REG5AA	  1271#	  1282
REPORT	   576	   588#
REPTU	   636#	   711	   794	   821	   987	  1075	  1152	  1232	  1306	  1400	  1449	  2656
REPTUH	  1497	  1552	  1635	  1706	  1946	  2078	  2204	  2347	  2418	  2481	  2511	  2656#
REQIN	   142#
REQINL	   171#	  1675
RESIOS	   549#	   623	   627
RHDATA	   294	   362	  1462	  1492	  1496	  1498	  1507	  1527	  1531	  1542	  1546	  1553	  1562	  1582
	  1586	  1597	  1601	  1614	  1618	  1630	  1634	  1636	  1645	  1664	  1668	  1684	  1688	  1701
	  1705	  1707	  1716	  1741	  1745	  1755	  1759	  1764	  1768	  1772	  1776	  1781	  1785	  1791
	  1795	  1802	  1806	  1821	  1825	  1830	  1834	  1840	  1844	  1851	  1855	  1861	  1865	  1872
	  1876	  1888	  1892	  1897	  1901	  1907	  1911	  1918	  1922	  1928	  1932	  1941	  1945	  1947
	  1956	  1985	  1989	  1994	  1998	  2004	  2008	  2014	  2018	  2024	  2028	  2039	  2043	  2048
	  2052	  2063	  2067	  2073	  2077	  2079	  2088	  2122	  2126	  2136	  2140	  2145	  2149	  2160
	  2164	  2199	  2203	  2205	  2214	  2249	  2253	  2263	  2267	  2280	  2284	  2296	  2300	  2310
	  2314	  2326	  2330	  2342	  2346	  2348	  2357	  2378	  2382	  2394	  2398	  2403	  2407	  2413
	  2417	  2419	  2428	  2449	  2453	  2476	  2480	  2482	  2491	  2506	  2510	  2512
RPTCNT	    47#	   538
RUN	   185#
SAVIOS	   544#	   583	   588
SELIN	   135#
SELINL	   164#
SELOUT	   113#
SELRST	   151#
SETATA	   556#	   619
SETPNT	   683	  2564#
SEX1	  1590#	  1601
SEX2	  1605#	  1618
SEX3	  1622#	  1634
SLVSEL	    87#
SPABTS	   147#
SPADR	    58#	  1256	  1257	  1272	  1273	  1289	  1290	  1935	  2572	  2576	  2580	  2584	  2588	  2592
	  2596	  2600	  2604	  2608	  2612	  2616	  2620	  2624	  2628
SPDAHI	    65#
SPDALO	    61#
SPEN	    96#	  2371
SPRES	   273#	   498
SRVIN	   140#
SRVINL	   169#	  1980	  2032	  2236	  2238	  2240	  2288	  2304	  2318	  2387	  2443	  2470
SRVOUT	   107#
STAIN	   136#
STAINL	   165#	  1576	  1605	  2113	  2185	  2465
START	   203#
SUPOUT	   120#
SYSRST	   152#
TAGIN0	    56#	  1103	  1119	  1138
TAGIN1	    57#	  1178	  1196	  1216
TEST0I	   522#	  2646
TESTI	   523#	   669	   720	   803	   830	   996	  1084	  1161	  1241	  1315	  1409
TESTIH	  1461	  1506	  1561	  1644	  1715	  1955	  2087	  2213	  2356	  2427	  2490	  2645#
TIMOUT	    81#
TMREN	   112#	   840
TODOUT	   124#
TOHOUT	   133#
TOR0	    54#	   841	   842	   894	   895	   927	   928	   941	   942	   956	   972	   973	  1101	  1117
	  1136	  1577	  1591	  1606	  1674	  2114	  2186	  2466
TOR1	    55#	  1008	  1009	  1024	  1025	  1040	  1058	  1059	  1176	  1194	  1214	  1520	  1551	  1660
	  1676	  1693	  1751	  1796	  1815	  1835	  1866	  1882	  1912	  1981	  2009	  2033	  2044	  2057
	  2068	  2112	  2116	  2131	  2184	  2188	  2190	  2192	  2237	  2239	  2241	  2243	  2258	  2272
	  2274	  2289	  2291	  2305	  2319	  2321	  2335	  2388	  2444	  2462	  2471	  2499	  2501	  2631
TOSOUT	   125#
TST	   670#	   712	   721#	   743	   795	   804#	   820	   822	   831#	   851	   866	   879	   889	   988
	   997#	  1019	  1076	  1085#	  1112	  1153	  1162#	  1189	  1233	  1242#	  1267	  1307	  1316#	  1340
	  1401	  1410#	  1450	  1462#	  1496	  1498	  1507#	  1531	  1546	  1553	  1562#	  1586	  1636	  1645#
	  1668	  1688	  1707	  1716#	  1745	  1759	  1768	  1776	  1785	  1795	  1806	  1825	  1834	  1844
	  1855	  1865	  1876	  1892	  1901	  1911	  1922	  1932	  1945	  1947	  1956#	  1989	  1998	  2008
	  2018	  2028	  2043	  2052	  2067	  2077	  2079	  2088#	  2126	  2140	  2149	  2164	  2205	  2214#
	  2253	  2267	  2284	  2300	  2314	  2330	  2346	  2348	  2357#	  2382	  2398	  2407	  2417	  2419
	  2428#	  2453	  2482	  2491#	  2510	  2512
TST154	   670	   671#
TST155	   721	   722#
TST156	   804	   805#
TST157	   831	   832#
TST158	   997	   998#
TST159	  1085	  1086#
TST160	  1162	  1163#
TST161	  1242	  1243#
TST162	  1316	  1317#
TST163	  1410	  1411#
TST164	  1462	  1463#
TST165	  1507	  1508#
TST166	  1562	  1563#
TST167	  1645	  1646#
TST168	  1716	  1717#
TST169	  1956	  1957#
TST170	  2088	  2089#
TST171	  2214	  2215#
TST172	  2357	  2358#
TST173	  2428	  2429#
TST174	  2491	  2492#
TSTART	   505	   653#
UBPE	    83#
VERSIO	     2#	     2	   480
WAIT	   854	   869	   909	   911	  1547	  2528#
WAITGO	   484#	   487	   620	   649
WAITI	  2532#	  2534
WAITO	  2530#	  2537
WCLK	   193#
Z	   266#
ZRTN	   624#	   811	   882
ZRTNH	  1661	  1679	  1696	  2516#
%ADRH	   385#	  1462	  1462#	  1492	  1492#	  1496	  1496#	  1498	  1498#	  1507	  1507#	  1527	  1527#	  1531
	  1531#	  1542	  1542#	  1546	  1546#	  1553	  1553#	  1562	  1562#	  1582	  1582#	  1586	  1586#	  1597
	  1597#	  1601	  1601#	  1614	  1614#	  1618	  1618#	  1630	  1630#	  1634	  1634#	  1636	  1636#	  1645
	  1645#	  1664	  1664#	  1668	  1668#	  1684	  1684#	  1688	  1688#	  1701	  1701#	  1705	  1705#	  1707
	  1707#	  1716	  1716#	  1741	  1741#	  1745	  1745#	  1755	  1755#	  1759	  1759#	  1764	  1764#	  1768
	  1768#	  1772	  1772#	  1776	  1776#	  1781	  1781#	  1785	  1785#	  1791	  1791#	  1795	  1795#	  1802
	  1802#	  1806	  1806#	  1821	  1821#	  1825	  1825#	  1830	  1830#	  1834	  1834#	  1840	  1840#	  1844
	  1844#	  1851	  1851#	  1855	  1855#	  1861	  1861#	  1865	  1865#	  1872	  1872#	  1876	  1876#	  1888
	  1888#	  1892	  1892#	  1897	  1897#	  1901	  1901#	  1907	  1907#	  1911	  1911#	  1918	  1918#	  1922
	  1922#	  1928	  1928#	  1932	  1932#	  1941	  1941#	  1945	  1945#	  1947	  1947#	  1956	  1956#	  1985
	  1985#	  1989	  1989#	  1994	  1994#	  1998	  1998#	  2004	  2004#	  2008	  2008#	  2014	  2014#	  2018
	  2018#	  2024	  2024#	  2028	  2028#	  2039	  2039#	  2043	  2043#	  2048	  2048#	  2052	  2052#	  2063
	  2063#	  2067	  2067#	  2073	  2073#	  2077	  2077#	  2079	  2079#	  2088	  2088#	  2122	  2122#	  2126
	  2126#	  2136	  2136#	  2140	  2140#	  2145	  2145#	  2149	  2149#	  2160	  2160#	  2164	  2164#	  2199
	  2199#	  2203	  2203#	  2205	  2205#	  2214	  2214#	  2249	  2249#	  2253	  2253#	  2263	  2263#	  2267
	  2267#	  2280	  2280#	  2284	  2284#	  2296	  2296#	  2300	  2300#	  2310	  2310#	  2314	  2314#	  2326
	  2326#	  2330	  2330#	  2342	  2342#	  2346	  2346#	  2348	  2348#	  2357	  2357#	  2378	  2378#	  2382
	  2382#	  2394	  2394#	  2398	  2398#	  2403	  2403#	  2407	  2407#	  2413	  2413#	  2417	  2417#	  2419
	  2419#	  2428	  2428#	  2449	  2449#	  2453	  2453#	  2476	  2476#	  2480	  2480#	  2482	  2482#	  2491
	  2491#	  2506	  2506#	  2510	  2510#	  2512	  2512#	  2645	  2648	  2651	  2654	  2656	  2658
%EMES	   670#	   702	   705	   705#	   721#	   741	   744	   744#	   755	   758	   758#	   770	   773	   773#
	   787	   790	   790#	   804#	   818	   821	   821#	   831#	   849	   852	   852#	   864	   867	   867#
	   877	   880	   880#	   887	   890	   890#	   903	   906	   906#	   920	   923	   923#	   934	   937
	   937#	   948	   951	   951#	   963	   966	   966#	   980	   983	   983#	   997#	  1017	  1020	  1020#
	  1032	  1035	  1035#	  1049	  1052	  1052#	  1068	  1071	  1071#	  1085#	  1110	  1113	  1113#	  1126
	  1129	  1129#	  1145	  1148	  1148#	  1162#	  1187	  1190	  1190#	  1204	  1207	  1207#	  1225	  1228
	  1228#	  1242#	  1265	  1268	  1268#	  1280	  1283	  1283#	  1299	  1302	  1302#	  1316#	  1338	  1341
	  1341#	  1354	  1357	  1357#	  1375	  1378	  1378#	  1397	  1400	  1400#	  1410#	  1442	  1445	  1445#
	  1462#	  1494	  1497	  1497#	  1507#	  1529	  1532	  1532#	  1544	  1547	  1547#	  1562#	  1584	  1587
	  1587#	  1599	  1602	  1602#	  1616	  1619	  1619#	  1632	  1635	  1635#	  1645#	  1666	  1669	  1669#
	  1686	  1689	  1689#	  1703	  1706	  1706#	  1716#	  1743	  1746	  1746#	  1757	  1760	  1760#	  1766
	  1769	  1769#	  1774	  1777	  1777#	  1783	  1786	  1786#	  1793	  1796	  1796#	  1804	  1807	  1807#
	  1823	  1826	  1826#	  1832	  1835	  1835#	  1842	  1845	  1845#	  1853	  1856	  1856#	  1863	  1866
	  1866#	  1874	  1877	  1877#	  1890	  1893	  1893#	  1899	  1902	  1902#	  1909	  1912	  1912#	  1920
	  1923	  1923#	  1930	  1933	  1933#	  1943	  1946	  1946#	  1956#	  1987	  1990	  1990#	  1996	  1999
	  1999#	  2006	  2009	  2009#	  2016	  2019	  2019#	  2026	  2029	  2029#	  2041	  2044	  2044#	  2050
	  2053	  2053#	  2065	  2068	  2068#	  2075	  2078	  2078#	  2088#	  2124	  2127	  2127#	  2138	  2141
	  2141#	  2147	  2150	  2150#	  2162	  2165	  2165#	  2201	  2204	  2204#	  2214#	  2251	  2254	  2254#
	  2265	  2268	  2268#	  2282	  2285	  2285#	  2298	  2301	  2301#	  2312	  2315	  2315#	  2328	  2331
	  2331#	  2344	  2347	  2347#	  2357#	  2380	  2383	  2383#	  2396	  2399	  2399#	  2405	  2408	  2408#
	  2415	  2418	  2418#	  2428#	  2451	  2454	  2454#	  2478	  2481	  2481#	  2491#	  2508	  2511	  2511#
%REQ	   293#	   633
%TNUM	   291#	   664	   668	   670#	   719	   721#	   802	   804#	   829	   831#	   995	   997#	  1083	  1085#
	  1160	  1162#	  1240	  1242#	  1314	  1316#	  1408	  1410#	  1460	  1462#	  1505	  1507#	  1560	  1562#
	  1643	  1645#	  1714	  1716#	  1954	  1956#	  2086	  2088#	  2212	  2214#	  2355	  2357#	  2426	  2428#
	  2489	  2491#
.ERROR	   572	   573

DATI	   484	   488	   512	   525	   544	   556	   696	   735	   749	   763	   780	   842	   856	   871
	   895	   913	   928	   942	   956	   973	  1009	  1025	  1040	  1059	  1103	  1119	  1138	  1178
	  1196	  1216	  1257	  1273	  1290	  1331	  1347	  1368	  1390	  1435	  1487	  1523	  1537	  1796
	  1835	  1846	  1866	  1912	  1923	  1935	  2009	  2020	  2044	  2068	  2118	  2156	  2194	  2243
	  2274	  2291	  2321	  2501	  2631
DECR	   636	   705	   790	   983	  1071	  1148	  1228	  1302	  1378	  1445	  2532	  2535
DEFTST	   298#	   658
ERLOOP	   345#	   701	   740	   754	   769	   786	   817	   848	   863	   876	   886	   902	   919	   933
	   947	   962	   979	  1016	  1031	  1048	  1067	  1109	  1125	  1144	  1186	  1203	  1224	  1264
	  1279	  1298	  1337	  1353	  1374	  1396	  1441	  1493	  1528	  1543	  1583	  1598	  1615	  1631
	  1665	  1685	  1702	  1742	  1756	  1765	  1773	  1782	  1792	  1803	  1822	  1831	  1841	  1852
	  1862	  1873	  1889	  1898	  1908	  1919	  1929	  1942	  1986	  1995	  2005	  2015	  2025	  2040
	  2049	  2064	  2074	  2123	  2137	  2146	  2161	  2200	  2250	  2264	  2281	  2297	  2311	  2327
	  2343	  2379	  2395	  2404	  2414	  2450	  2477	  2507
ERRMAC	   328#	   699	   738	   752	   767	   784	   815	   846	   861	   874	   884	   900	   917	   931
	   945	   960	   977	  1014	  1029	  1046	  1065	  1107	  1123	  1142	  1184	  1201	  1222	  1262
	  1277	  1296	  1335	  1351	  1372	  1394	  1439	  1491	  1526	  1541	  1581	  1596	  1613	  1629
	  1663	  1683	  1700	  1740	  1754	  1763	  1771	  1780	  1790	  1801	  1820	  1829	  1839	  1850
	  1860	  1871	  1887	  1896	  1906	  1917	  1927	  1940	  1984	  1993	  2003	  2013	  2023	  2038
	  2047	  2062	  2072	  2121	  2135	  2144	  2159	  2198	  2248	  2262	  2279	  2295	  2309	  2325
	  2341	  2377	  2393	  2402	  2412	  2448	  2475	  2505
ERROR	   337#	   699	   814	   846	   860	   874	   884	   900	   917	  1526	  1541	  1580	  1595	  1612
	  1628	  1663	  1682	  1699	  1739	  1754	  1763	  1771	  1779	  1789	  1800	  1819	  1828	  1838
	  1859	  1870	  1886	  1895	  1905	  1916	  1926	  1939	  1984	  1992	  2002	  2012	  2036	  2046
	  2061	  2071	  2120	  2135	  2143	  2159	  2197	  2247	  2261	  2277	  2294	  2308	  2323	  2339
	  2377	  2392	  2401	  2411	  2447	  2474	  2504
ERRORA	   341#
ERRORD	   343#
ERRORM	   339#	   738	   752	   766	   783	   931	   945	   959	   976	  1014	  1029	  1045	  1064	  1106
	  1122	  1141	  1183	  1200	  1221	  1262	  1277	  1295	  1334	  1350	  1371	  1394	  1438	  1489
	  1849	  2022
GOINK	   387#	   669	   699	   703	   711	   720	   738	   742	   752	   756	   767	   771	   784	   788
	   794	   803	   815	   819	   821	   830	   846	   850	   861	   865	   874	   878	   884	   888
	   900	   904	   917	   921	   931	   935	   945	   949	   960	   964	   977	   981	   987	   996
	  1014	  1018	  1029	  1033	  1046	  1050	  1065	  1069	  1075	  1084	  1107	  1111	  1123	  1127
	  1142	  1146	  1152	  1161	  1184	  1188	  1201	  1205	  1222	  1226	  1232	  1241	  1262	  1266
	  1277	  1281	  1296	  1300	  1306	  1315	  1335	  1339	  1351	  1355	  1372	  1376	  1394	  1398
	  1400	  1409	  1439	  1443	  1449	  1461	  1491	  1495	  1497	  1506	  1526	  1530	  1541	  1545
	  1552	  1561	  1581	  1585	  1596	  1600	  1613	  1617	  1629	  1633	  1635	  1644	  1663	  1667
	  1683	  1687	  1700	  1704	  1706	  1715	  1740	  1744	  1754	  1758	  1763	  1767	  1771	  1775
	  1780	  1784	  1790	  1794	  1801	  1805	  1820	  1824	  1829	  1833	  1839	  1843	  1850	  1854
	  1860	  1864	  1871	  1875	  1887	  1891	  1896	  1900	  1906	  1910	  1917	  1921	  1927	  1931
	  1940	  1944	  1946	  1955	  1984	  1988	  1993	  1997	  2003	  2007	  2013	  2017	  2023	  2027
	  2038	  2042	  2047	  2051	  2062	  2066	  2072	  2076	  2078	  2087	  2121	  2125	  2135	  2139
	  2144	  2148	  2159	  2163	  2198	  2202	  2204	  2213	  2248	  2252	  2262	  2266	  2279	  2283
	  2295	  2299	  2309	  2313	  2325	  2329	  2341	  2345	  2347	  2356	  2377	  2381	  2393	  2397
	  2402	  2406	  2412	  2416	  2418	  2427	  2448	  2452	  2475	  2479	  2481	  2490	  2505	  2509
	  2511
GOSUB	   683	   709	   761	   809	   854	   869	   909	   911	   954	  1038	  1422	  1547
JMP	   487	   495	   505	   537	   603	   609	   650	   698	   707	   792	   813	   859	   899	   916
	   985	  1073	  1150	  1230	  1304	  1380	  1393	  1447	  1452	  1540	  1594	  1611	  1627	  1681
	  1698	  1738	  1762	  1788	  1799	  1818	  1848	  1858	  1869	  1885	  1904	  1915	  1925	  1938
	  2001	  2011	  2060	  2070	  2134	  2158	  2196	  2246	  2293	  2338	  2376	  2391	  2410	  2514
	  2534	  2537	  2573	  2577	  2581	  2585	  2589	  2593	  2597	  2601	  2605	  2609	  2613	  2617
	  2621	  2625	  2629	  2644	  2647	  2650	  2653	  2655	  2657
JMPB0	   486	   491	   493	   621	   845	   898	  1525	  1539	  1579	  1593	  1610	  1626	  1737	  1753
	  1761	  1770	  1778	  1787	  1798	  1817	  1827	  1837	  1857	  1884	  1894	  1903	  1914	  1983
	  1991	  2000	  2010	  2035	  2045	  2059	  2069	  2133	  2142	  2245	  2260	  2276	  2292	  2307
	  2322	  2337	  2375	  2390	  2400	  2409	  2446	  2473
JMPB4	   535	   697	  1868	  1937	  2503
JMPB7	   572	   576	   858	   873	   915	  1924	  2119	  2157	  2195
JMPI	   811	   882	  1661	  1679	  1696
JMPSUB	   504	   583	   588	   601	   606	   612	   619	   620	   622	   623	   626	   627	   649	   669
	   684	   699	   703	   710	   711	   720	   738	   742	   752	   756	   762	   767	   771	   784
	   788	   794	   803	   810	   815	   819	   821	   830	   846	   850	   855	   861	   865	   870
	   874	   878	   884	   888	   900	   904	   910	   912	   917	   921	   931	   935	   945	   949
	   955	   960	   964	   977	   981	   987	   996	  1014	  1018	  1029	  1033	  1039	  1046	  1050
	  1065	  1069	  1075	  1084	  1107	  1111	  1123	  1127	  1142	  1146	  1152	  1161	  1184	  1188
	  1201	  1205	  1222	  1226	  1232	  1241	  1262	  1266	  1277	  1281	  1296	  1300	  1306	  1315
	  1335	  1339	  1351	  1355	  1372	  1376	  1394	  1398	  1400	  1409	  1423	  1439	  1443	  1449
	  1461	  1477	  1478	  1484	  1491	  1495	  1497	  1506	  1526	  1530	  1541	  1545	  1548	  1552
	  1561	  1573	  1578	  1581	  1585	  1592	  1596	  1600	  1609	  1613	  1617	  1624	  1625	  1629
	  1633	  1635	  1644	  1663	  1667	  1683	  1687	  1700	  1704	  1706	  1715	  1726	  1734	  1735
	  1736	  1740	  1744	  1752	  1754	  1758	  1760	  1763	  1767	  1769	  1771	  1775	  1777	  1780
	  1784	  1786	  1790	  1794	  1801	  1805	  1816	  1820	  1824	  1826	  1829	  1833	  1839	  1843
	  1850	  1854	  1856	  1860	  1864	  1871	  1875	  1883	  1887	  1891	  1893	  1896	  1900	  1902
	  1906	  1910	  1917	  1921	  1927	  1931	  1940	  1944	  1946	  1955	  1970	  1971	  1976	  1977
	  1978	  1979	  1982	  1984	  1988	  1990	  1993	  1997	  1999	  2003	  2007	  2013	  2017	  2023
	  2027	  2034	  2038	  2042	  2047	  2051	  2058	  2062	  2066	  2072	  2076	  2078	  2087	  2102
	  2103	  2108	  2109	  2110	  2121	  2125	  2132	  2135	  2139	  2141	  2144	  2148	  2159	  2163
	  2174	  2175	  2180	  2181	  2182	  2198	  2202	  2204	  2213	  2228	  2233	  2234	  2235	  2248
	  2252	  2259	  2262	  2266	  2279	  2283	  2295	  2299	  2306	  2309	  2313	  2325	  2329	  2336
	  2341	  2345	  2347	  2356	  2367	  2368	  2373	  2374	  2377	  2381	  2389	  2393	  2397	  2399
	  2402	  2406	  2408	  2412	  2416	  2418	  2427	  2440	  2445	  2448	  2452	  2467	  2472	  2475
	  2479	  2481	  2490	  2497	  2505	  2509	  2511
JMPZ	   581	   602	   607	   613	   637	   704	   706	   712	   737	   743	   751	   757	   765	   772
	   782	   789	   791	   795	   812	   820	   822	   851	   866	   879	   883	   889	   905	   922
	   930	   936	   944	   950	   958	   965	   975	   982	   984	   988	  1013	  1019	  1028	  1034
	  1044	  1051	  1063	  1070	  1072	  1076	  1105	  1112	  1121	  1128	  1140	  1147	  1149	  1153
	  1182	  1189	  1199	  1206	  1220	  1227	  1229	  1233	  1261	  1267	  1276	  1282	  1294	  1301
	  1303	  1307	  1333	  1340	  1349	  1356	  1370	  1377	  1379	  1392	  1399	  1401	  1437	  1444
	  1446	  1450	  1488	  1496	  1498	  1531	  1546	  1553	  1586	  1601	  1618	  1634	  1636	  1662
	  1668	  1680	  1688	  1697	  1705	  1707	  1745	  1759	  1768	  1776	  1785	  1795	  1806	  1825
	  1834	  1844	  1847	  1855	  1865	  1876	  1892	  1901	  1911	  1922	  1932	  1945	  1947	  1989
	  1998	  2008	  2018	  2021	  2028	  2043	  2052	  2067	  2077	  2079	  2126	  2140	  2149	  2164
	  2203	  2205	  2253	  2267	  2284	  2300	  2314	  2330	  2346	  2348	  2382	  2398	  2407	  2417
	  2419	  2453	  2480	  2482	  2510	  2512	  2533	  2536
JUMP	  1451	  2643	  2646	  2649	  2652	  2654	  2656
LANDB	   559	   579	   594
LANDBR	   514	   532	   578	   592	  1011	  1042	  1061	  1180	  1218	  1259	  1292
LANDMR	  1026	  1197	  1274
LDBR	   482	   494	   496	   498	   500	   502	   510	   513	   515	   531	   536	   538	   545	   558
	   565	   577	   584	   591	   593	   596	   642	   644	   647	   664	   666	   668	   683	   685
	   688	   691	   694	   702	   709	   719	   741	   755	   761	   770	   776	   787	   802	   809
	   818	   829	   840	   849	   854	   864	   869	   877	   887	   893	   903	   909	   911	   920
	   934	   948	   954	   963	   969	   980	   995	  1010	  1017	  1032	  1038	  1041	  1049	  1055
	  1060	  1068	  1083	  1098	  1110	  1126	  1133	  1145	  1160	  1173	  1179	  1187	  1204	  1211
	  1217	  1225	  1240	  1253	  1258	  1265	  1280	  1286	  1291	  1299	  1314	  1326	  1328	  1338
	  1344	  1354	  1360	  1363	  1375	  1385	  1387	  1397	  1408	  1422	  1424	  1426	  1429	  1442
	  1451	  1460	  1479	  1494	  1505	  1517	  1519	  1521	  1529	  1535	  1544	  1547	  1549	  1560
	  1574	  1576	  1584	  1590	  1599	  1605	  1607	  1616	  1622	  1632	  1643	  1655	  1657	  1659
	  1666	  1673	  1675	  1677	  1686	  1692	  1694	  1703	  1714	  1727	  1729	  1731	  1743	  1750
	  1757	  1766	  1774	  1783	  1793	  1804	  1814	  1823	  1832	  1842	  1853	  1863	  1874	  1881
	  1890	  1899	  1909	  1920	  1930	  1933	  1943	  1954	  1972	  1974	  1980	  1987	  1996	  2006
	  2016	  2026	  2032	  2041	  2050	  2056	  2065	  2075	  2086	  2104	  2106	  2111	  2113	  2115
	  2124	  2130	  2138	  2147	  2153	  2162	  2176	  2178	  2183	  2185	  2187	  2189	  2191	  2201
	  2212	  2229	  2231	  2236	  2238	  2240	  2251	  2257	  2265	  2271	  2282	  2288	  2298	  2304
	  2312	  2318	  2328	  2334	  2344	  2355	  2369	  2371	  2380	  2387	  2396	  2405	  2415	  2426
	  2441	  2443	  2451	  2461	  2463	  2465	  2468	  2470	  2478	  2489	  2498	  2508	  2518	  2520
	  2528	  2530	  2540	  2543	  2548	  2550	  2552	  2556	  2558	  2560	  2564	  2567	  2571	  2575
	  2579	  2583	  2587	  2591	  2595	  2599	  2603	  2607	  2611	  2615	  2619	  2623	  2627	  2636
	  2639	  2643	  2646	  2649	  2652	  2654	  2656
LDMAR	   523	   687	   732	   778	   839	   971	  1006	  1057	  1097	  1135	  1172	  1213	  1252	  1288
	  1325	  1362	  1428	  2522
LDMARX	   524
LDMEM	   526	   682	   733	   747	   926	   940	  1007	  1023	  1100	  1116	  1175	  1193	  1255	  1271
	  1330	  1346	  1389	  1481	  1845	  2019	  2523
LORB	   516
LORBR	   557	   566	   595
LORCM	  1365	  1431
MOV	   522	   529	   533	   549	   571	   589	   614	   616	   618
MOVB	   483	   497	   499	   501	   503	   511	   517	   528	   530	   539	   546	   550	   560	   585
	   590	   597	   600	   605	   611	   615	   617	   643	   645	   646	   648	   665	   667	   686
	   689	   692	   695	   777	   841	   894	   970	  1056	  1099	  1134	  1174	  1212	  1254	  1287
	  1327	  1329	  1345	  1361	  1364	  1366	  1386	  1388	  1425	  1427	  1430	  1432	  1433	  1480
	  1483	  1485	  1518	  1520	  1522	  1536	  1550	  1551	  1575	  1577	  1591	  1606	  1608	  1623
	  1656	  1658	  1660	  1674	  1676	  1678	  1693	  1695	  1728	  1730	  1732	  1733	  1751	  1815
	  1882	  1934	  1973	  1975	  1981	  2033	  2057	  2105	  2107	  2112	  2114	  2116	  2131	  2154
	  2177	  2179	  2184	  2186	  2188	  2190	  2192	  2230	  2232	  2237	  2239	  2241	  2258	  2272
	  2289	  2305	  2319	  2335	  2370	  2372	  2388	  2442	  2444	  2462	  2464	  2466	  2469	  2471
	  2499	  2519	  2521	  2529	  2531	  2541	  2542	  2544	  2549	  2551	  2553	  2557	  2559	  2561
	  2565	  2568	  2572	  2576	  2580	  2584	  2588	  2592	  2596	  2600	  2604	  2608	  2612	  2616
	  2620	  2624	  2628	  2637	  2638	  2640	  2645	  2648	  2651
MOVMEM	   527	   608	   690	   693	   734	   748	   779	   927	   941	   972	  1008	  1024	  1058	  1101
	  1117	  1136	  1176	  1194	  1214	  1256	  1272	  1289	  1482	  2566
NAME	     2#	     2
NOP	  1102	  1118	  1137	  1177	  1195	  1215	  1367	  1434	  1486	  2117	  2155	  2193	  2242	  2273
	  2290	  2320	  2500
OSB	   580
OSM	   736	   750	   764	   781	   929	   943	   957	   974	  1012	  1027	  1043	  1062	  1104	  1120
	  1139	  1181	  1198	  1219	  1260	  1275	  1293	  1332	  1348	  1369	  1391	  1436
REPEAT	   358#	   711	   794	   821	   987	  1075	  1152	  1232	  1306	  1400	  1449	  1497	  1552	  1635
	  1706	  1946	  2078	  2204	  2347	  2418	  2481	  2511
RETURN	   508	   518	   540	   547	   551	   561	   567	   574	   582	   586	   598	   624	   628	   638
	  2516	  2524	  2538	  2545	  2554	  2562	  2569	  2634	  2641
SHL	   575	   857	   872	   914	  1867	  1936	  2502
SHR	   485	   489	   490	   492	   507	   534	   843	   844	   896	   897	  1524	  1538	  1797	  1836
	  1913	  2244	  2275	  2632	  2633
TEST	   658#	   659	   714	   797	   824	   990	  1078	  1155	  1235	  1309	  1403	  1455	  1500	  1555
	  1638	  1709	  1949	  2081	  2207	  2350	  2421	  2484
.ECRAM	   447#	  2643
.END	  2762
.INIT	   477
.LOC	  1453
.MEM	  2658
  