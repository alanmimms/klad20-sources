MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 1
MCOD3T	MAC	17-Oct-88 14:28		CHANNEL BUS INTERFACE TEST - PART 2

     1						XLIST
     2						LIST
     3
     4
     5
     6
     7					TITLE	MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.1
     8
     9
    10
    11
    12
    13					^
    14
    15
    16
    17
    18						COMMENT	$
    19
    20						MCODE3 IS THE 2ND PART OF A 2 PART MICRODIAGNOSTIC OF THE
    21					CHANNEL BUS INTERFACE.  IT IS MAINLY A LOGIC TEST (AS OPPOSED TO A FUNCTIONAL
    22					TEST) WHICH DOES THE FOLLOWING:
    23
    24						(1)   TESTS THE SCRATCH PAD LOGIC - THE COUNTER AND THE RAM,
    25						(2)   TESTS THE PARITY CHECKING AND GENERATING LOGIC,
    26						(3)   TESTS THE CONTROL UNIT LOGIC -
    27							(A) THE HANDSHAKING LOGIC,
    28							(B) THE RESET LOGIC,
    29							(C) THE CONTROL UNIT SELECT LOGIC,
    30							(D) THE CONTROL UNIT ADDRESS COMPARE LOGIC. THIS REPORTS
    31								TO THE HOST THE ADDRESSES TO WHICH THE DX20 IS
    32								SETUP TO RESPOND.
    33
    34					IN ORDER TO SIMULATE THE ACTIONS OF A DEVICE ON THE CHANNEL BUS, THE LOOP
    35					BACK FEATURE IS USED.  THIS ALLOWS THE LOOPING BACK OF TAG OUT AND BUS OUT
    36					LINES INTO TAG IN AND BUS IN LINES, RESPECTIVELY.  THE BUS OUT LINES ARE
    37					LOOPED BACK COMPLEMENTED.
    38
    39					WHEN THE DX20 IS OPERATING AS A CONTROL UNIT, IT IS REQUIRED THAT THE DIAGNOSTIC
    40					NOT ALLOW ANY SIGNALS TO PROPAGATE ONTO THE TAG OUT OR BUS OUT LINES.  TO
    41					INSURE THIS, THE "ON LINE" BIT IS KEPT CLEARED.  THIS DISABLES THE DRIVERS.
    42					NOTE: ALL DOCUMENTATION USES THE TERM "SET" TO DENOTE THE ASSERTION OF A
    43						SIGNAL AND "CLEAR" TO DENOTE ITS NEGATION, WHETHER OR NOT THE SIGNAL
    44						IS ASSERTED HIGH OR LOW.
    45
    46					$
    47			000100			RPTCNT=	100			;SET REPEAT COUNT TO 100 TIMES
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 2
MCOD3T	MAC	17-Oct-88 14:28		CHANNEL BUS INTERFACE REGISTER BIT DEFINITIONS

    48						SUBTTL	CHANNEL BUS INTERFACE REGISTER BIT DEFINITIONS
    49
    50					;DEFINE CHANNEL BUS INTERFACE REGISTERS
    51
    52			000000		CSR0=0				;CONTROL AND STATUS REGISTER 0 (READ/WRITE CLEAR)
    53			000001		CSR1=1				;CONTROL AND STATUS REGISTER 1 (READ/WRITE)
    54			000002		TOR0=2				;TAG OUT REGISTER 0 (READ/WRITE)
    55			000003		TOR1=3				;TAG OUT REGISTER 1 (READ/WRITE)
    56			000004		TAGIN0=4			;TAG IN REGISTER 0 (READ ONLY)
    57			000005		TAGIN1=5			;TAG IN REGISTER 1 (READ ONLY BITS 7-4)
    58			000005		SPADR=5				;SCRATCH PAD ADDRESS REGISTER (READ/WRITE BITS 3-0)
    59			000006		DRLO=6				;DATA REGISTER 0 (READ ONLY)
    60			000007		CBILO=7			;BUS IN REGISTER 0 (READ ONLY)
    61			000010		SPDALO=10			;SCRATCH PAD DATA REGISTER 0 (WRITE ONLY)
    62			000011		BORLO=11				;BUS OUT REGISTER 0 (WRITE ONLY)
    63			000012		DRHI=12				;DATA REGISTER 1 (READ ONLY)
    64			000013		CBIHI=13			;BUS IN REGISTER 1 (READ ONLY)
    65			000014		SPDAHI=14			;SCRATCH PAD DATA REGISTER 1 (WRITE ONLY)
    66			000015		BORHI=15				;BUS OUT REGISTER 1 (WRITE ONLY)
    67			000016		CUSTAT=16			;CONTROL UNIT RESET STATUS REGISTER (WRITE ONLY)
    68
    69					;WRITEABLE PULSES DEFINITIONS
    70
    71			000004		CLSLRQ=4			;CLEAR SLVE REQ PULSE
    72			000006		CLKDRL=6			;CLOCK DR REG 0
    73
    74					;REGISTER BIT DEFINITIONS
    75
    76					;CSR0
    77
    78					;READ ONLY BITS
    79
    80			000200		EXFER=1B28			;END XFER
    81			000100		TIMOUT=1B29			;TIME OUT FLAG
    82			000040		DPPE=1B30			;DP PE FLAG
    83			000020		UBPE=1B31			;UB PE FLAG
    84			000010		MKPE=1B32			;MK PE FLAG
    85			000004		BUS1PE=1B33			;BUS1 PE FLAG
    86			000002		BUS0PE=1B34			;BUS0 PE FLAG
    87			000001		SLVSEL=1B35			;SLVE SEL
    88
    89					;WRITE ONLY BITS
    90
    91			000002		CLRFLG=1B34			;CLEARS ALL FLAGS
    92			000001		CSLVSL=1B35			;CLEARS "SLVE SEL"
    93
    94					;CSR1
    95
    96			000200		SPEN=1B28			;SP ENABLE
    97			000100		DIHISP=1B29			;DIAG HIGH SPEED
    98			000040		EVPAR=1B30			;EVEN PAR
    99			000020		EXTBUS=1B31			;EXTENDED BUS
   100			000010		MOD360=1B32			;360 MODE
   101			000004		LOOPEN=1B33			;LOOP ENABLE
   102			000002		ONLINE=1B34			;ON LINE
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 2-1
MCOD3T	MAC	17-Oct-88 14:28		CHANNEL BUS INTERFACE REGISTER BIT DEFINITIONS

   103			000001		CHANL=1B35			;CHANNEL MODE
   104
   105					;TOR0
   106
   107			000200		SRVOUT=1B28			;TOR SRV OUT
   108			000100		CLKOUT=1B29			;TOR CLK OUT
   109			000040		MTROUT=1B30			;TOR MTR OUT
   110			000020		ADROUT=1B31			;TOR ADR OUT
   111			000010		HLDOUT=1B32			;TOR HLD OUT
   112			000004		TMREN=1B33			;TIMER INTERRUPT ENABLE
   113			000002		SELOUT=1B34			;TOR SEL OUT
   114			000001		CMDOUT=1B35			;TOR CMD OUT
   115
   116					;TOR1
   117
   118			000200		OPLOUT=1B28			;TOR OPL OUT
   119			000100		CURSEN=1B29			;ENABLE CU RESET
   120			000040		SUPOUT=1B30			;TOR SUP OUT
   121			000020		DATOUT=1B31			;TOR DAT OUT
   122			000010		DISACK=1B32			;DIAG SLVE ACK
   123			000004		DIMUX=1B33			;DIAG MUX BIT
   124			000002		TODOUT=1B34			;TO DAT OUT
   125			000001		TOSOUT=1B35			;TO SRV OUT
   126
   127					;TAGIN0
   128
   129			000200		OPLIN=1B28			;TI OPL IN
   130			000100		MK0IN=1B29			;TI MK 0 IN
   131			000040		MK1IN=1B30			;TI MK 1 IN
   132			000020		ADRIN=1B31			;TI ADR IN
   133			000010		TOHOUT=1B32			;TO HLD OUT
   134			000004		MTRIN=1B33			;TI MTR IN
   135			000002		SELIN=1B34			;TI SEL IN
   136			000001		STAIN=1B35			;TI STA IN
   137
   138					;TAGIN1
   139
   140			000200		SRVIN=1B28			;TI SRV IN
   141			000100		DISIN=1B29			;TI DIS IN
   142			000040		REQIN=1B30			;TI REQ IN
   143			000020		DATIN=1B31			;TI DAT IN
   144
   145					;SPADR
   146
   147			000017		SPABTS=17B35			;SP ADDR BITS
   148
   149					;CUSTAT
   150
   151			000004		SELRST=1B33			;SEL RESET
   152			000002		SYSRST=1B34			;SYS RESET
   153			000001		HALTIO=1B35			;HALT I/O
   154
   155					;LOOPED BACK BIT DEFINITIONS
   156
   157					;TOR0
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 2-2
MCOD3T	MAC	17-Oct-88 14:28		CHANNEL BUS INTERFACE REGISTER BIT DEFINITIONS

   158
   159			000200		OPLINL=1B28			;OPL IN
   160			000100		MK0INL=1B29			;MK 0 IN
   161			000040		MK1INL=1B30			;MK 1 IN
   162			000020		ADRINL=1B31			;ADR IN
   163			000010		HLDOTL=1B32			;TO HLD OUT
   164			000002		SELINL=1B34			;SEL IN
   165			000001		STAINL=1B35			;STA IN
   166
   167					;TOR1
   168
   169			000200		SRVINL=1B28			;SRV IN
   170			000100		DISINL=1B29			;DIS IN
   171			000040		REQINL=1B30			;REQ IN
   172			000020		DATINL=1B31			;DAT IN
   173
   174					;SOME DATA PATH DEFINITIONS
   175
   176			000013		HSDPIN=13			;HS DP INIT
   177
   178					;ASSEMBLY CONTROL SWITCH
   179
   180			000001		CUADRS=1			;ALLOWS ASSEMBLY OF CU ADDRESS PRINT LOGIC
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 1
MCERR	MAC	17-Oct-88 14:28		CHANNEL BUS INTERFACE REGISTER BIT DEFINITIONS

   181					IF2	<PRINTX STARTING BINARY FILE>
   182						SEARCH	DX20CA			;READ THE CROSS ASSEMBLER
   183
   184					;MASSBUS REGISTER BIT DEFINITIONS
   185
   186					;STATUS & CONTROL REGISTER 1
   187
   188			000000		MPSCR0== 0				;REGISTER NAME
   189			000001			RUN==	  1			;RUN LINE FROM RH20
   190			000002			GO==	  2			;GO BIT
   191			000174			FN==	174			;FUNCTION CODE
   192			000004			 F0==	  4			;FUNCTION BIT 0
   193			000010			 F1==	 10			;FUNCTION BIT 1
   194			000020			 F2==	 20			;FUNCTION BIT 2
   195			000040			 F3==	 40			;FUNCTION BIT 3
   196			000100			 F4==	100			;FUNCTION BIT 4
   197			000200			WCLK==	200			;WRITE CLOCK LINE FROM RH20
   198
   199					;STATUS AND CONTROL REGISTER 2
   200
   201			000001		MPSCR1== 1				;REGISTER NAME
   202			000001			DONE==	  1			;DATA TRANSFER DONE (READ)
   203			000001			EBL==	  1			;SET EBL (WRITE)
   204			000002			EXC==	  2			;EXCEPTION LINE FROM RH20 (READ)
   205			000002			CLRGO==	  2			;SET TO CLEAR GO (WRITE)
   206			000004			CMPERR==  4			;COMPOSITE ERROR FLAG (READ)
   207			000004			START==	  4			;START A DATA TRANSFER (WRITE)
   208			000010			DTD==	 10			;DATA TO DEVICE
   209			000020			OCC==	 20			;OCCUPIED
   210			000040			ILF==	 40			;ILLEGAL FUNCTION
   211			000100			MPERR==	100			;MICRO-PROCESSOR DETECTED ERROR FLAG
   212			000200			ATA==	200			;ATTENTION
   213
   214					;ERROR CODE REGISTER
   215
   216			000002		MPECR== 2				;REGISTER NAME
   217
   218					;DRIVE TYPE REGISTER
   219
   220			000003		MPDTR== 3				;REGISTER NAME
   221
   222					;HARDWARE VERSION REGISTER
   223
   224			000004		MPHVR== 4				;REGISTER NAME
   225
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 2
MCERR	MAC	17-Oct-88 14:28		CHANNEL BUS INTERFACE REGISTER BIT DEFINITIONS

   226					;DATA BUFFER REGISTER 0
   227
   228			000005		MPDB0== 5				;REGISTER NAME
   229
   230					;DATA BUFFER REGISTER 1
   231
   232			000006		MPDB1== 6				;REGISTER NAME
   233
   234					;DATA BUFFER REGISTER 2
   235
   236			000007		MPDB2== 7				;REGISTER NAME
   237
   238			000003			DB==	  3			;DATA BUFFER BITS 16 AND 17
   239			000004			DBPAR==	  4			;PARITY BIT
   240			000010			DBPARE== 10			;PARITY ERROR (READ)
   241			000020			DBEVEN== 20			;DATA BUFFER EVEN PARITY CONTROL
   242
   243					;GENERAL PURPOSE REGISTERS
   244
   245			000010		MPGP0==10				;REGISTER NAMES
   246			000011		MPGP1==11
   247			000012		MPGP2==12
   248			000013		MPGP3==13
   249			000014		MPGP4==14
   250			000015		MPGP5==15
   251			000016		MPGP6==16
   252			000017		MPGP7==17
   253			000020		MPGP10==20
   254			000021		MPGP11==21
   255			000022		MPGP12==22
   256			000023		MPGP13==23
   257			000024		MPGP14==24
   258			000025		MPGP15==25
   259			000026		MPGP16==26
   260			000027		MPGP17==27
   261
   262					;MP STATUS REGISTER
   263
   264			000036		MPSTAT==36				;REGISTER NAME
   265			000001			INT0==	  1			;INTERRUPT LINE 0
   266			000002			INT1==	  2			;INTERRUPT LINE 1
   267			000004			INT2==	  4			;INTERRUPT LINE 2
   268			000010			INT3==	 10			;INTERRUPT LINE 3
   269			000020			C==	 20			;CARRY BIT
   270			000040			Z==	 40			;ZERO BIT
   271
   272					;I/O BANK SELECT REGISTER
   273
   274			000037		IOSEL==37				;REGISTER NAME
   275			000007			INADR==	  7			;INPUT BANK ADDRESS
   276			000070			OUTADR== 70			;OUTPUT BANK ADDRESS
   277			000100			SPRES==	100			;STACK POINTER RESET
   278			000200			INIT==	200			;INITIALIZE
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 3
MCERR	MAC	17-Oct-88 14:28		CHANNEL BUS INTERFACE REGISTER BIT DEFINITIONS

   279					;THE FOLLOWING AC'S ARE USED BY THE ERROR HANDLER
   280
   281					;	AC7	FLAG REGISTER
   282					;	AC6	REPEAT COUNTER
   283					;	AC5	SAVE OF BR (DURING CALL ONLY)
   284					;	AC4	SAVE OF I/O SELECT REGISTER (DURING CALL ONLY)
   285					;	AC1	CORRECT DATA FOR ERRORA CALL
   286					;	AC0	ACTUAL DATA FOR ERRORA AND ERRORM CALLS
   287
   288					;FLAG REGISTER BITS
   289
   290					;	BIT 7	ERROR LOOP
   291					;	BIT 6	ERROR DETECTED
   292					;	BIT 5	RELIABILITY MODE
   293					;	4 - 0	LAST ERROR NUMBER
   294
   295		777777	777777		%TNUM==	-1				;SET TEST NUMBER TO -1 SO ENTIRE DRIVE REGISTER
   296
   297			000000		%REQ==0
   298					IFDEF	RHDATA,<%REQ==1>
   299			000001		IFDEF	CUADRS,<%REQ==1>
   300										;IS LOADED WITH TEST NUMBER ON FIRST TEST
   301
   302					DEFINE	DEFTST(PROG),<
   303					DEFINE	TEST(E,NAME,X<;*>),<
   304					
   305						LALL
   306					X'**********************************************************************
   307					X PROG * TEST E *    NAME
   308					X'**********************************************************************
   309						SALL
   310					
   311						IFN	<^D'E^!%TNUM>&177400,<
   312						IFG %TNUM,<DATI IOSEL,AC6	;;SAVE THE IOSEL REG>
   313						LDBR	11			;;GET DEVICE CODE FOR MASSBUS INTERFACE
   314						MOVB	IOSEL			;;LOAD INTO I/O SELECT REGISTER
   315						LDBR	^D'E_-8			;;GET HIGH ORDER BITS OF TEST NUMBER
   316						MOVB	MPGP1			;;LOAD INTO MASSBUS REG 20
   317						IFG %TNUM,<	MOV	AC6,BR	;;GET SAVED IOSEL REG
   318								MOVB	IOSEL	;;RESTORE IT>
   319						>
   320						LDBR	^D'E&377		;;GET LOW ORDER BITS OF TEST NUMBER
   321						GOINK	TESTI			;;GO INITIALIZE TEST
   322						%TNUM==^D'E			;;REMEMBER TEST NUMBER
   323						%EMES==0			;;CLEAR ERROR MESSAGE NUMBER
   324						TST==TST'E			;;REMEMBER TEST PC
   325						LALL
   326					
   327					TST'E:	SALL
   328					>>
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 4
MCERR	MAC	17-Oct-88 14:28		CHANNEL BUS INTERFACE REGISTER BIT DEFINITIONS

   329			000200		PNT==200				;ADDITIONAL PRINT ROUTINE REQUEST FLAG
   330										;ERROR PRINT ROUTINE NUMBER MUST BE IN DXGP3
   331
   332					DEFINE	ERRMAC(ADR,LADR,PRTN,COR),<
   333						GOINK	ERRSET			;;GO SET ERROR DETECTED FLAG
   334						LPADR==ADR			;;REMEMBER ERROR LOOP ADDRESS
   335						CORF==<PRTN&PNT>!COR		;;REMEMBER IF CORRECT AND ACTUAL DATA
   336							LALL
   337					
   338						ERLOOP	LADR			;;IF ERROR, LOOP TO LADR
   339					>
   340
   341					DEFINE	ERROR(LADR,MES1,MES2,PRTN<0>),<ERRMAC ERLP,LADR,PRTN,0>
   342
   343					DEFINE	ERRORM(LADR,MES1,MES2,PRTN<0>),<ERRMAC ERLPM,LADR,PRTN,100>
   344
   345					DEFINE	ERRORA(LADR,MES1,MES2,PRTN<0>),<ERRMAC ERLPA,LADR,PRTN,100>
   346
   347					DEFINE	ERRORD(LADR,MES1,MES2,PRTN<0>),<ERRMAC ERLPD,LADR,PRTN,40>
   348
   349					DEFINE	ERLOOP(ADR),<SALL
   350						IFN %EMES&<^-37>,<IF2 <
   351							LALL
   352					
   353							PRINTX ?TOO MANY ERROR MESSAGES IN ONE TEST
   354							SALL
   355						>>
   356						LDBR	CORF!%EMES		;;LOAD MESSAGE NUMBER
   357						GOINK	LPADR			;;GO TO ERROR HANDLER
   358						JMPZ	ADR			;;LOOP IF Z IS SET
   359						%EMES==%EMES+1			;;UPDATE THE MESSAGE NUMBER
   360					>
   361
   362					DEFINE	REPEAT(RADR),<
   363						GOINK	REPTU			;;GO TO REPEAT ROUTINE
   364						JMPZ	RADR			;;REPEAT IF Z IS SET
   365					>
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 5
MCERR	MAC	17-Oct-88 14:28		CHANNEL BUS INTERFACE REGISTER BIT DEFINITIONS

   366					IFDEF RHDATA,<
   367						DEFINE	WRITE,<GOINK	SETWRT	;;CALL ROUTINE TO SET UP RH20>
   368						DEFINE	READ,<GOINK	SETRD	;;CALL ROUTINE TO SET UP RH20>
   369						DEFINE	READB,<GOINK	SETRDB	;;CALL ROUTINE TO SET UP RH20>
   370					
   371						DEFINE	CHKRH(LADR,PRTN,CODE),<
   372							LDBR	<PRTN&PNT>!%EMES!CODE	;;SET UP CODE FOR EC REGISTER
   373							GOINK	CKTRM		;;CALL HOST TO CHECK TERMINATION OF RH20
   374							LALL
   375					
   376						ERRLOP	LADR			;;IF ERROR, LOOP TO LADR
   377							%EMES==%EMES+1
   378						>
   379						DEFINE	CHKTRM(LADR,MES1,MES2,PRTN<0>),<CHKRH LADR,PRTN,40>
   380						DEFINE	CHKERR(LADR,MES1,MES2,PRTN<0>),<CHKRH LADR,PRTN,140>
   381					
   382						DEFINE	ERRLOP(LADR),<SALL
   383							JMPZ	LADR		;;IF ERROR, LOOP TO LADR
   384						>
   385					>
   386					IFDEF	CUADRS,<
   387						DEFINE	SNDADR,<GOINK	SENDAD	;;CALL ROUTINE TO SEND CU ADDRESSES>
   388					>
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 6
MCERR	MAC	17-Oct-88 14:28		CHANNEL BUS INTERFACE REGISTER BIT DEFINITIONS

   389			000000		%ADRH==0				;;CLEAR HIGH ADDRESS REFERENCE FLAG
   390
   391					DEFINE	GOINK(ADR),<
   392						IFE	.&<^-1777>,<
   393							JMPSUB	ADR		;;GO TO ADDRESS IN LOW 1K
   394						>
   395						IFN	.&<^-1777>,<
   396							IFIDN <ADR><TESTI>,<
   397								JMPSUB	TESTIH
   398								%ADRH==%ADRH!1
   399							>
   400							IFIDN <ADR><LPADR>,<
   401								IFE <LPADR-ERLP>,<
   402									JMPSUB	ERLPH
   403									%ADRH==%ADRH!2
   404								>
   405								IFE <LPADR-ERLPM>,<
   406									JMPSUB	ERLPMH
   407									%ADRH==%ADRH!4
   408								>
   409								IFE <LPADR-ERLPA>,<
   410									JMPSUB	ERLPAH
   411									%ADRH==%ADRH!10
   412								>
   413								IFDEF CATAB,<
   414									IFE <LPADR-ERLPD>,<
   415										JMPSUB	ERLPDH
   416										%ADRH==%ADRH!400
   417									>
   418								>
   419							>
   420							IFIDN <ADR><ERRSET>,<
   421								JMPSUB	ERSETH
   422								%ADRH==%ADRH!20
   423							>
   424							IFIDN <ADR><REPTU>,<
   425								JMPSUB	REPTUH
   426								%ADRH==%ADRH!40
   427							>
   428							IFDEF RHDATA,<
   429								IFIDN <ADR><SETWRT>,<
   430									JMPSUB	STWRTH
   431									%ADRH==%ADRH!100
   432								>
   433								IFIDN <ADR><SETRD>,<
   434									JMPSUB	STRDH
   435									%ADRH==%ADRH!100
   436								>
   437								IFIDN <ADR><SETRDB>,<
   438									JMPSUB	STRDBH
   439									%ADRH==%ADRH!100
   440								>
   441								IFIDN <ADR><CKTRM>,<JMPSUB CKTRMH>
   442							>
   443							IFDEF CUADRS,<
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 6-1
MCERR	MAC	17-Oct-88 14:28		CHANNEL BUS INTERFACE REGISTER BIT DEFINITIONS

   444								IFIDN <ADR><SENDAD>,<
   445									JMPSUB	SNDADH
   446									%ADRH==%ADRH!200
   447								>
   448							>
   449						>
   450					>
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 7
MCERR	MAC	17-Oct-88 14:28		CHANNEL BUS INTERFACE REGISTER BIT DEFINITIONS

   451					DEFINE	.ECRAM,<
   452						IFE .&<^-1777>,<	JMP	BEGEND>
   453						IFN .&<^-1777>,<	JUMP	BEGEND>
   454						IFN %ADRH&1,<	TESTIH: MOVB	AC5
   455									JUMP	TEST0I>
   456						IFN %ADRH&2,<	ERLPH:	MOVB	AC5
   457									JUMP	ERLP0>
   458						IFN %ADRH&4,<	ERLPMH:	MOVB	AC5
   459									JUMP	ERLPM0>
   460						IFN %ADRH&10,<	ERLPAH: MOVB	AC5
   461									JUMP	ERLPA0>
   462						IFN %ADRH&20,<	ERSETH: JUMP	ERRSET>
   463						IFN %ADRH&40,<	REPTUH: JUMP	REPTU>
   464						IFN %ADRH&100,<	STWRTH:	LDBR	1
   465									JMP	CALLH
   466								STRDH:	LDBR	2
   467									JMP	CALLH
   468								STRDBH:	LDBR	3
   469								CALLH:	MOVB	AC5
   470									JUMP	CALL0
   471								CKTRMH:	MOVB	AC5
   472									JUMP	CKTRM0>
   473						IFN %ADRH&200,<	SNDADH:	LDBR	200
   474									MOVB	AC5
   475									JUMP	CALL0>
   476						IFN %ADRH&400,<	ERLPDH:	MOVB	AC5
   477									JUMP	ERLPD0>
   478					>
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 8
MCERR	MAC	17-Oct-88 14:28		CHANNEL BUS INTERFACE REGISTER BIT DEFINITIONS

   479					;MICRO-DIAGNOSTIC START ROUTINE
   480
   481						.INIT	^			;INITIALIZE THE CROSS ASSEMBLER
   482
   483						SALL
   484	000000	0 002000 01 0000 
   485
   486	000001	0 002011 0 1 0 011 	BEGIN:	LDBR	11			;SELECT THE MASSBUS
   487	000002	0 066371 3 3 0 17 11 		MOVB	IOSEL			;INTERFACE
   488	000003	0 022000 1 1 0 00 00 	WAITGO:	DATI	MPSCR0,BR		;READ CONTROL REGISTER
   489	000004	0 014000 0 6 0 000 		SHR				;SHIFT GO BIT TO BIT 0
   490	000005	0 104007 4 2 0007 		JMPB0	.+2			;JUMP AROUND IF GO IS SET
   491	000006	0 100003 4 0 0003 		JMP	WAITGO			;NOT YET, KEEP WAITING
   492	000007	0 022000 1 1 0 00 00 		DATI	MPSCR0,BR		;READ THE FUNCTION CODE AGAIN
   493	000010	0 014000 0 6 0 000 		SHR				;SHIFT RIGHT
   494	000011	0 014000 0 6 0 000 		SHR				;SHIFT F0 TO BIT 0
   495	000012	0 104031 4 2 0031 		JMPB0	CMDF0			;JUMP IF F0 IS SET
   496	000013	0 014000 0 6 0 000 		SHR				;SHIFT F1 TO BIT 0
   497	000014	0 104017 4 2 0017 		JMPB0	.+3			;JUMP IF RELIABILITY MODE REQUESTED
   498	000015	0 002000 0 1 0 000 		LDBR	0			;SET UP FLAG REG WITH ALL ZEROS
   499	000016	0 100020 4 0 0020 		JMP	.+2
   500	000017	0 002040 0 1 0 040 		LDBR	40			;SET RELIABILITY MODE FLAG
   501	000020	0 072171 3 5 0 07 11 		MOVB	AC7			;PUT IN AC7
   502	000021	0 002300 0 1 0 300 		LDBR	INIT+SPRES		;RESET THE DX20
   503	000022	0 066371 3 3 0 17 11 		MOVB	IOSEL			;AND THE STACK POINTER
   504	000023	0 002011 0 1 0 011 		LDBR	11			;SELECT THE MASSBUS
   505	000024	0 066371 3 3 0 17 11 		MOVB	IOSEL			;INTERFACE AGAIN
   506	000025	0 002000 0 1 0 000 		LDBR	0			;CLEAR RIGHT HALF OF DXGP3
   507	000026	0 064351 3 2 0 16 11 		MOVB	MPGP6			;TO INDICATE NO ADDITIONAL ERROR PRINTER
   508	000027	0 116033 4 7 0033 		JMPSUB	OFFGO			;TURN OFF GO
   509	000030	0 100236 4 0 0236 		JMP	TSTART			;GO START THE FIRST TEST
   510
   511	000031	0 014000 0 6 0 000 	CMDF0:	SHR				;SHIFT F1 TO BIT 0
   512	000032	0 016000 0 7 0 000 		RETURN				;RETURN TO CALLER
   513
   514	000033	0 002000 0 1 0 000 	OFFGO:	LDBR	0			;GET A ZERO
   515	000034	0 064051 3 2 0 02 11 		MOVB	MPECR			;CLEAR ERROR CODE REGISTER
   516	000035	0 032121 1 5 0 05 01 		DATI	MPSCR1,AC5		;READ STATUS REGISTER 1
   517	000036	0 002010 0 1 0 010 		LDBR	DTD			;GET MASK OF DIRECTION BIT
   518	000037	0 072133 3 5 0 05 13 		LANDBR	AC5			;KEEP ONLY THAT BIT
   519	000040	0 002002 0 1 0 002 		LDBR	CLRGO			;GET BIT TO CLEAR GO
   520	000041	0 062134 3 1 0 05 14 		LORB	AC5,BR			;COMBINE WITH COPY OF DTD
   521	000042	0 064031 3 2 0 01 11 		MOVB	MPSCR1			;CLEAR GO AND ATA
   522	000043	0 016000 0 7 0 000 		RETURN
   523
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 9
MCERR	MAC	17-Oct-88 14:28		CHANNEL BUS INTERFACE REGISTER BIT DEFINITIONS

   524					;TEST INITIALIZATION
   525
   526	000044	0 062130 3 1 0 05 10 	TEST0I:	MOV	AC5,BR			;GET TEST NUMBER BACK
   527	000045	0 001000 0 0 2 000 	TESTI:	LDMAR	0			;CLEAR MEMORY ADDRESS REGISTER
   528	000046	0 000400 0 0 1 000 		LDMARX	0			;ALL BITS
   529	000047	0 132157 5 5 0 06 17 		DATI	IOSEL,AC6		;SAVE IOSEL REG
   530	000050	0 010011 0 4 0 011 		LDMEM	11			;GET DEVICE CODE FOR MASSBUS INTERFACE
   531	000051	0 046371 2 3 0 17 11 		MOVMEM	IOSEL			;LOAD INTO I/O SELECT REGISTER
   532	000052	0 064211 3 2 0 10 11 		MOVB	MPGP0			;WRITE TEST NUMBER INTO DXGP0
   533	000053	0 062150 3 1 0 06 10 		MOV	AC6,BR			;GET SAVED IOSEL REG
   534	000054	0 066371 3 3 0 17 11 		MOVB	IOSEL			;RESTORE IT
   535	000055	0 002040 0 1 0 040 		LDBR	40			;GET MASK OF ONLY RELIABILITY BIT
   536	000056	0 072173 3 5 0 07 13 		LANDBR	AC7			;CLEAR ERROR AND MESSAGE NUMBER BITS
   537	000057	0 062170 3 1 0 07 10 		MOV	AC7,BR			;GET FLAGS
   538	000060	0 014000 0 6 0 000 		SHR				;SHIFT RELIABILITY MODE BIT TO BR4
   539	000061	0 106064 4 3 0064 		JMPB4	.+3			;JUMP AROUND IF RELIABILITY MODE
   540	000062	0 002000 0 1 0 000 		LDBR	0			;QUICK VERIFY, LOAD A ZERO COUNT
   541	000063	0 100065 4 0 0065 		JMP	.+2
   542	000064	0 002077 0 1 0 077 		LDBR	RPTCNT-1		;GET REPEAT COUNT
   543	000065	0 072151 3 5 0 06 11 		MOVB	AC6			;SAVE IN AC6
   544	000066	0 016000 0 7 0 000 		RETURN				;NOW START THE TEST
   545
   546					;I/O SELECT REGISTER GENERAL ROUTINES
   547
   548	000067	0 132117 5 5 0 04 17 	SAVIOS:	DATI	IOSEL,AC4		;SAVE I/O SELECT REGISTER IN AC4
   549	000070	0 002011 0 1 0 011 		LDBR	11			;SELECT MASSBUS INTERFACE
   550	000071	0 066371 3 3 0 17 11 		MOVB	IOSEL			;GO I/O
   551	000072	0 016000 0 7 0 000 	NRTN:	RETURN
   552
   553	000073	0 062110 3 1 0 04 10 	RESIOS:	MOV	AC4,BR			;GET SAVED I/O SELECT REGISTER
   554	000074	0 066371 3 3 0 17 11 		MOVB	IOSEL			;RESTORE IT
   555	000075	0 016000 0 7 0 000 		RETURN
   556
   557					;ROUTINE TO SET ATA AND/OR MPERR IN STATUS REGISTER
   558					;ENTER WITH BITS TO SET IN BR
   559
   560	000076	0 032121 1 5 0 05 01 	SETATA:	DATI	MPSCR1,AC5		;READ STATUS REGISTER
   561	000077	0 072134 3 5 0 05 14 		LORBR	AC5			;SET REQUESTED BITS
   562	000100	0 002310 0 1 0 310 		LDBR	ATA+MPERR+DTD		;GET MASK OF ONLY BITS TO SET
   563	000101	0 062133 3 1 0 05 13 		LANDB	AC5,BR			;CLEAR OTHER BITS READ
   564	000102	0 064031 3 2 0 01 11 		MOVB	MPSCR1			;WRITE INTO STATUS REGISTER
   565	000103	0 016000 0 7 0 000 		RETURN
   566
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 10
MCERR	MAC	17-Oct-88 14:28		CHANNEL BUS INTERFACE REGISTER BIT DEFINITIONS

   567					;ERROR HANDLER ROUTINES
   568
   569	000104	0 002300 0 1 0 300 	ERRSET:	LDBR	300			;GET ERROR LOOP AND DETECTED FLAGS
   570	000105	0 072174 3 5 0 07 14 		LORBR	AC7			;SET BOTH BITS IN FLAG REGISTER
   571	000106	0 016000 0 7 0 000 		RETURN
   572
   573					;CHECK IF TO REPORT AN ERROR
   574
   575	000107	0 062170 3 1 0 07 10 	ERRCHK:	MOV	AC7,BR			;GET FLAG REGISTER
   576	000110	0 110112 4 4 0112 	IFNDEF .ERROR,<JMPB7	.+2>		;SKIP IF IN ERROR LOOP
   577					IFDEF  .ERROR,<JMP	REPORT>		;REPORT ALL ERRORS
   578	000111	0 016377 0 7 0 377 		RETURN	-1			;RETURN WITH Z SET TO CONTINUE TEST
   579	000112	0 062165 3 1 0 07 05 		SHL	AC7,BR			;SHIFT ERROR DETECTED BIT TO BR7
   580	000113	0 110126 4 4 0126 		JMPB7	REPORT			;REPORT IT IF SET
   581	000114	0 002037 0 1 0 037 		LDBR	37			;GET MASK FOR ERROR NUMBER
   582	000115	0 072133 3 5 0 05 13 		LANDBR	AC5			;CLEAR CONTROL BITS IN CURRENT NUMBER
   583	000116	0 062173 3 1 0 07 13 		LANDB	AC7,BR			;EXTRACT LAST ERROR NUMBER
   584	000117	0 060137 3 0 0 05 17 		OSB	AC5			;COMPARE LAST AND CURRENT ERROR NUMBERS
   585	000120	0 114122 4 6 0122 		JMPZ	NOFAIL			;JUMP IF AT SAME ERROR
   586	000121	0 016377 0 7 0 377 		RETURN	-1			;NO, RETURN WITH Z SET TO CONTINUE TEST
   587	000122	0 116067 4 7 0067 	NOFAIL:	JMPSUB	SAVIOS			;SAVE I/O REGISTER, SELECT MASSBUS
   588	000123	0 002200 0 1 0 200 		LDBR	ATA			;GET ATA BIT
   589	000124	0 072131 3 5 0 05 11 		MOVB	AC5			;SAVE IN AC5
   590	000125	0 016000 0 7 0 000 		RETURN				;RETURN WITH Z CLEAR TO SIGNAL END OF LOOP
   591
   592	000126	0 116067 4 7 0067 	REPORT:	JMPSUB	SAVIOS			;SAVE I/O REGISTER, SELECT MASSBUS
   593	000127	0 062130 3 1 0 05 10 		MOV	AC5,BR			;GET ERROR NUMBER
   594	000130	0 064051 3 2 0 02 11 		MOVB	MPECR			;PUT IN ERROR CODE REGISTER
   595	000131	0 002240 0 1 0 240 		LDBR	240			;GET MASK OF LOOP AND RELIABILITY BITS
   596	000132	0 072173 3 5 0 07 13 		LANDBR	AC7			;LEAVE ONLY THOSE TWO BITS IN FLAG REG
   597	000133	0 002037 0 1 0 037 		LDBR	37			;GET MASK OF ERROR NUMBER
   598	000134	0 062133 3 1 0 05 13 		LANDB	AC5,BR			;GET CURRENT NUMBER FROM AC5
   599	000135	0 072174 3 5 0 07 14 		LORBR	AC7			;MERGE AND PUT IN FLAG REGISTER
   600	000136	0 002300 0 1 0 300 		LDBR	ATA+MPERR		;GET ATA AND ERROR BITS
   601	000137	0 072131 3 5 0 05 11 		MOVB	AC5			;SAVE IN AC5
   602	000140	0 016000 0 7 0 000 		RETURN				;RETURN WITH Z CLEAR TO SIGNAL ERROR REPORT
   603
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 11
MCERR	MAC	17-Oct-88 14:28		CHANNEL BUS INTERFACE REGISTER BIT DEFINITIONS

   604	000141	0 072131 3 5 0 05 11 	ERLP:	MOVB	AC5			;SAVE MESSAGE NUMBER IN AC5
   605	000142	0 116107 4 7 0107 	ERLP0:	JMPSUB	ERRCHK			;CHECK FOR ERROR
   606	000143	0 114072 4 6 0072 		JMPZ	NRTN			;NO, RETURN WITH Z CLEAR TO CONTINUE TEST
   607	000144	0 100161 4 0 0161 		JMP	ERRCOM			;GO TO COMMON ROUTINE
   608
   609	000145	0 072131 3 5 0 05 11 	ERLPM:	MOVB	AC5			;SAVE MESSAGE NUMBER IN AC5
   610	000146	0 116107 4 7 0107 	ERLPM0:	JMPSUB	ERRCHK			;CHECK FOR ERROR
   611	000147	0 114072 4 6 0072 		JMPZ	NRTN			;NO, RETURN WITH Z CLEAR TO CONTINUE TEST
   612	000150	0 044311 2 2 0 14 11 		MOVMEM	MPGP4			;PUT CORRECT DATA IN RIGHT HALF OF DXGP2
   613	000151	0 100157 4 0 0157 		JMP	ERRCA			;JUMP AROUND
   614
   615	000152	0 072131 3 5 0 05 11 	ERLPA:	MOVB	AC5			;SAVE MESSAGE NUMBER IN AC5
   616	000153	0 116107 4 7 0107 	ERLPA0:	JMPSUB	ERRCHK			;CHECK FOR ERROR
   617	000154	0 114072 4 6 0072 		JMPZ	NRTN			;NO, RETURN WITH Z CLEAR TO CONTINUE TEST
   618	000155	0 062030 3 1 0 01 10 		MOV	AC1,BR			;GET CORRECT DATA FROM AC1
   619	000156	0 064311 3 2 0 14 11 		MOVB	MPGP4			;PUT IN RIGHT HALF OF DXGP2
   620	000157	0 062010 3 1 0 00 10 	ERRCA:	MOV	AC0,BR			;GET ACTUAL DATA FROM AC0
   621	000160	0 064331 3 2 0 15 11 		MOVB	MPGP5			;PUT IN LEFT HALF OF DXGP2
   622	000161	0 062130 3 1 0 05 10 	ERRCOM:	MOV	AC5,BR			;GET BITS TO SET IN STATUS REGISTER
   623	000162	0 116076 4 7 0076 	CHKLOP:	JMPSUB	SETATA			;GO SET THE BITS
   624	000163	0 116003 4 7 0003 	CHKLP:	JMPSUB	WAITGO			;WAIT FOR GO TO SET
   625	000164	0 104170 4 2 0170 		JMPB0	ELOOPC			;JUMP IF TO CONTINUE
   626	000165	0 116033 4 7 0033 		JMPSUB	OFFGO			;TURN OFF GO
   627	000166	0 116073 4 7 0073 		JMPSUB	RESIOS			;RESTORE I/O SELECT REGISTER
   628	000167	0 016377 0 7 0 377 	ZRTN:	RETURN	-1			;RETURN WITH Z SET TO LOOP
   629
   630	000170	0 116033 4 7 0033 	ELOOPC:	JMPSUB	OFFGO			;TURN OFF GO
   631	000171	0 116073 4 7 0073 		JMPSUB	RESIOS			;RESTORE I/O SELECT REGISTER
   632	000172	0 016000 0 7 0 000 		RETURN				;RETURN WITH Z CLEAR TO CONTINUE
   633
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 12
MCERR	MAC	17-Oct-88 14:28		CHANNEL BUS INTERFACE REGISTER BIT DEFINITIONS

   634					XLIST
   635					LIST
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 13
MCERR	MAC	17-Oct-88 14:28		CHANNEL BUS INTERFACE REGISTER BIT DEFINITIONS

   636					XLIST
   637					LIST
   638	000173	0 002200 0 1 0 200 	SENDAD:	LDBR	200			;SET UP CODE FOR HOST
   639	000174	0 100202 4 0 0202 		JMP	CALL
   640	000175	0 002001 0 1 0 001 	SETWRT:	LDBR	1			;SET UP CODE FOR HOST
   641	000176	0 100202 4 0 0202 		JMP	CALL
   642	000177	0 002002 0 1 0 002 	SETRD:	LDBR	2			;SET UP CODE FOR HOST
   643	000200	0 100202 4 0 0202 		JMP	CALL
   644	000201	0 002003 0 1 0 003 	SETRDB:	LDBR	3			;SET UP CODE FOR HOST
   645	000202	0 072131 3 5 0 05 11 	CALL:	MOVB	AC5			;SAVE CODE IN AC5
   646	000203	0 116067 4 7 0067 	CALL0:	JMPSUB	SAVIOS			;SAVE I/O SELECT REG., SELECT MASSBUS
   647	000204	0 062130 3 1 0 05 10 		MOV	AC5,BR			;GET CODE TO PASS TO HOST
   648	000205	0 064051 3 2 0 02 11 		MOVB	MPECR			;WRITE INTO ERROR CODE REGISTER
   649	000206	0 002200 0 1 0 200 		LDBR	ATA			;GET ATTENTION BIT
   650	000207	0 116076 4 7 0076 		JMPSUB	SETATA			;SET ATTENTION IN STATUS REGISTER
   651	000210	0 116003 4 7 0003 		JMPSUB	WAITGO			;WAIT FOR GO TO SET
   652	000211	0 116033 4 7 0033 		JMPSUB	OFFGO			;TURN GO OFF AGAIN
   653	000212	0 116073 4 7 0073 		JMPSUB	RESIOS			;RESTORE THE I/O SELECT REGISTER
   654	000213	0 016000 0 7 0 000 		RETURN				;RETURN, RH20 IS SET UP
   655
   656	000214	0 072131 3 5 0 05 11 	CKTRM:	MOVB	AC5			;SAVE MESSAGE NUMBER IN AC5
   657	000215	0 116067 4 7 0067 	CKTRM0:	JMPSUB	SAVIOS			;SAVE I/O SELECT REG., SELECT MASSBUS
   658	000216	0 062130 3 1 0 05 10 		MOV	AC5,BR			;GET MESSAGE NUMBER AGAIN
   659	000217	0 064051 3 2 0 02 11 		MOVB	MPECR			;WRITE IT INTO ERROR CODE REGISTER
   660	000220	0 002200 0 1 0 200 		LDBR	ATA			;GET ATTENTION BIT
   661	000221	0 100162 4 0 0162 		JMP	CHKLOP			;TELL HOST, DECIDE IF TO LOOP ON RESPONSE
   662
   663					XLIST
   664					LIST
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 14
MCERR	MAC	17-Oct-88 14:28		CHANNEL BUS INTERFACE REGISTER BIT DEFINITIONS

   665					;REPEAT TEST ROUTINE
   666
   667	000222	0 072147 3 5 0 06 07 	REPTU:	DECR	AC6			;DECREMENT REPEAT COUNT
   668	000223	0 114072 4 6 0072 		JMPZ	NRTN			;IF NOW -1, RETURN WITH Z CLEAR
   669	000224	0 016377 0 7 0 377 		RETURN	-1			;RETURN WITH Z SET TO REPEAT TEST
   670
   671					;REPORT END OF DIAGNOSTIC WITH 0 ERROR CODE AND 0 TEST NUMBER
   672
   673	000225	0 002011 0 1 0 011 	BEGEND:	LDBR	11			;SELECT MASSBUS INTERFACE
   674	000226	0 066371 3 3 0 17 11 		MOVB	IOSEL			;IN I/O SELECT REGISTER
   675	000227	0 002000 0 1 0 000 		LDBR	0			;GET A ZERO
   676	000230	0 064211 3 2 0 10 11 		MOVB	MPGP0			;MAKE TEST NUMBER 0
   677	000231	0 064231 3 2 0 11 11 		MOVB	MPGP1			;TO SAY END OF DIAGNOSTIC
   678	000232	0 002200 0 1 0 200 		LDBR	ATA			;GET ATTENTION BIT
   679	000233	0 064031 3 2 0 01 11 		MOVB	MPSCR1			;SET IT
   680	000234	0 116003 4 7 0003 		JMPSUB	WAITGO			;WAIT FOR GO TO SET
   681	000235	0 100001 4 0 0001 		JMP	BEGIN			;START DIAGNOSTIC OVER AGAIN
   682
   683
   684	000236				TSTART:					;COME HERE TO START THE TESTING
   685
   686
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 1
MCOD3M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 2

   687						SUBTTL	CHANNEL BUS INTERFACE TEST - PART 2
   688
   689					DEFTST	MCODE3
   690						TEST	175,TEST MICROBUS INIT DURING CHANNEL MODE XFER
   691					;***********************************************************************
   692					;* MCODE3 * TEST 175 *    TEST MICROBUS INIT DURING CHANNEL MODE XFER
   693					;***********************************************************************
   694						SALL
   695	000236	0 002011 0 1 0 011 
   696	000237	0 066371 3 3 0 17 11 
   697	000240	0 002000 0 1 0 000 
   698	000241	0 064231 3 2 0 11 11 
   699	000242	0 002257 0 1 0 257 
   700	000243	0 116045 4 7 0045 
   701
   702	000244				TST175:	SALL
   703
   704					;*TEST THAT A MICROBUS INIT CLEARS "DATA REQ DLY" AND "SLVE REQ".
   705					;*LOOP ENABLE IS SET FOR THIS TEST.
   706
   707					;*SET "CHANNEL MODE" THEN "HIGH SPEED".
   708					;*SET "SRV IN" TO SET "DATA REQ DLY" AND "SLVE REQ".
   709					;*DO A MICROBUS UNIT.
   710					;*CHECK THAT "DATA REQ DLY" AND "SLVE REQ" ARE CLEARED.
   711
   712	000244	0 002115 0 1 0 115 		GOSUB	INITL			;DO A MICROBUS INIT
   713	000245	0 177631 7 7 3 11 11 
   714	000246	0 002005 0 1 0 005 	INIT1:	LDBR	LOOPEN+CHANL		;SET LLOP ENABLE AND CHANNEL MODE
   715	000247	0 064031 3 2 0 01 11 		MOVB	CSR1
   716	000250	0 002105 0 1 0 105 		LDBR	LOOPEN+DIHISP+CHANL	;SET "HIGH SPEED"
   717	000251	0 064031 3 2 0 01 11 		MOVB	CSR1
   718	000252	0 002154 0 1 0 154 		GOSUB	DEVWR			;SET DATA TO DEVICE
   719	000253	0 177631 7 7 3 11 11 
   720	000254	0 002260 0 1 0 260 		GOSUB	DPINIT			;DO A DATA PATH INIT
   721	000255	0 177631 7 7 3 11 11 
   722	000256	0 002145 0 1 0 145 		GOSUB	DEVRD			;CLEAR DATA TO DEVICE
   723	000257	0 177631 7 7 3 11 11 
   724	000260	0 002200 0 1 0 200 		LDBR	SRVINL			;SET "SRV IN"
   725	000261	0 064071 3 2 0 03 11 		MOVB	TOR1
   726	000262	0 002115 0 1 0 115 		GOSUB	INITL			;DO A MICROBUS INIT
   727	000263	0 177631 7 7 3 11 11 
   728	000264	0 002232 0 1 0 232 		GOSUB	RDRDLY			;READ "NOT DATA REQ DLY"
   729	000265	0 177631 7 7 3 11 11 
   730	000266	0 104270 4 2 0270 		JMPB0	.+2			;JUMP IF SET, SHOULD BE
   731	000267	0 116104 4 7 0104 		ERROR	INIT1,"DATA REQ DLY" DIDN'T CLEAR AFTER MICROBUS INIT
   732
   733						ERLOOP	INIT1			^SALL
   734	000270	0 002000 0 1 0 000 
   735	000271	0 116141 4 7 0141 
   736	000272	0 114246 4 6 0246 
   737	000273	0 002227 0 1 0 227 		GOSUB	RDSLRQ			;READ "SLVE REQ"
   738	000274	0 177631 7 7 3 11 11 
   739	000275	0 104277 4 2 0277 		JMPB0	.+2			;JUMP IF IT DIDN'T CLEAR
   740	000276	0 100300 4 0 0300 		JMP	.+2			;ELSE, OKAY
   741	000277	0 116104 4 7 0104 		ERROR	INIT1,"SLVE REQ" DIDN'T CLEAR AFTER MICROBUS INIT
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 1-1
MCOD3M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 2

   742
   743						ERLOOP	INIT1			^SALL
   744	000300	0 002001 0 1 0 001 
   745	000301	0 116141 4 7 0141 
   746	000302	0 114246 4 6 0246 
   747	000303	0 116222 4 7 0222 		REPEAT	TST
   748	000304	0 114244 4 6 0244 
   749
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 2
MCOD3M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 2

   750						TEST	176,TEST SCRATCH PAD (SP) ADDRESS COUNTER
   751					;***********************************************************************
   752					;* MCODE3 * TEST 176 *    TEST SCRATCH PAD (SP) ADDRESS COUNTER
   753					;***********************************************************************
   754						SALL
   755	000305	0 002260 0 1 0 260 
   756	000306	0 116045 4 7 0045 
   757
   758	000307				TST176:	SALL
   759
   760					;*VERIFY THAT THE SP ADR COUNTER DECREMENTS CORRECTLY WHEN
   761					;*	(1) REGISTER 10 (SP DATA) IS LOADED, OR
   762					;*	(2) A "CLK BOR" PULSE IS GENERATED.
   763					;*SP ENABLE AND CHANNEL MODE ARE SET FOR THESE TESTS.
   764
   765					;*LOAD SP ADDR WITH TEST DATA.
   766					;*PERFORM A LOAD TO REG 10.
   767					;*CHECK THAT SP ADDR IS DECREMENTED.
   768					;*REPEAT FOR TEST DATA (17-0).
   769					;*LOOP ENABLE IS NOT SET FOR THIS TEST.
   770
   771	000307	0 002201 0 1 0 201 		LDBR	SPEN+CHANL		;SET SP ENABLE AND CHANNEL MODE
   772	000310	0 064031 3 2 0 01 11 		MOVB	CSR1
   773	000311	0 002017 0 1 0 017 		LDBR	17			;SET TEST DATA AND LOOP CNT -1
   774	000312	0 072031 3 5 0 01 11 		MOVB	AC1
   775	000313	0 002016 0 1 0 016 		LDBR	16			;SET EXPECTED DATA
   776	000314	0 072051 3 5 0 02 11 		MOVB	AC2
   777	000315	0 062030 3 1 0 01 10 	SPADLP:	MOV	AC1,BR
   778	000316	0 064131 3 2 0 05 11 		MOVB	SPADR			;LOAD TEST DATA
   779	000317	0 064211 3 2 0 10 11 		MOVB	SPDALO			;LOAD REG 10
   780	000320	0 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
   781	000321	0 032005 1 5 0 00 05 		DATI	SPADR,AC0		;READ DEC'D SP ADDR.
   782	000322	0 002017 0 1 0 017 		LDBR	17			;SETUP MASK FOR SP ADDR BITS
   783	000323	0 072013 3 5 0 00 13 		LANDBR	AC0			;ISOLATE SP ADDR BITS
   784	000324	0 070053 3 4 0 02 13 		LANDB	AC2,MEM			;PUT MASKED EXPECTED DATA INTO MEMORY
   785	000325	0 040017 2 0 0 00 17 		OSM	AC0			;COMPARE
   786	000326	0 114330 4 6 0330 		JMPZ	.+2			;JUMP IF DEC'D DATA OKAY
   787						ERRORM	SPADLP,SP ADDR COUNTER DIDN'T DECREMENT CORRECTLY,^_
   788	000327	0 116104 4 7 0104 	DIAG LOADED SP ADDR WITH "CORRECT"+1 THEN LOADED REG 10
   789
   790						ERLOOP	SPADLP			^SALL
   791	000330	0 002100 0 1 0 100 
   792	000331	0 116145 4 7 0145 
   793	000332	0 114315 4 6 0315 
   794	000333	0 072047 3 5 0 02 07 		DECR	AC2			;DEC CORRECT DATA
   795	000334	0 072027 3 5 0 01 07 		DECR	AC1			;DEC TEST DATA AND LOOP CNT
   796	000335	0 114337 4 6 0337 		JMPZ	.+2			;JUMP IF DONE
   797	000336	0 100315 4 0 0315 		JMP	SPADLP			;ELSE, CONTINUE
   798
   799					;*LOAD SP ADDR WITH TEST DATA.
   800					;*GENERATE A "CLK BOR" PULSE BY PULSING "DATA REQ".
   801					;*CHECK THAT SP ADDR IS DECREMENTED.
   802					;*LOOP ENABLE IS SET FOR THIS TEST.
   803
   804	000337	0 002205 0 1 0 205 	SPAD1:	LDBR	SPEN+LOOPEN+CHANL	;SET LOOP ENABLE
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 2-1
MCOD3M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 2

   805	000340	0 064031 3 2 0 01 11 		MOVB	CSR1
   806	000341	0 002010 0 1 0 010 		LDBR	10			;LOAD SP ADDR WITH TEST DATA
   807	000342	0 064131 3 2 0 05 11 		MOVB	SPADR
   808	000343	0 002200 0 1 0 200 		LDBR	SRVINL			;SET "SRV IN" TO GEN "DATA REQ"
   809	000344	0 064071 3 2 0 03 11 		MOVB	TOR1
   810	000345	0 002000 0 1 0 000 		LDBR	0			;CLEAR "SRV IN"
   811	000346	0 064071 3 2 0 03 11 		MOVB	TOR1
   812	000347	0 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
   813	000350	0 032005 1 5 0 00 05 		DATI	SPADR,AC0		;READ DEC'D SP ADDR.
   814	000351	0 010007 0 4 0 007 		LDMEM	7			;SETUP CORRECT DATA
   815	000352	0 040017 2 0 0 00 17 		OSM	AC0			;COMPARE
   816	000353	0 114355 4 6 0355 		JMPZ	.+2			;JUMP IF DEC'D DATA OKAY
   817						ERRORM	SPAD1, SP ADDR COUNTER DIDN'T DECREMENT CORRECTLY,^_
   818	000354	0 116104 4 7 0104 	DIAG LOAD SP ADDR WITH 10 THEN TOGGLED "DATA REQ"
   819
   820						ERLOOP	SPAD1			^SALL
   821	000355	0 002101 0 1 0 101 
   822	000356	0 116145 4 7 0145 
   823	000357	0 114337 4 6 0337 
   824					;*CLEAR "SP EN".
   825					;*DO A LOAD TO REG 10.
   826					;*CHECK THAT SP ADDR COUNTER DID NOT DECREMENT.
   827
   828	000360	0 002001 0 1 0 001 	SPAD2:	LDBR	CHANL			;CLEAR "SP ENABLE"
   829	000361	0 064031 3 2 0 01 11 		MOVB	CSR1
   830	000362	0 010017 0 4 0 017 		LDMEM	17			;LOAD SP ADDR
   831	000363	0 044131 2 2 0 05 11 		MOVMEM	SPADR
   832	000364	0 064211 3 2 0 10 11 		MOVB	SPDALO			;WRITE REG 10 TO CLK SP ADDR CTR
   833	000365	0 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
   834	000366	0 032005 1 5 0 00 05 		DATI	SPADR,AC0		;READ SP ADDR BITS
   835	000367	0 052013 2 5 0 00 13 		LANDMR	AC0			;ISOLATE THEM
   836	000370	0 040017 2 0 0 00 17 		OSM	AC0			;COMPARE
   837	000371	0 114373 4 6 0373 		JMPZ	.+2			;JUMP IF SP ADDR DIDN'T DEC
   838	000372	0 116104 4 7 0104 		ERROR	SPAD2,SP ADDR COUNTER DECREMENTED WITH "SP EN" CLEARED
   839
   840						ERLOOP	SPAD2			^SALL
   841	000373	0 002002 0 1 0 002 
   842	000374	0 116141 4 7 0141 
   843	000375	0 114360 4 6 0360 
   844	000376	0 116222 4 7 0222 		REPEAT	TST
   845	000377	0 114307 4 6 0307 
   846
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 3
MCOD3M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 2

   847						TEST	177,TEST BORLO AND BUS0 PARITY NETWORKS
   848					;***********************************************************************
   849					;* MCODE3 * TEST 177 *    TEST BORLO AND BUS0 PARITY NETWORKS
   850					;***********************************************************************
   851						SALL
   852	000400	0 002261 0 1 0 261 
   853	000401	0 116045 4 7 0045 
   854
   855	000402				TST177:	SALL
   856
   857					;*TEST THE PROPER GENERATION OF BORLO PARITY AND THE PROPER DETECTION
   858					;*OF BUS0 PARITY.
   859					;*LOOP ENABLE IS SET FOR THIS TEST.
   860					;*THE DATA PATTERNS USED WERE SPECIFICALLY DESIGNED TO TEST THE 74S280 CHIP.
   861
   862					;*CLEAR "EVEN PAR".
   863					;*LOAD BORLO WITH AN EVEN PARITY DATA PATTERN.
   864					;*CHECK THAT "BOR P0" IS NOT SET.
   865					;*CHECK THAT "BUS0 ODD PAR" IS SET.
   866					;*REPEAT FOR 4 DIFFERENT PATTERNS.
   867
   868	000402	0 001000 0 0 2 000 		LDMAR	0			;CLEAR MAR
   869	000403	0 010001 0 4 0 001 		LDMEM	1			;SET ADDITIONAL PNT ROUTINE NUMBER
   870	000404	0 002163 0 1 0 163 		GOSUB	SETPNT
   871	000405	0 177631 7 7 3 11 11 
   872	000406	0 002044 0 1 0 044 		LDBR	LOOPEN+EVPAR		;SET LOOP ENABLE
   873	000407	0 064031 3 2 0 01 11 		MOVB	CSR1
   874	000410	0 002003 0 1 0 003 		LDBR	3			;SET LOOP CNT MINUS 1
   875	000411	0 072031 3 5 0 01 11 		MOVB	AC1
   876	000412	0 001133 0 0 2 133 		LDMAR	EPATS			;SET MAR TO DATA PATTERN ADDR.
   877	000413	0 044231 2 2 0 11 11 	PARLP1:	MOVMEM	BORLO			;LOAD DATA PATTERN
   878	000414	0 002171 0 1 0 171 		GOSUB	SETDAT			;GO SETUP PRINT DATA
   879	000415	0 177631 7 7 3 11 11 
   880	000416	0 002177 0 1 0 177 		GOSUB	RDBRP0			;READ "BOR P0"
   881	000417	0 177631 7 7 3 11 11 
   882	000420	0 104422 4 2 0422 		JMPB0	.+2			;JUMP IF SET, SHOULDN'T BE
   883	000421	0 100423 4 0 0423 		JMP	.+2			;ELSE, OKAY
   884						ERROR	PARLP1,<"BOR P0" SET WITH "EVEN PAR" CLEARED AND BORLO
   885	000422	0 116104 4 7 0104 	LOADED WITH EVEN PARITY DATA>,,PNT
   886
   887						ERLOOP	PARLP1			^SALL
   888	000423	0 002200 0 1 0 200 
   889	000424	0 116141 4 7 0141 
   890	000425	0 114413 4 6 0413 
   891	000426	0 002202 0 1 0 202 		GOSUB	RDB0OD			;READ "BUS0 ODD PAR"
   892	000427	0 177631 7 7 3 11 11 
   893	000430	0 104432 4 2 0432 		JMPB0	.+2			;JUMP IF SET, SHOULD BE
   894						ERROR	PARLP1,"BUS0 ODD PAR" DID NOT SET,^_
   895	000431	0 116104 4 7 0104 	DIAG LOOPED EVEN PARITY BORLO DATA INTO CBI BITS WITH "BOR P0" CLEARED,PNT
   896
   897						ERLOOP	PARLP1			^SALL
   898	000432	0 002201 0 1 0 201 
   899	000433	0 116141 4 7 0141 
   900	000434	0 114413 4 6 0413 
   901	000435	0 073427 3 5 3 01 07 		DECR	AC1,I			;DEC LOOP CNT AND INC PATTERN ADDR.
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 3-1
MCOD3M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 2

   902	000436	0 114440 4 6 0440 		JMPZ	.+2			;JUMP IF DONE
   903	000437	0 100413 4 0 0413 		JMP	PARLP1			;ELSE, CONTINUE
   904
   905					;*SET "EVEN PAR".
   906					;*LOAD BORLO WITH AN EVEN PARITY DATA PATTERN.
   907					;*CHECK THAT "BOR P0" IS SET.
   908					;*CHECK THAT "BUS0 ODD PAR" IS NOT SET.
   909					;*REPEAT FOR 4 DIFFERENT PATTERNS.
   910
   911	000440	0 002004 0 1 0 004 		LDBR	LOOPEN			;SET "EVEN PAR"
   912	000441	0 064031 3 2 0 01 11 		MOVB	CSR1
   913	000442	0 002003 0 1 0 003 		LDBR	3			;SET LOOP CNT MINUS 1
   914	000443	0 072031 3 5 0 01 11 		MOVB	AC1
   915	000444	0 001137 0 0 2 137 		LDMAR	OPATS			;SET MAR TO DATA PATTERN ADDR.
   916	000445	0 044231 2 2 0 11 11 	PARLP2:	MOVMEM	BORLO			;LOAD DATA PATTERN
   917	000446	0 002171 0 1 0 171 		GOSUB	SETDAT			;GO SETUP PRINT DATA
   918	000447	0 177631 7 7 3 11 11 
   919	000450	0 002177 0 1 0 177 		GOSUB	RDBRP0			;READ "BOR P0"
   920	000451	0 177631 7 7 3 11 11 
   921	000452	0 104454 4 2 0454 		JMPB0	.+2			;JUMP IF SET,SHOULD BE
   922						ERROR	PARLP2,<"BOR P0" DIDN'T SET WITH "EVEN PAR" SET AND BORLO
   923	000453	0 116104 4 7 0104 	LOADED WITH EVEN PARITY DATA>,,PNT
   924
   925						ERLOOP	PARLP2			^SALL
   926	000454	0 002202 0 1 0 202 
   927	000455	0 116141 4 7 0141 
   928	000456	0 114445 4 6 0445 
   929	000457	0 002202 0 1 0 202 		GOSUB	RDB0OD			;READ "BUS0 ODD PAR"
   930	000460	0 177631 7 7 3 11 11 
   931	000461	0 104463 4 2 0463 		JMPB0	.+2			;JUMP IF SET, SHOULDN'T BE
   932	000462	0 100464 4 0 0464 		JMP	.+2			;ELSE, OKAY
   933						ERROR	PARLP2,"BUS0 ODD PAR" SET WHEN IT SHOULDN'T HAVE,^_
   934	000463	0 116104 4 7 0104 	DIAG LOOPED EVEN PARITY BORLO DATA INTO CBI BITS WITH "BOR P0" SET,PNT
   935
   936						ERLOOP	PARLP2			^SALL
   937	000464	0 002203 0 1 0 203 
   938	000465	0 116141 4 7 0141 
   939	000466	0 114445 4 6 0445 
   940	000467	0 073427 3 5 3 01 07 		DECR	AC1,I			;DEC LOOP CNT AND INC PATTERN ADDR.
   941	000470	0 114472 4 6 0472 		JMPZ	.+2			;JUMP IF DONE
   942	000471	0 100445 4 0 0445 		JMP	PARLP2			;ELSE, CONTINUE
   943	000472	0 116222 4 7 0222 		REPEAT	TST
   944	000473	0 114402 4 6 0402 
   945
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 4
MCOD3M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 2

   946						TEST	178,TEST "BUS0 PE FLAG"
   947					;***********************************************************************
   948					;* MCODE3 * TEST 178 *    TEST "BUS0 PE FLAG"
   949					;***********************************************************************
   950						SALL
   951	000474	0 002262 0 1 0 262 
   952	000475	0 116045 4 7 0045 
   953
   954	000476				TST178:	SALL
   955
   956					;*TEST THAT "BUS0 PE FLAG" IS SET WHEN "BUS0 ODD PAR" IS CLEARED AND
   957					;*	(1) REG 7 IS READ, OR
   958					;*	(2) "CHK BUS IN PAR" IS GENERATED.
   959					;*VERIFY THAT IT STAYS SET AND IS CLEARED ONLY BY A MICROBUS INIT OR
   960					;*WRITING BIT 1 OF REG 0.
   961					;*LOOP ENABLE IS SET FOR THIS TEST.
   962
   963					;*CLEAR "EVEN PAR", THIS CAUSES "BUS0 ODD PAR" TO CLEAR
   964					;*READ REG 7.
   965					;*CHECK THAT "BUS0 PE FLAG" IS SET.
   966
   967	000476	0 002002 0 1 0 002 		LDBR	CLRFLG			;CLEAR FLAGS
   968	000477	0 064011 3 2 0 00 11 		MOVB	CSR0
   969	000500	0 002004 0 1 0 004 		LDBR	LOOPEN			;SET LOOP ENABLE
   970	000501	0 064031 3 2 0 01 11 		MOVB	CSR1
   971	000502	0 020007 1 0 0 00 07 		DATI	CBILO			;READ REG 7
   972	000503	0 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
   973	000504	0 022000 1 1 0 00 00 		DATI	CSR0,BR			;READ "BUS0 PE FLAG"
   974	000505	0 014000 0 6 0 000 		SHR				;RIGHT ADJUST IT
   975	000506	0 104510 4 2 0510 		JMPB0	.+2			;JUMP IF SET, SHOULD BE
   976						ERROR	TST,"BUS0 PE FLAG" DIDN'T SET,^_
   977	000507	0 116104 4 7 0104 	DIAG CLEARED "BUS0 ODD PAR" THEN READ REG 7
   978
   979						ERLOOP	TST			^SALL
   980	000510	0 002000 0 1 0 000 
   981	000511	0 116141 4 7 0141 
   982	000512	0 114476 4 6 0476 
   983					;*CHECK THAT IT CAUSES AN INTERRUPT.
   984
   985	000513	0 102167 4 1 0167 		JMPI	ZRTN			;JUMP IF INTERRUPT OCCUR
   986	000514	0 114516 4 6 0516 		JMPZ	.+2			;JUMP IF INTERRUPT JUMP TAKEN
   987	000515	0 116104 4 7 0104 		ERROR	TST,"BUS0 PE FLAG" DIDN'T CAUSE AN INTERRUPT
   988
   989						ERLOOP	TST			^SALL
   990	000516	0 002001 0 1 0 001 
   991	000517	0 116141 4 7 0141 
   992	000520	0 114476 4 6 0476 
   993					;*SET "EVEN PAR" TO SET "BUS0 ODD PAR".
   994					;*READ REG 7.
   995					;*CHECK THAT "BUS0 PE FLAG" STAYED SET.
   996
   997	000521	0 002044 0 1 0 044 		LDBR	LOOPEN+EVPAR		;SET "EVEN PAR"
   998	000522	0 064031 3 2 0 01 11 		MOVB	CSR1
   999	000523	0 020007 1 0 0 00 07 		DATI	CBILO			;READ REG 7
  1000	000524	0 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 4-1
MCOD3M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 2

  1001	000525	0 022000 1 1 0 00 00 		DATI	CSR0,BR			;READ "BUS0 PE FLAG"
  1002	000526	0 014000 0 6 0 000 		SHR				;RIGHT ADJUST IT
  1003	000527	0 104531 4 2 0531 		JMPB0	.+2			;JUMP IF IT STAYED SET
  1004						ERROR	TST,"BUS0 PE FLAG" DIDN'T STAY SET,^_
  1005	000530	0 116104 4 7 0104 	DIAG SET "BUS0 PE FLAG" THEN SET "BUS0 ODD PAR" AND READ REG 7
  1006
  1007						ERLOOP	TST			^SALL
  1008	000531	0 002002 0 1 0 002 
  1009	000532	0 116141 4 7 0141 
  1010	000533	0 114476 4 6 0476 
  1011
  1012					;*DO A MICROBUS INIT.
  1013					;*CHECK THAT "BUS0 PE FLAG" CLEARS.
  1014
  1015	000534	0 002115 0 1 0 115 	B0PE1:	GOSUB	INITL			;DO A MICROBUS INIT
  1016	000535	0 177631 7 7 3 11 11 
  1017	000536	0 022000 1 1 0 00 00 		DATI	CSR0,BR			;READ "BUS0 PE FLAG"
  1018	000537	0 014000 0 6 0 000 		SHR				;RIGHT ADJUST IT
  1019	000540	0 104542 4 2 0542 		JMPB0	.+2			;JUMP IF DIDN'T CLEAR
  1020	000541	0 100543 4 0 0543 		JMP	.+2			;ELSE, OKAY.
  1021	000542	0 116104 4 7 0104 		ERROR	TST,"BUS0 PE FLAG" DIDN'T CLEAR AFTER MICROBUS INIT
  1022
  1023						ERLOOP	TST			^SALL
  1024	000543	0 002003 0 1 0 003 
  1025	000544	0 116141 4 7 0141 
  1026	000545	0 114476 4 6 0476 
  1027					;*CLEAR "EVEN PAR" AND "DATA TO DEV".
  1028					;*SET "CHANNEL MODE" AND "HIGH SPEED".
  1029					;*SET "SRV IN" TO GENERATE "CHK BUS IN PAR".
  1030					;*CHECK THAT "BUS0 PE FLAG" IS SET.
  1031
  1032	000546	0 002005 0 1 0 005 	B0PE2:	LDBR	LOOPEN+CHANL		;CLEAR "EVEN PAR" AND SET "CHANNEL MODE"
  1033	000547	0 064031 3 2 0 01 11 		MOVB	CSR1
  1034	000550	0 002105 0 1 0 105 		LDBR	LOOPEN+CHANL+DIHISP	;SET "HIGH SPEED"
  1035	000551	0 064031 3 2 0 01 11 		MOVB	CSR1
  1036	000552	0 002145 0 1 0 145 		GOSUB	DEVRD			;CLEAR "DATA TO DEV"
  1037	000553	0 177631 7 7 3 11 11 
  1038	000554	0 002200 0 1 0 200 		LDBR	SRVINL			;SET AND CLEAR "SRV IN"
  1039	000555	0 064071 3 2 0 03 11 		MOVB	TOR1
  1040	000556	0 002000 0 1 0 000 		LDBR	0
  1041	000557	0 064071 3 2 0 03 11 		MOVB	TOR1
  1042	000560	0 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  1043	000561	0 022000 1 1 0 00 00 		DATI	CSR0,BR			;READ "BUS0 PE FLAG"
  1044	000562	0 014000 0 6 0 000 		SHR				;RIGHT ADJUST IT.
  1045	000563	0 104565 4 2 0565 		JMPB0	.+2			;JUMP IF SET
  1046						ERROR	B0PE1,"BUS0 PE FLAG" DIDN'T SET,^_
  1047	000564	0 116104 4 7 0104 	DIAG CLEARED "BUS0 ODD PAR" THEN SET "DATA REQ" WITH "DATA TO DEVICE" CLEARED
  1048
  1049						ERLOOP	B0PE1			^SALL
  1050	000565	0 002004 0 1 0 004 
  1051	000566	0 116141 4 7 0141 
  1052	000567	0 114534 4 6 0534 
  1053					;*WRITE BIT 1 OF REG 0
  1054					;*CHECK THAT "BUS0 PE FLAG" CLEARS.
  1055
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 4-2
MCOD3M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 2

  1056	000570	0 002002 0 1 0 002 	B0PE3:	LDBR	CLRFLG			;ATTEMPT TO CLEAR "BUS0 PE FLAG"
  1057	000571	0 064011 3 2 0 00 11 		MOVB	CSR0
  1058	000572	0 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  1059	000573	0 022000 1 1 0 00 00 		DATI	CSR0,BR			;READ "BUS0 PE FLAG"
  1060	000574	0 014000 0 6 0 000 		SHR				;RIGHT ADJUST IT
  1061	000575	0 104577 4 2 0577 		JMPB0	.+2			;JUMP IF IT DIDN'T CLEAR
  1062	000576	0 100600 4 0 0600 		JMP	.+2			;ELSE, OKAY
  1063	000577	0 116104 4 7 0104 		ERROR	B0PE2,"BUS0 PE FLAG" DIDN'T CLEAR WHEN BIT 1 OF REG 0 WAS WRITTEN
  1064
  1065						ERLOOP	B0PE2			^SALL
  1066	000600	0 002005 0 1 0 005 
  1067	000601	0 116141 4 7 0141 
  1068	000602	0 114546 4 6 0546 
  1069					;*SET "DATA TO DEVICE" TO INHIBIT "CHK BUS IN PAR".
  1070					;*SET "SRV IN".
  1071					;*CHECK THAT "BUS0 PE FLAG" DOES NOT SET.
  1072
  1073	000603	0 002154 0 1 0 154 		GOSUB	DEVWR			;SET "DATA TO DEV"
  1074	000604	0 177631 7 7 3 11 11 
  1075	000605	0 002200 0 1 0 200 		LDBR	SRVINL			;SET AND CLEAR "SRV IN"
  1076	000606	0 064071 3 2 0 03 11 		MOVB	TOR1
  1077	000607	0 002000 0 1 0 000 		LDBR	0
  1078	000610	0 064071 3 2 0 03 11 		MOVB	TOR1
  1079	000611	0 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  1080	000612	0 022000 1 1 0 00 00 		DATI	CSR0,BR			;READ "BUS0 PE FLAG"
  1081	000613	0 014000 0 6 0 000 		SHR				;RIGHT ADJUST IT.
  1082	000614	0 104616 4 2 0616 		JMPB0	.+2			;JUMP IF SET, SHOULDN'T BE
  1083	000615	0 100617 4 0 0617 		JMP	.+2			;ELSE, OKAY
  1084						ERROR	B0PE3,"CHK BUS IN PAR" SET WITH "DATA TO DEVICE" SET,^_
  1085	000616	0 116104 4 7 0104 	DIAG SET "SRV IN" AND "BUS0 PE FLAG" GOT SET
  1086
  1087						ERLOOP	B0PE3			^SALL
  1088	000617	0 002006 0 1 0 006 
  1089	000620	0 116141 4 7 0141 
  1090	000621	0 114570 4 6 0570 
  1091	000622	0 116222 4 7 0222 		REPEAT	TST
  1092	000623	0 114476 4 6 0476 
  1093
  1094
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 5
MCOD3M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 2

  1095						TEST	179,TEST "DP PE" AND "DP PE FLAG"
  1096					;***********************************************************************
  1097					;* MCODE3 * TEST 179 *    TEST "DP PE" AND "DP PE FLAG"
  1098					;***********************************************************************
  1099						SALL
  1100	000624	0 002263 0 1 0 263 
  1101	000625	0 116045 4 7 0045 
  1102
  1103	000626				TST179:	SALL
  1104
  1105					;*TEST THE "DP PE" PARITY DETECTING NETWORK BY CLOCKING DATA PATTERNS
  1106					;*FROM THE BORLO REG INTO THE DRLO REG AND ONTO THE SLAVE DATA LINES.
  1107					;*ALSO, CHECK THAT "DP PE FLAG" SETS WHEN "DP PE" IS SET AND
  1108					;*"SLVE REQ" IS CLEARED.  VERIFY THAT IT STAYS SET AND IS CLEARED
  1109					;*BY WRITING BIT 1 OF REG 0.
  1110
  1111					;*LOOP ENABLE IS SET FOR THIS TEST.
  1112
  1113					;*CLEAR "DATA TO DEV" AND "EVEN PAR".
  1114					;*SET CHANNEL MODE AND HIGH SPEED.
  1115					;*LOAD ALL 1'S INTO BORLO.
  1116					;*SET "SRV IN" TO GENERATE "CLK DR BYTE 0" PULSE WHICH
  1117					;*CLOCKS CBI (ALL ZERO INCLUDING PARITY) INTO THE DRLO REG.
  1118					;*CHECK THAT "DP PE" IS SET.
  1119
  1120	000626	0 002115 0 1 0 115 		GOSUB	INITL			;DO A MICROBUS INIT
  1121	000627	0 177631 7 7 3 11 11 
  1122	000630	0 010002 0 4 0 002 		LDMEM	2			;SETUP ADDITIONAL PNT ROUTINE NUMBER
  1123	000631	0 002163 0 1 0 163 		GOSUB	SETPNT
  1124	000632	0 177631 7 7 3 11 11 
  1125	000633	0 002145 0 1 0 145 		GOSUB	DEVRD			;CLEAR "DATA TO DEV"
  1126	000634	0 177631 7 7 3 11 11 
  1127	000635	0 002377 0 1 0 377 		LDBR	-1			;LOAD ALL 1'S INTO BORLO, CAUSES
  1128	000636	0 064231 3 2 0 11 11 		MOVB	BORLO			;CBI TO BE ALL ZEROS, INCLUDING PARITY
  1129	000637	0 002005 0 1 0 005 		LDBR	LOOPEN+CHANL		;SET LOOP ENABLE AND CHANNEL MODE
  1130	000640	0 064031 3 2 0 01 11 		MOVB	CSR1
  1131	000641	0 002105 0 1 0 105 		LDBR	LOOPEN+DIHISP+CHANL	;SET "HIGH SPEED"
  1132	000642	0 064031 3 2 0 01 11 		MOVB	CSR1
  1133	000643	0 002200 0 1 0 200 		LDBR	SRVINL			;SET "SRV IN"
  1134	000644	0 064071 3 2 0 03 11 		MOVB	TOR1
  1135	000645	0 002251 0 1 0 251 		GOSUB	RDDPPE			;READ "DP PE"
  1136	000646	0 177631 7 7 3 11 11 
  1137	000647	0 104651 4 2 0651 		JMPB0	.+2			;JUMP IF SET, SHOULD BE
  1138						ERROR	TST,"DP PE" DIDN'T SET,^_
  1139	000650	0 116104 4 7 0104 	DIAG CLOCKED ALL ZEROS (INCLUDING PARITY) INTO DRLO WITH "DATA TO DEV" CLEARED
  1140
  1141						ERLOOP	TST			^SALL
  1142	000651	0 002000 0 1 0 000 
  1143	000652	0 116141 4 7 0141 
  1144	000653	0 114626 4 6 0626 
  1145					;*CLEAR "SLVE REQ".
  1146					;*CHECK THE "DP PE FLAG" SETS
  1147
  1148	000654	0 064111 3 2 0 04 11 		MOVB	CLSLRQ			;CLEAR "SLVE REQ"
  1149	000655	0 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 5-1
MCOD3M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 2

  1150	000656	0 022000 1 1 0 00 00 		DATI	CSR0,BR			;READ "DP PE FLAG"
  1151	000657	0 014000 0 6 0 000 		SHR				;MOVE IT TO BIT 4
  1152	000660	0 106662 4 3 0662 		JMPB4	.+2			;JMP IF SET, SHOULD BE
  1153						ERROR	TST,"DP PE FLAG" DIDN'T SET,^_
  1154	000661	0 116104 4 7 0104 	DIAG SET "DP PE" THEN SET AND CLEARED "SLVE REQ"
  1155
  1156						ERLOOP	TST			^SALL
  1157	000662	0 002001 0 1 0 001 
  1158	000663	0 116141 4 7 0141 
  1159	000664	0 114626 4 6 0626 
  1160					;*CHECK THAT "DP PE FLAG" CAUSED AN INTERRUPT.
  1161
  1162	000665	0 102167 4 1 0167 		JMPI	ZRTN			;JUMP IF INTERRUPT OCCURRED
  1163	000666	0 114670 4 6 0670 		JMPZ	.+2			;JUMP IF INTERRUPT JUMP WAS TAKEN
  1164	000667	0 116104 4 7 0104 		ERROR	TST,"DP PE FLAG" DID NOT CAUSE INTERRUPT
  1165
  1166						ERLOOP	TST			^SALL
  1167	000670	0 002002 0 1 0 002 
  1168	000671	0 116141 4 7 0141 
  1169	000672	0 114626 4 6 0626 
  1170					;*CLEAR "SRV IN".
  1171					;*SET "EVEN PAR".
  1172					;*LOAD BORLO WITH ALL 0'S.
  1173					;*SET "SRV IN" TO GENERATE "CLK DR BYTE 0" PULSE WHICH
  1174					;*CLOCKS CBI (ALL 1'S INCLUDING PARITY) INTO DR REG.
  1175					;*CHECK THAT "DP PE" IS CLEARED.
  1176
  1177	000673	0 002000 0 1 0 000 		LDBR	0			;CLEAR "SRV IN"
  1178	000674	0 064071 3 2 0 03 11 		MOVB	TOR1
  1179	000675	0 002145 0 1 0 145 		LDBR	LOOPEN+DIHISP+CHANL+EVPAR	;SET EV PAR
  1180	000676	0 064031 3 2 0 01 11 		MOVB	CSR1
  1181	000677	0 002000 0 1 0 000 		LDBR	0			;LOAD ALL 0'S INTO BORLO
  1182	000700	0 064231 3 2 0 11 11 		MOVB	BORLO
  1183	000701	0 002200 0 1 0 200 		LDBR	SRVINL			;SET "SRV IN"
  1184	000702	0 064071 3 2 0 03 11 		MOVB	TOR1
  1185	000703	0 002251 0 1 0 251 		GOSUB	RDDPPE			;READ "DP PE"
  1186	000704	0 177631 7 7 3 11 11 
  1187	000705	0 104707 4 2 0707 		JMPB0	.+2			;JUMP IF SET, SHOULDN'T BE
  1188	000706	0 100710 4 0 0710 		JMP	.+2			;ELSE, OKAY
  1189						ERROR	TST,"DP PE" SET WHEN IT SHOULDN'T HAVE,^_
  1190	000707	0 116104 4 7 0104 	DIAG CLOCKED ALL ONES (INCLUDING PARITY) INTO DRLO WITH "DATA TO DEV" CLEARED
  1191
  1192						ERLOOP	TST			^SALL
  1193	000710	0 002003 0 1 0 003 
  1194	000711	0 116141 4 7 0141 
  1195	000712	0 114626 4 6 0626 
  1196					;*CLEAR "SLVE REQ".
  1197					;*CHECK THAT "DP PE FLAG" STAYS SET.
  1198
  1199	000713	0 064111 3 2 0 04 11 		MOVB	CLSLRQ			;CLEAR "SLVE REQ"
  1200	000714	0 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  1201	000715	0 022000 1 1 0 00 00 		DATI	CSR0,BR			;READ "DP PE FLAG"
  1202	000716	0 014000 0 6 0 000 		SHR				;MOVE IT TO BIT 4
  1203	000717	0 106721 4 3 0721 		JMPB4	.+2			;JUMP IF STILL SET
  1204						ERROR	TST,"DP PE FLAG" DIDN'T STAY SET,^_
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 5-2
MCOD3M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 2

  1205	000720	0 116104 4 7 0104 	DIAG SET "DP PE FLAG" THEN CLEARED "DP PE" AND SET AND CLEARED "SLVE REQ"
  1206
  1207						ERLOOP	TST			^SALL
  1208	000721	0 002004 0 1 0 004 
  1209	000722	0 116141 4 7 0141 
  1210	000723	0 114626 4 6 0626 
  1211					;*WRITE BIT 1 OF REG 0.
  1212					;*CHECK THAT "DP PE FLAG" CLEARS.
  1213
  1214
  1215	000724	0 002002 0 1 0 002 		LDBR	CLRFLG			;WRITE BIT 1 OF REG 0
  1216	000725	0 064011 3 2 0 00 11 		MOVB	CSR0
  1217	000726	0 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  1218	000727	0 022000 1 1 0 00 00 		DATI	CSR0,BR			;READ "DP PE FLAG"
  1219	000730	0 014000 0 6 0 000 		SHR				;MOVE IT TO BIT 4
  1220	000731	0 106733 4 3 0733 		JMPB4	.+2			;JUMP IF IT DIDN'T CLEAR
  1221	000732	0 100734 4 0 0734 		JMP	.+2			;ELSE, OKAY
  1222	000733	0 116104 4 7 0104 		ERROR	TST,"DP PE FLAG" DIDN'T CLEAR WHEN BIT 1 OF REG 0 WAS WRITTEN
  1223
  1224						ERLOOP	TST			^SALL
  1225	000734	0 002005 0 1 0 005 
  1226	000735	0 116141 4 7 0141 
  1227	000736	0 114626 4 6 0626 
  1228					;*CLOCK FLOATING ONES AND FLOATING ZEROS PATTERNS INTO DR.
  1229					;*CHECK THAT "DP PE" DOES NOT SET.
  1230
  1231	000737	0 002017 0 1 0 017 		LDBR	^D15			;SET LOOP CNT MINUS 1
  1232	000740	0 072031 3 5 0 01 11 		MOVB	AC1
  1233	000741	0 001003 0 0 2 003 		LDMAR	FLTZ			;SET MAR FOR FLOAT PATTERNS
  1234	000742	0 044231 2 2 0 11 11 	DPPELP:	MOVMEM	BORLO			;LOAD BORLO WITH PATTERN
  1235	000743	0 064151 3 2 0 06 11 		MOVB	CLKDRL			;CLOCK DRLO
  1236	000744	0 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  1237	000745	0 032006 1 5 0 00 06 		DATI	DRLO,AC0		;READ DRLO DATA FOR PRINTOUT
  1238	000746	0 002011 0 1 0 011 		LDBR	11			;SELECT MASSBUS INTERFACE
  1239	000747	0 066371 3 3 0 17 11 		MOVB	IOSEL
  1240	000750	0 062010 3 1 0 00 10 		MOV	AC0,BR			;STORE DRLO DATA
  1241	000751	0 066051 3 3 0 02 11 		MOVB	MPGP12
  1242	000752	0 002033 0 1 0 033 		LDBR	33			;SELECT CHANNEL BUS INTERFACE
  1243	000753	0 066371 3 3 0 17 11 		MOVB	IOSEL
  1244	000754	0 002251 0 1 0 251 		GOSUB	RDDPPE			;READ "DP PE"
  1245	000755	0 177631 7 7 3 11 11 
  1246	000756	0 104760 4 2 0760 		JMPB0	.+2			;JUMP IF SET, SHOULDN'T BE
  1247	000757	0 100761 4 0 0761 		JMP	.+2			;ELSE, OKAY
  1248						ERROR	DPPELP,"DP PE" SET WHEN IT SHOULDN'T HAVE,^_
  1249	000760	0 116104 4 7 0104 	DIAG CLOCKED ODD PARITY DATA INTO DRLO WITH "DATA TO DEV" CLEARED,PNT
  1250
  1251						ERLOOP	DPPELP			^SALL
  1252	000761	0 002206 0 1 0 206 
  1253	000762	0 116141 4 7 0141 
  1254	000763	0 114742 4 6 0742 
  1255	000764	0 073427 3 5 3 01 07 		DECR	AC1,I			;DEC LOOP CNT AND INC PAT ADDR
  1256	000765	0 114767 4 6 0767 		JMPZ	.+2			;JUMP IF DONE
  1257	000766	0 100742 4 0 0742 		JMP	DPPELP			;ELSE, CONTINUE
  1258
  1259	000767	0 002115 0 1 0 115 		GOSUB	INITL
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 5-3
MCOD3M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 2

  1260	000770	0 177631 7 7 3 11 11 
  1261	000771	0 116222 4 7 0222 		REPEAT	TST
  1262	000772	0 114626 4 6 0626 
  1263
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 6
MCOD3M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 2

  1264						TEST	180,TEST WRITING AND READING SP RAM (REG 10)
  1265					;***********************************************************************
  1266					;* MCODE3 * TEST 180 *    TEST WRITING AND READING SP RAM (REG 10)
  1267					;***********************************************************************
  1268						SALL
  1269	000773	0 002264 0 1 0 264 
  1270	000774	0 116045 4 7 0045 
  1271
  1272	000775				TST180:	SALL
  1273
  1274					;*TEST WRITING AND READING EACH SP RAM LOCATION.
  1275					;*WRITE AND READ ONES, ZEROS, FLOATING ZEROS AND FLOATING ONES PATTERNS.
  1276
  1277					;*LOAD THE SP ADDR.
  1278					;*WRITE THE RAM LOCATION WITH THE PATTERN.
  1279					;*RELOAD THE SP ADDR.
  1280					;*READ THE RAM CONTENTS BACK COMPLEMENTED IN REG 7 BY SETTING "SRV IN".
  1281					;*THIS PULSES "DATA REQ" WHICH IN TURN GENERATES "CLK BOR".
  1282					;*LOOP ENABLE, SP ENABLE, AND CHANNEL MODE ARE SET.
  1283
  1284	000775	0 001000 0 0 2 000 		LDMAR	0			;CLEAR MAR
  1285	000776	0 010003 0 4 0 003 		LDMEM	3			;SETUP ADDITIONAL PNT ROUTINE NUMBER
  1286	000777	0 002163 0 1 0 163 		GOSUB	SETPNT
  1287	001000	0 177631 7 7 3 11 11 
  1288	001001	0 002205 0 1 0 205 		LDBR	SPEN+CHANL+LOOPEN	;SET SP EN AND LOOP ENABLE
  1289	001002	0 064031 3 2 0 01 11 		MOVB	CSR1			;AND CHANNEL MODE
  1290	001003	0 002017 0 1 0 017 		LDBR	^D15			;SETUP OUTER LOOP COUNT FOR ADDRESSES
  1291	001004	0 072031 3 5 0 01 11 		MOVB	AC1
  1292	001005	0 002021 0 1 0 021 	NXTLOC:	LDBR	^D17			;SETUP INNER LOOP COUNT FOR PATTERNS
  1293	001006	0 072051 3 5 0 02 11 		MOVB	AC2
  1294	001007	0 001001 0 0 2 001 		LDMAR	PATS			;SET MAR FOR FIRST PATTERN
  1295	001010	0 062030 3 1 0 01 10 	FLT10:	MOV	AC1,BR			;WRITE RAM ADDRESS
  1296	001011	0 064131 3 2 0 05 11 		MOVB	SPADR
  1297	001012	0 002000 0 1 0 000 		LDBR	0			;SETUP COMPLEMENT OF PATTERN IN
  1298	001013	0 072071 3 5 0 03 11 		MOVB	AC3
  1299	001014	0 042072 2 1 0 03 12 		LORCM	AC3,BR			;BR THEN
  1300	001015	0 064211 3 2 0 10 11 		MOVB	SPDALO			;WRITE PATTERN INTO RAM
  1301	001016	0 062030 3 1 0 01 10 		MOV	AC1,BR			;RESTORE SP ADDR
  1302	001017	0 064131 3 2 0 05 11 		MOVB	SPADR
  1303	001020	0 002200 0 1 0 200 		LDBR	SRVINL			;SET "SRV IN".  THIS SETS
  1304	001021	0 064071 3 2 0 03 11 		MOVB	TOR1			;"DATA REQ",WHICH CLOCKS RAM DATA TO BORLO
  1305	001022	0 002000 0 1 0 000 		LDBR	0			;CLEAR "SRV IN"
  1306	001023	0 064071 3 2 0 03 11 		MOVB	TOR1
  1307	001024	0 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  1308	001025	0 032007 1 5 0 00 07 		DATI	CBILO,AC0		;READ COMPLEMENTED RAM DATA FROM REG 10
  1309	001026	0 002011 0 1 0 011 		LDBR	11			;SELECT MASSBUS INTERFACE
  1310	001027	0 066371 3 3 0 17 11 		MOVB	IOSEL
  1311	001030	0 062030 3 1 0 01 10 		MOV	AC1,BR			;PUT RAM ADDR IN BR AND
  1312	001031	0 066051 3 3 0 02 11 		MOVB	MPGP12			;STORE IT FOR PRINTOUT
  1313	001032	0 046111 2 3 0 04 11 		MOVMEM	MPGP14			;STORE CORRECT FOR PRINTOUT
  1314	001033	0 062010 3 1 0 00 10 		MOV	AC0,BR			;PUT ACTUAL IN BR AND
  1315	001034	0 066131 3 3 0 05 11 		MOVB	MPGP15			;STORE IT FOR PRINTOUT
  1316	001035	0 002033 0 1 0 033 		LDBR	33			;SELECT CHANNEL BUS INTERFACE
  1317	001036	0 066371 3 3 0 17 11 		MOVB	IOSEL
  1318	001037	0 040017 2 0 0 00 17 		OSM	AC0			;COMPARE WITH EXPECTED PATTERN
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 6-1
MCOD3M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 2

  1319	001040	0 115042 4 6 1042 		JMPZ	.+2			;JUMP IF CORRECT
  1320	001041	0 116104 4 7 0104 		ERROR	FLT10,DATA PATTERN ERROR,,PNT
  1321
  1322						ERLOOP	FLT10			^SALL
  1323	001042	0 002200 0 1 0 200 
  1324	001043	0 116141 4 7 0141 
  1325	001044	0 115010 4 6 1010 
  1326	001045	0 073447 3 5 3 02 07 		DECR	AC2,I			;DEC LOOP COUNT AND INC PATTERN ADDR
  1327	001046	0 115050 4 6 1050 		JMPZ	.+2			;JUMP IF ALL DONE WITH THIS LOC
  1328	001047	0 101010 4 0 1010 		JMP	FLT10			;ELSE, CONTINUE
  1329	001050	0 072027 3 5 0 01 07 		DECR	AC1			;DEC OUTER LOOP COUNT
  1330	001051	0 115053 4 6 1053 		JMPZ	.+2			;JUMP IF DONE WITH RAM
  1331	001052	0 101005 4 0 1005 		JMP	NXTLOC			;ELSE, CONTINUE WITH NEXT LOC
  1332
  1333	001053	0 116222 4 7 0222 		REPEAT	TST
  1334	001054	0 114775 4 6 0775 
  1335
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 7
MCOD3M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 2

  1336						TEST	181,TEST SP RAM ADDRESSING
  1337					;***********************************************************************
  1338					;* MCODE3 * TEST 181 *    TEST SP RAM ADDRESSING
  1339					;***********************************************************************
  1340						SALL
  1341	001055	0 002265 0 1 0 265 
  1342	001056	0 116045 4 7 0045 
  1343
  1344	001057				TST181:	SALL
  1345
  1346					;*WRITE ZEROS TO A TEST ADDRESS.
  1347					;*WRITE ONES TO A DIFFERENT "OTHER" ADDRESS.
  1348					;*READ BACK THE COMPLEMENTED CONTENTS OF THE TEST ADDRESS AND CHECK THAT
  1349					;*IT IS ALL ONES (ACTUAL CONTENTS STILL ZEROS).
  1350					;*LOOP ENABLE AND "SP EN" ARE SET FOR THIS TEST.
  1351
  1352					;*THE SET OF "TEST" AND "OTHER" ADDRESSES IS (0,1,2,4,10).
  1353
  1354	001057	0 001000 0 0 2 000 		LDMAR	0			;CLEAR MAR
  1355	001060	0 010004 0 4 0 004 		LDMEM	4			;SETUP ADDITIONAL PNT ROUTINE NUMBER
  1356	001061	0 002163 0 1 0 163 		GOSUB	SETPNT
  1357	001062	0 177631 7 7 3 11 11 
  1358	001063	0 002205 0 1 0 205 		LDBR	SPEN+CHANL+LOOPEN	;SET LOOP ENABLE, SP EN AND
  1359	001064	0 064031 3 2 0 01 11 		MOVB	CSR1			;CHAN MODE
  1360	001065	0 002142 0 1 0 142 		LDBR	RAMADR-1		;SET "TEST ADDR" TABLE ADDR - 1
  1361	001066	0 072071 3 5 0 03 11 		MOVB	AC3			;SAVE IT IN AC3
  1362	001067	0 072063 3 5 0 03 03 	RMADRO:	INCR	AC3			;INC "TEST ADDR" ADDR
  1363	001070	0 061070 3 0 2 03 10 		MOV	AC3,MAR			;LET MEMORY POINT TO TEST ADDR
  1364	001071	0 052031 2 5 0 01 11 		MOVMEM	AC1			;GET TEST ADDR
  1365	001072	0 115144 4 6 1144 		JMPZ	RMDONE			;ALL ONES ADDR MARKS END OF TABLE
  1366	001073	0 002143 0 1 0 143 		LDBR	RAMADR			;SETUP "OTHER ADDR" ADDR
  1367	001074	0 072051 3 5 0 02 11 		MOVB	AC2
  1368	001075	0 061050 3 0 2 02 10 	RMADRI:	MOV	AC2,MAR			;LET MEMORY POINT TO OTHER ADDR
  1369	001076	0 040037 2 0 0 01 17 		OSM	AC1			;CHECK IF OTHER ADDR = TEST ADDR
  1370	001077	0 115101 4 6 1101 		JMPZ	.+2			;JUMP IF YES
  1371	001100	0 101102 4 0 1102 		JMP	.+2			;ELSE, DON'T INC ADDR
  1372	001101	0 073443 3 5 3 02 03 		INCR	AC2,I			;INC 'OTHER ADDR' ADDR
  1373	001102	0 040011 2 0 0 00 11 		MOVMEM				;CHECK FOR END OF TABLE
  1374	001103	0 115067 4 6 1067 		JMPZ	RMADRO			;JUMP IF AT END
  1375	001104	0 062030 3 1 0 01 10 		MOV	AC1,BR			;PUT TEST ADDR IN BR
  1376	001105	0 064131 3 2 0 05 11 		MOVB	SPADR			;SET SP ADDR TO TEST ADDR
  1377	001106	0 002000 0 1 0 000 		LDBR	0			;WRITE ZEROS TO TEST ADDR LOC
  1378	001107	0 064211 3 2 0 10 11 		MOVB	SPDALO
  1379	001110	0 044131 2 2 0 05 11 		MOVMEM	SPADR			;SET SP ADDR TO OTHER ADDR
  1380	001111	0 002377 0 1 0 377 		LDBR	-1			;WRITE ONES TO OTHER ADDR
  1381	001112	0 064211 3 2 0 10 11 		MOVB	SPDALO
  1382	001113	0 062030 3 1 0 01 10 		MOV	AC1,BR			;GET TEST ADDR AGAIN
  1383	001114	0 064131 3 2 0 05 11 		MOVB	SPADR			;SET SP ADDR TO TEST ADDR
  1384	001115	0 002200 0 1 0 200 		LDBR	SRVINL			;SET "SRV IN" TO
  1385	001116	0 064071 3 2 0 03 11 		MOVB	TOR1			;READ DATA FROM RAM
  1386	001117	0 002000 0 1 0 000 		LDBR	0			;CLEAR "SRV IN"
  1387	001120	0 064071 3 2 0 03 11 		MOVB	TOR1
  1388	001121	0 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  1389	001122	0 032007 1 5 0 00 07 		DATI	CBILO,AC0		;READ COMPLEMENTED LOOPED BACK RAM DATA
  1390	001123	0 002011 0 1 0 011 		LDBR	11			;SELECT MASSBUS INTERFACE
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 7-1
MCOD3M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 2

  1391	001124	0 066371 3 3 0 17 11 		MOVB	IOSEL
  1392	001125	0 046071 2 3 0 03 11 		MOVMEM	MPGP13			;STORE "OTHER ADDR" FOR PRINTOUT
  1393	001126	0 062030 3 1 0 01 10 		MOV	AC1,BR			;STORE "TEST ADDR" FOR PRINTOUT
  1394	001127	0 066051 3 3 0 02 11 		MOVB	MPGP12
  1395	001130	0 062010 3 1 0 00 10 		MOV	AC0,BR			;STORE CHANGED DATA FOR PRINTOUT
  1396	001131	0 066111 3 3 0 04 11 		MOVB	MPGP14
  1397	001132	0 002033 0 1 0 033 		LDBR	33			;SELECT CHANNEL BUS INTERFACE
  1398	001133	0 066371 3 3 0 17 11 		MOVB	IOSEL
  1399	001134	0 060010 3 0 0 00 10 		MOV	AC0			;TEST FOR ALL ONES DATA
  1400	001135	0 115137 4 6 1137 		JMPZ	.+2			;JUMP IF TEST ADDR UNCHANGED
  1401	001136	0 116104 4 7 0104 		ERROR	RMADRI,SP RAM ADDRESSING ERROR,,PNT
  1402
  1403						ERLOOP	RMADRI			^SALL
  1404	001137	0 002200 0 1 0 200 
  1405	001140	0 116141 4 7 0141 
  1406	001141	0 115075 4 6 1075 
  1407	001142	0 072043 3 5 0 02 03 		INCR	AC2			;INC "OTHER ADDR" ADDR
  1408	001143	0 101075 4 0 1075 		JMP	RMADRI
  1409
  1410	001144	0 116222 4 7 0222 	RMDONE:	REPEAT	TST
  1411	001145	0 115057 4 6 1057 
  1412
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 8
MCOD3M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 2

  1413						TEST	182,TEST "CLK BOR" GENERATION
  1414					;***********************************************************************
  1415					;* MCODE3 * TEST 182 *    TEST "CLK BOR" GENERATION
  1416					;***********************************************************************
  1417						SALL
  1418	001146	0 002266 0 1 0 266 
  1419	001147	0 116045 4 7 0045 
  1420
  1421	001150				TST182:	SALL
  1422
  1423					;*CHECK THAT "CLK BOR" IS NOT GENERATED IF "SP EN" IS CLEARED.
  1424					;*LOOP ENABLE IS SET FOR THIS TEST.
  1425
  1426					;*LOAD ALL ZEROS INTO BORLO
  1427					;*LOAD SP RAM WITH ALL ONES.
  1428					;*SET "SRV IN" TO GENERATE "DATA REQ".
  1429					;*CHECK THAT BORLO STILL CONTAINS ZEROS (USING CBI LOOPING).
  1430
  1431	001150	0 002000 0 1 0 000 		LDBR	0			;LOAD ALL ZEROS INTO BORLO
  1432	001151	0 064031 3 2 0 01 11 		MOVB CSR1			;CLEAR STATUS REG
  1433	001152	0 064231 3 2 0 11 11 		MOVB	BORLO
  1434	001153	0 064131 3 2 0 05 11 		MOVB	SPADR			;SET SP ADDR TO ZERO
  1435	001154	0 010377 0 4 0 377 		LDMEM	-1			;LOAD SP RAM WITH ALL ONES
  1436	001155	0 044211 2 2 0 10 11 		MOVMEM	SPDALO
  1437	001156	0 002005 0 1 0 005 		LDBR	LOOPEN+CHANL		;SET LOOPEN ENABLE AND CHANNEL MODE
  1438	001157	0 064031 3 2 0 01 11 		MOVB	CSR1
  1439	001160	0 002105 0 1 0 105 		LDBR	LOOPEN+CHANL+DIHISP	;SET HIGH SPEED
  1440	001161	0 064031 3 2 0 01 11 		MOVB	CSR1
  1441	001162	0 002200 0 1 0 200 		LDBR	SRVINL			;SET "SRV IN"
  1442	001163	0 064071 3 2 0 03 11 		MOVB	TOR1
  1443	001164	0 002000 0 1 0 000 		LDBR	0			;CLEAR "SRV IN"
  1444	001165	0 064071 3 2 0 03 11 		MOVB	TOR1
  1445	001166	0 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  1446	001167	0 032007 1 5 0 00 07 		DATI	CBILO,AC0		;READ COMPLEMENTED BORLO
  1447	001170	0 040017 2 0 0 00 17 		OSM	AC0			;CHECK IF CHANGED
  1448	001171	0 115173 4 6 1173 		JMPZ	.+2			;JUMP IF NOT
  1449						ERRORM	TST,"CLK BOR" WAS GENERATED WITH "SP EN" CLEARED,^_
  1450	001172	0 116104 4 7 0104 	BORLO CONTENTS CHANGED WHEN DIAG GENERATED "DATA REQ"
  1451
  1452						ERLOOP	TST			^SALL
  1453	001173	0 002100 0 1 0 100 
  1454	001174	0 116145 4 7 0145 
  1455	001175	0 115150 4 6 1150 
  1456	001176	0 116222 4 7 0222 		REPEAT	TST
  1457	001177	0 115150 4 6 1150 
  1458
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 9
MCOD3M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 2

  1459						TEST	183,TEST 370 MODE CONTROL UNIT INITIALIZATION
  1460					;***********************************************************************
  1461					;* MCODE3 * TEST 183 *    TEST 370 MODE CONTROL UNIT INITIALIZATION
  1462					;***********************************************************************
  1463						SALL
  1464	001200	0 002267 0 1 0 267 
  1465	001201	0 116045 4 7 0045 
  1466
  1467	001202				TST183:	SALL
  1468
  1469					;*SIMULATE A 370 MODE CONTROL UNIT INITIALIZATION SEQUENCE WITH
  1470					;*"DATA TO DEVICE" CLEARED.  CHECK THAT THE CORRECT SIGNALS ARE GENERATED
  1471					;*AT THE APPROPRIATE TIMES.
  1472					;*LOOP ENABLE IS SET FOR THIS TEST.
  1473
  1474					;*CLEAR "DATA TO DEVICE".
  1475					;*LOAD THE DR REG 0 WITH ZEROS.
  1476					;*LOAD THE BORLO REG WITH A DIFFERENT PATTERN.
  1477					;*SET HIGH SPEED.
  1478					;*CHECK THAT "CU INIT", "DIS SLVE REQ", "ST DATA REQ", "DATA REQ DLY",
  1479					;*"DR READY", AND "TO DAT OUT" ARE ALL SET.
  1480					;*CHECK THAT "SLVE REQ" IS NOT SET.
  1481
  1482	001202	0 002115 0 1 0 115 		GOSUB	INITL			;DO A MICROBUS INIT
  1483	001203	0 177631 7 7 3 11 11 
  1484	001204	0 002145 0 1 0 145 		GOSUB	DEVRD			;CLEAR "DATA TO DEV"
  1485	001205	0 177631 7 7 3 11 11 
  1486	001206	0 002004 0 1 0 004 		LDBR	LOOPEN			;SET LOOP ENABLE
  1487	001207	0 064031 3 2 0 01 11 		MOVB	CSR1
  1488	001210	0 002104 0 1 0 104 		LDBR	LOOPEN+DIHISP		;SET HIGH SPEED
  1489	001211	0 064031 3 2 0 01 11 		MOVB	CSR1
  1490	001212	0 002137 0 1 0 137 		GOSUB	LOADDR			;LOAD DRLO WITH ZEROS
  1491	001213	0 177631 7 7 3 11 11 
  1492	001214	0 002154 0 1 0 154 		GOSUB	DEVWR			;SET DATA TO DEVICE
  1493	001215	0 177631 7 7 3 11 11 
  1494	001216	0 002260 0 1 0 260 		GOSUB	DPINIT			;DO A DATA PATH INIT
  1495	001217	0 177631 7 7 3 11 11 
  1496	001220	0 002145 0 1 0 145 		GOSUB	DEVRD			;CLEAR DATA TO DEVICE
  1497	001221	0 177631 7 7 3 11 11 
  1498	001222	0 002235 0 1 0 235 		GOSUB	RDCUIN			;GO READ "CU INIT"
  1499	001223	0 177631 7 7 3 11 11 
  1500	001224	0 105226 4 2 1226 		JMPB0	.+2			;JUMP IF IT SET
  1501						ERROR	TST,"CU INIT" DID NOT SET,^_
  1502	001225	0 116104 4 7 0104 	<DIAG CLEARED "CHANNEL MODE", "DATA TO DEV", AND "CU RUN">
  1503
  1504						ERLOOP	TST			^SALL
  1505	001226	0 002000 0 1 0 000 
  1506	001227	0 116141 4 7 0141 
  1507	001230	0 115202 4 6 1202 
  1508	001231	0 002246 0 1 0 246 		GOSUB	RDDSRQ			;GO READ "NOT DIS SLVE REQ"
  1509	001232	0 177631 7 7 3 11 11 
  1510	001233	0 105235 4 2 1235 		JMPB0	.+2			;JUMP IF IT SET
  1511	001234	0 101236 4 0 1236 		JMP	.+2			;ELSE, OKAY
  1512						ERROR	TST,"DIS SLVE REQ" DID NOT SET,^_
  1513	001235	0 116104 4 7 0104 	DIAG CLEARED "CHANNEL MODE" THEN SET "DIAG HIGH SPEED"
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 9-1
MCOD3M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 2

  1514
  1515						ERLOOP	TST			^SALL
  1516	001236	0 002001 0 1 0 001 
  1517	001237	0 116141 4 7 0141 
  1518	001240	0 115202 4 6 1202 
  1519	001241	0 002243 0 1 0 243 		GOSUB	RDSDRQ			;GO READ "ST DATA REQ"
  1520	001242	0 177631 7 7 3 11 11 
  1521	001243	0 105245 4 2 1245 		JMPB0	.+2			;JUMP IF IT SET
  1522						ERROR	TST,"ST DATA REQ" DID NOT SET,^_
  1523	001244	0 116104 4 7 0104 	DIAG CLEARED "CHANNEL MODE" THEN SET "DIAG HIGH SPEED"
  1524
  1525						ERLOOP	TST			^SALL
  1526	001245	0 002002 0 1 0 002 
  1527	001246	0 116141 4 7 0141 
  1528	001247	0 115202 4 6 1202 
  1529	001250	0 002232 0 1 0 232 		GOSUB	RDRDLY			;GO READ "NOT DATA REQ DLY"
  1530	001251	0 177631 7 7 3 11 11 
  1531	001252	0 105254 4 2 1254 		JMPB0	.+2			;JUMP IF IT SET
  1532	001253	0 101255 4 0 1255 		JMP	.+2			;JUMP IF CLEARED
  1533						ERROR	TST,"DATA REQ DLY" DID NOT SET,^_
  1534	001254	0 116104 4 7 0104 	DIAG CLEARED "CHANNEL MODE" THEN SET "DIAG HIGH SPEED"
  1535
  1536						ERLOOP	TST			^SALL
  1537	001255	0 002003 0 1 0 003 
  1538	001256	0 116141 4 7 0141 
  1539	001257	0 115202 4 6 1202 
  1540	001260	0 002224 0 1 0 224 		GOSUB	RDRRDY			;GO READ "DR READY"
  1541	001261	0 177631 7 7 3 11 11 
  1542	001262	0 105264 4 2 1264 		JMPB0	.+2			;JUMP IF IT SET
  1543						ERROR	TST,"DR READY" DID NOT SET,^_
  1544	001263	0 116104 4 7 0104 	DIAG SET "DATA REQ" WITH "DIS SLVE REQ" ASSERTED
  1545
  1546						ERLOOP	TST			^SALL
  1547	001264	0 002004 0 1 0 004 
  1548	001265	0 116141 4 7 0141 
  1549	001266	0 115202 4 6 1202 
  1550	001267	0 002227 0 1 0 227 		GOSUB	RDSLRQ			;GO READ "SLVE REQ"
  1551	001270	0 177631 7 7 3 11 11 
  1552	001271	0 105273 4 2 1273 		JMPB0	.+2			;JUMP IF IT SET,SHOULDN'T HAVE
  1553	001272	0 101274 4 0 1274 		JMP	.+2			;ELSE,OKAY
  1554						ERROR	TST,"SLVE REQ" SET WITH "DIS SLVE REQ" SET,^_
  1555	001273	0 116104 4 7 0104 	DIAG CLEARED "CHANNEL MODE" THEN SET "DIAG HIGH SPEED"
  1556
  1557						ERLOOP	TST			^SALL
  1558	001274	0 002005 0 1 0 005 
  1559	001275	0 116141 4 7 0141 
  1560	001276	0 115202 4 6 1202 
  1561	001277	0 022003 1 1 0 00 03 		DATI	TOR1,BR			;READ "TO DAT OUT"
  1562	001300	0 014000 0 6 0 000 		SHR				;RIGHT ADJUST IT
  1563	001301	0 105303 4 2 1303 		JMPB0	.+2			;JUMP IF IT SET
  1564						ERROR	TST,"TO DAT OUT" DID NOT SET,^_
  1565	001302	0 116104 4 7 0104 	DIAG CLEARED "CHANNEL MODE" THEN SET "DIAG HIGH SPEED"
  1566
  1567						ERLOOP	TST			^SALL
  1568	001303	0 002006 0 1 0 006 
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 9-2
MCOD3M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 2

  1569	001304	0 116141 4 7 0141 
  1570	001305	0 115202 4 6 1202 
  1571					;*SET "DAT IN".
  1572					;*CHECK THAT "CU RUN" AND "SLVE REQ" ARE SET.
  1573					;*CHECK THAT "TO DAT OUT", "CU INIT", "DIS SLVE REQ", AND "DR READY" ARE CLEARED.
  1574					;*ALSO, CHECK THAT THE DR REG 0 GOT CLOCKED ("CLK DR BYTE 0" WAS GENERATED).
  1575
  1576	001306	0 002020 0 1 0 020 		LDBR	DATINL			;SET "DAT IN"
  1577	001307	0 064071 3 2 0 03 11 		MOVB	TOR1
  1578	001310	0 002235 0 1 0 235 		GOSUB	RDCUIN			;GO READ "CU INIT"
  1579	001311	0 177631 7 7 3 11 11 
  1580	001312	0 105314 4 2 1314 		JMPB0	.+2			;JUMP IF IT SET, SHOULDN'T BE
  1581	001313	0 101315 4 0 1315 		JMP	.+2			;ELSE, OKAY
  1582						ERROR	TST,"CU INIT" DID NOT CLEAR,^_
  1583	001314	0 116104 4 7 0104 	DIAG SET "DIAG HIGH SPEED" THEN SET "DAT IN"
  1584
  1585						ERLOOP	TST			^SALL
  1586	001315	0 002007 0 1 0 007 
  1587	001316	0 116141 4 7 0141 
  1588	001317	0 115202 4 6 1202 
  1589	001320	0 032005 1 5 0 00 05 		DATI	SPADR,AC0		;READ "CU RUN"
  1590	001321	0 062005 3 1 0 00 05 		SHL	AC0,BR			;MOVE IT TO BIT 4
  1591	001322	0 107324 4 3 1324 		JMPB4	.+2			;JUMP IF IT SET OKAY
  1592						ERROR	TST,"CU RUN" DID NOT SET,^_
  1593	001323	0 116104 4 7 0104 	DIAG SET "DIAG HIGH SPEED" THEN SET "DAT IN"
  1594
  1595						ERLOOP	TST			^SALL
  1596	001324	0 002010 0 1 0 010 
  1597	001325	0 116141 4 7 0141 
  1598	001326	0 115202 4 6 1202 
  1599	001327	0 002246 0 1 0 246 		GOSUB	RDDSRQ			;GO READ "NOT DIS SLVE REQ"
  1600	001330	0 177631 7 7 3 11 11 
  1601	001331	0 105333 4 2 1333 		JMPB0	.+2			;JUMP IF IT SET,
  1602						ERROR	TST,"DIS SLVE REQ" DID NOT CLEAR,^_
  1603	001332	0 116104 4 7 0104 	DIAG SET "DIS SLVE REQ" THEN SET "CU RUN"
  1604
  1605						ERLOOP	TST			^SALL
  1606	001333	0 002011 0 1 0 011 
  1607	001334	0 116141 4 7 0141 
  1608	001335	0 115202 4 6 1202 
  1609	001336	0 002224 0 1 0 224 		GOSUB	RDRRDY			;GO READ "DR READY"
  1610	001337	0 177631 7 7 3 11 11 
  1611	001340	0 105342 4 2 1342 		JMPB0	.+2			;JUMP IF IT SET, SHOULDN'T BE
  1612	001341	0 101343 4 0 1343 		JMP	.+2			;ELSE, OKAY
  1613						ERROR	TST,"DR READY" DID NOT CLEAR,^_
  1614	001342	0 116104 4 7 0104 	DIAG SET "DIAG HIGH SPEED" THEN SET "DAT IN"
  1615
  1616						ERLOOP	TST			^SALL
  1617	001343	0 002012 0 1 0 012 
  1618	001344	0 116141 4 7 0141 
  1619	001345	0 115202 4 6 1202 
  1620	001346	0 002227 0 1 0 227 		GOSUB	RDSLRQ			;GO READ "SLVE REQ"
  1621	001347	0 177631 7 7 3 11 11 
  1622	001350	0 105352 4 2 1352 		JMPB0	.+2			;JUMP IF IT SET,SHOULD HAVE
  1623						ERROR	TST,"SLVE REQ" DIDN'T SET,^_
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 9-3
MCOD3M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 2

  1624	001351	0 116104 4 7 0104 	DIAG SET "DIAG HIGH SPEED" THEN SET "DAT IN"
  1625
  1626						ERLOOP	TST			^SALL
  1627	001352	0 002013 0 1 0 013 
  1628	001353	0 116141 4 7 0141 
  1629	001354	0 115202 4 6 1202 
  1630	001355	0 022003 1 1 0 00 03 		DATI	TOR1,BR			;READ "TO DAT OUT"
  1631	001356	0 014000 0 6 0 000 		SHR				;RIGHT ADJUST IT
  1632	001357	0 105361 4 2 1361 		JMPB0	.+2			;JUMP IF IT SET, SHOULDN'T BE
  1633	001360	0 101362 4 0 1362 		JMP	.+2			;ELSE, OKAY
  1634						ERROR	TST,"TO DAT OUT" DID NOT CLEAR,^_
  1635	001361	0 116104 4 7 0104 	DIAG SET "DIAG HIGH SPEED" THEN SET "DAT IN"
  1636
  1637						ERLOOP	TST			^SALL
  1638	001362	0 002014 0 1 0 014 
  1639	001363	0 116141 4 7 0141 
  1640	001364	0 115202 4 6 1202 
  1641	001365	0 032006 1 5 0 00 06 		DATI	DRLO,AC0		;READ DR REG 0
  1642	001366	0 115370 4 6 1370 		JMPZ	.+2			;JUMP IF IT GOT CLOCKED
  1643						ERROR	TST,"DRLO" DIDN'T GET CLOCKED,^_
  1644	001367	0 116104 4 7 0104 	DIAG SET "DIAG HIGH SPEED" THEN SET "DAT IN"
  1645
  1646						ERLOOP	TST			^SALL
  1647	001370	0 002015 0 1 0 015 
  1648	001371	0 116141 4 7 0141 
  1649	001372	0 115202 4 6 1202 
  1650					;*CLEAR "DAT IN" AND SET "DIAG SLVE ACK".
  1651					;*CHECK THAT "TO SRV OUT" GETS SET.
  1652
  1653	001373	0 002000 0 1 0 000 		LDBR	0			;CLEAR "DAT IN"
  1654	001374	0 064071 3 2 0 03 11 		MOVB	TOR1
  1655	001375	0 002010 0 1 0 010 		LDBR	DISACK			;SET "DIAG SLVE ACK"
  1656	001376	0 064071 3 2 0 03 11 		MOVB	TOR1
  1657	001377	0 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  1658	001400	0 022003 1 1 0 00 03 		DATI	TOR1,BR			;READ "TO SRV OUT"
  1659	001401	0 105403 4 2 1403 		JMPB0	.+2			;JUMP IF IT SET OKAY
  1660						ERROR	TST,"TO SRV OUT" DID NOT SET,^_
  1661					<DIAG SET "DIAG HIGH SPEED",
  1662					SET AND CLEARED "DAT IN",
  1663	001402	0 116104 4 7 0104 	THEN SET "DIAG SLVE ACK">
  1664
  1665						ERLOOP	TST			^SALL
  1666	001403	0 002016 0 1 0 016 
  1667	001404	0 116141 4 7 0141 
  1668	001405	0 115202 4 6 1202 
  1669					;*SET "SRV IN".
  1670					;*CHECK THAT "TO SRV OUT" IS CLEARED.
  1671
  1672	001406	0 002200 0 1 0 200 		LDBR	SRVINL			;SET "SRV IN"
  1673	001407	0 064071 3 2 0 03 11 		MOVB	TOR1
  1674	001410	0 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  1675	001411	0 022003 1 1 0 00 03 		DATI	TOR1,BR			;READ "TO SRV OUT"
  1676	001412	0 105414 4 2 1414 		JMPB0	.+2			;JUMP IF IT DIDN'T CLEAR
  1677	001413	0 101415 4 0 1415 		JMP	.+2			;ELSE, OKAY
  1678						ERROR	TST,"TO SRV OUT" DID NOT CLEAR,^_
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 9-4
MCOD3M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 2

  1679	001414	0 116104 4 7 0104 	DIAG SET "TO SRV OUT" THEN SET "SRV IN"
  1680
  1681						ERLOOP	TST			^SALL
  1682	001415	0 002017 0 1 0 017 
  1683	001416	0 116141 4 7 0141 
  1684	001417	0 115202 4 6 1202 
  1685					;*CLEAR "SRV IN" AND SET "DIAG SLVE ACK".
  1686					;*CHECK THAT "TO DAT OUT" SETS.
  1687
  1688	001420	0 002000 0 1 0 000 		LDBR	0			;CLEAR "SRV IN"
  1689	001421	0 064071 3 2 0 03 11 		MOVB	TOR1
  1690	001422	0 002010 0 1 0 010 		LDBR	DISACK			;SET "DIAG SLVE ACK"
  1691	001423	0 064071 3 2 0 03 11 		MOVB	TOR1
  1692	001424	0 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  1693	001425	0 022003 1 1 0 00 03 		DATI	TOR1,BR			;READ "TO DAT OUT"
  1694	001426	0 014000 0 6 0 000 		SHR				;RIGHT ADJUST IT
  1695	001427	0 105431 4 2 1431 		JMPB0	.+2			;JUMP IF IT SET OKAY
  1696						ERROR	TST,"TO DAT OUT" DID NOT SET,^_
  1697					<DIAG SET "DIAG HIGH SPEED",
  1698					SET AND CLEARED "DAT IN",
  1699					SET "DIAG SLVE ACK",
  1700					SET AND CLEARED "SRV IN",
  1701	001430	0 116104 4 7 0104 	THEN SET "DIAG SLVE ACK" AGAIN>
  1702
  1703						ERLOOP	TST			^SALL
  1704	001431	0 002020 0 1 0 020 
  1705	001432	0 116141 4 7 0141 
  1706	001433	0 115202 4 6 1202 
  1707	001434	0 116222 4 7 0222 		REPEAT	TST
  1708	001435	0 115202 4 6 1202 
  1709
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 10
MCOD3M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 2

  1710						TEST	184,TEST 360 MODE CONTROL UNIT INITIALIZATION
  1711					;***********************************************************************
  1712					;* MCODE3 * TEST 184 *    TEST 360 MODE CONTROL UNIT INITIALIZATION
  1713					;***********************************************************************
  1714						SALL
  1715	001436	0 002270 0 1 0 270 
  1716	001437	0 116045 4 7 0045 
  1717
  1718	001440				TST184:	SALL
  1719
  1720					;*SIMULATE A 360 MODE CONTROL UNIT INITIALIZATION SEQUENCE WITH
  1721					;*"DATA TO DEVICE" SET.  CHECK THAT THE CORRECT SIGNALS ARE GENERATED
  1722					;*AT THE APPROPRIATE TIMES.
  1723					;*LOOP ENABLE IS SET FOR THIS TEST.
  1724
  1725					;*SET "DATA TO DEVICE".
  1726					;*SET "360 MODE" AND HIGH SPEED.
  1727					;*CHECK THAT "ST DATA REQ" IS SET.
  1728					;*AND THAT "DIS SLVE REQ" IS CLEARED.
  1729
  1730	001440	0 002115 0 1 0 115 		GOSUB	INITL			;DO A MICROBUS INIT
  1731	001441	0 177631 7 7 3 11 11 
  1732	001442	0 002154 0 1 0 154 		GOSUB	DEVWR			;SET "DATA TO DEVICE"
  1733	001443	0 177631 7 7 3 11 11 
  1734	001444	0 002260 0 1 0 260 		GOSUB	DPINIT			;DO A DATA PATH INIT
  1735	001445	0 177631 7 7 3 11 11 
  1736	001446	0 002004 0 1 0 004 		LDBR	LOOPEN			;SET LOOP ENABLE
  1737	001447	0 064031 3 2 0 01 11 		MOVB	CSR1
  1738	001450	0 002114 0 1 0 114 		LDBR	LOOPEN+MOD360+DIHISP	;SET LOOP ENABLE, 360 MODE, AND
  1739	001451	0 064031 3 2 0 01 11 		MOVB	CSR1			;HIGH SPEED
  1740	001452	0 002246 0 1 0 246 		GOSUB	RDDSRQ			;GO READ "NOT DIS SLVE REQ"
  1741	001453	0 177631 7 7 3 11 11 
  1742	001454	0 105456 4 2 1456 		JMPB0	.+2			;JUMP IF IT SET
  1743	001455	0 116104 4 7 0104 		ERROR	TST,"DIS SLVE REQ" SET WITH "DATA TO DEV" SET
  1744
  1745						ERLOOP	TST			^SALL
  1746	001456	0 002000 0 1 0 000 
  1747	001457	0 116141 4 7 0141 
  1748	001460	0 115440 4 6 1440 
  1749	001461	0 002243 0 1 0 243 		GOSUB	RDSDRQ			;GO READ "ST DATA REQ"
  1750	001462	0 177631 7 7 3 11 11 
  1751	001463	0 105465 4 2 1465 		JMPB0	.+2			;JUMP IF IT SET
  1752						ERROR	TST,"ST DATA REQ" DID NOT SET,^_
  1753					<DIAG SET "360 MODE" AND CLEARED "CHANNEL MODE" THEN
  1754	001464	0 116104 4 7 0104 	SET "DIAG HIGH SPEED">
  1755
  1756						ERLOOP	TST			^SALL
  1757	001465	0 002001 0 1 0 001 
  1758	001466	0 116141 4 7 0141 
  1759	001467	0 115440 4 6 1440 
  1760					;*SET "DIAG SLVE ACK".
  1761					;*CHECK THAT "TO SRV OUT" IS SET.
  1762
  1763	001470	0 002010 0 1 0 010 		LDBR	DISACK			;SET "DIAG SLVE ACK"
  1764	001471	0 064071 3 2 0 03 11 		MOVB	TOR1
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 10-1
MCOD3M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 2

  1765	001472	0 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  1766	001473	0 022003 1 1 0 00 03 		DATI	TOR1,BR			;READ "TO SRV OUT"
  1767	001474	0 105476 4 2 1476 		JMPB0	.+2			;JUMP IF IT SET
  1768						ERROR	TST,"TO SRV OUT" DID NOT SET,^_
  1769					<DIAG SET "360 MODE" AND CLEARED "CHANNEL MODE" THEN
  1770	001475	0 116104 4 7 0104 	SET "DIAG HIGH SPEED" AND "DIAG SLVE ACK">
  1771
  1772						ERLOOP	TST			^SALL
  1773	001476	0 002002 0 1 0 002 
  1774	001477	0 116141 4 7 0141 
  1775	001500	0 115440 4 6 1440 
  1776					;*SET AND CLEAR "SRV IN".
  1777					;*SET "DIAG SLVE ACK".
  1778					;*CHECK THAT "TO SRV OUT" IS SET AGAIN.
  1779
  1780	001501	0 002200 0 1 0 200 		LDBR	SRVINL			;SET "SRV IN"
  1781	001502	0 064071 3 2 0 03 11 		MOVB	TOR1
  1782	001503	0 002000 0 1 0 000 		LDBR	0			;CLEAR "SRV IN"
  1783	001504	0 064071 3 2 0 03 11 		MOVB	TOR1
  1784	001505	0 002010 0 1 0 010 		LDBR	DISACK			;SET "DIAG SLVE ACK"
  1785	001506	0 064071 3 2 0 03 11 		MOVB	TOR1
  1786	001507	0 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  1787	001510	0 022003 1 1 0 00 03 		DATI	TOR1,BR			;READ "TO SRV OUT"
  1788	001511	0 105513 4 2 1513 		JMPB0	.+2			;JUMP IF SET
  1789						ERROR	TST,"TO SRV OUT" DID NOT SET A 2ND TIME,^_
  1790					<DIAG SET "DIAG HIGH SPEED",
  1791					SET "DIAG SLVE ACK",
  1792					SET AND CLEARED "SRV IN",
  1793	001512	0 116104 4 7 0104 	THEN SET "DIAG SLVE ACK" AGAIN>
  1794
  1795						ERLOOP	TST			^SALL
  1796	001513	0 002003 0 1 0 003 
  1797	001514	0 116141 4 7 0141 
  1798	001515	0 115440 4 6 1440 
  1799	001516	0 116222 4 7 0222 		REPEAT	TST
  1800	001517	0 115440 4 6 1440 
  1801	001520	0 002000 0 1 0 000 		JUMP	NXTBNK			;JUMP TO NEXT BANK OF CRAM
  1802	001521	0 160231 7 0 0 11 11 
  1803	002000					.LOC	2000
  1804	002000				NXTBNK:
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 11
MCOD3M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 2

  1805						TEST	185,TEST CONTROL UNIT TERMINATION
  1806					;***********************************************************************
  1807					;* MCODE3 * TEST 185 *    TEST CONTROL UNIT TERMINATION
  1808					;***********************************************************************
  1809						SALL
  1810	002000	1 002271 0 1 0 271 
  1811	002001	1 117670 4 7 1670 
  1812
  1813	002002				TST185:	SALL
  1814
  1815					;*SIMULATE A CONTROL UNIT TERMINATION SEQUENCE TO CHECK THAT SETTING
  1816					;*"STA IN" AND "DR READY" CLEARS "CU RUN".
  1817					;*LOOP ENABLE IS SET FOR THIS TEST.
  1818
  1819					;*CLEAR "DATA TO DEVICE".
  1820					;*SET HIGH HIGH SPEED.
  1821					;*SET AND CLEAR "DAT IN" TO SET "CU RUN".
  1822					;*SET "DIAG SLVE ACK" TO SET "DR READY".
  1823					;*SET "STA IN".
  1824					;*CHECK THAT "CU RUN" IS CLEARED.
  1825
  1826	002002	1 117515 4 7 1515 		JMPSUB	INITL			;DO A MICROBUS INIT
  1827	002003	1 117545 4 7 1545 		JMPSUB	DEVRD			;CLEAR "DATA TO DEVICE"
  1828	002004	1 002004 0 1 0 004 		LDBR	LOOPEN			;SET LOOP ENABLE
  1829	002005	1 064031 3 2 0 01 11 		MOVB	CSR1
  1830	002006	1 117554 4 7 1554 		JMPSUB	DEVWR			;SET DATA TO DEVICE
  1831	002007	1 117660 4 7 1660 		JMPSUB	DPINIT			;DO A DATA PATH INIT
  1832	002010	1 117545 4 7 1545 		JMPSUB	DEVRD			;CLEAR DATA TO DEVICE
  1833	002011	1 002104 0 1 0 104 		LDBR	LOOPEN+DIHISP		;SET LOOP ENABLE AND HIGH SPEED
  1834	002012	1 064031 3 2 0 01 11 		MOVB	CSR1
  1835	002013	1 002020 0 1 0 020 		LDBR	DATINL			;SET "DAT IN"
  1836	002014	1 064071 3 2 0 03 11 		MOVB	TOR1
  1837	002015	1 002000 0 1 0 000 		LDBR	0			;CLEAR "DAT IN"
  1838	002016	1 064071 3 2 0 03 11 		MOVB	TOR1
  1839	002017	1 002010 0 1 0 010 		LDBR	DISACK			;SET "DIAG SLVE ACK"
  1840	002020	1 064071 3 2 0 03 11 		MOVB	TOR1
  1841	002021	1 002001 0 1 0 001 		LDBR	STAINL			;SET "STA IN"
  1842	002022	1 064051 3 2 0 02 11 		MOVB	TOR0
  1843	002023	1 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  1844	002024	1 032005 1 5 0 00 05 		DATI	SPADR,AC0		;READ "CU RUN"
  1845	002025	1 062005 3 1 0 00 05 		SHL	AC0,BR			;MOVE IT TO BIT 4
  1846	002026	1 106030 4 3 0030 		JMPB4	.+2			;JUMP IF SET, SHOULDN'T BE
  1847	002027	1 100031 4 0 0031 		JMP	.+2			;ELSE,OKAY
  1848						ERROR	TST,"CU RUN" DID NOT CLEAR,^_
  1849	002030	1 117701 4 7 1701 	DIAG SET "CU RUN" THEN SET "DR READY" AND "STA IN"
  1850
  1851						ERLOOP	TST			^SALL
  1852	002031	1 002000 0 1 0 000 
  1853	002032	1 117673 4 7 1673 
  1854	002033	1 114002 4 6 0002 
  1855					;*PERFORM ANOTHER SEQUENCE TO TEST THAT CLEARING "DATA REQ DLY"
  1856					;*WITH "SLVE END XFER" SET CLEARS "CU RUN" BUT DOES NOT SET "END XFER".
  1857					;*LOOP ENABLE IS SET FOR THIS TEST.
  1858
  1859					;*CLEAR "DATA TO DEVICE".
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 11-1
MCOD3M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 2

  1860					;*SET HIGH SPEED.
  1861					;*SET AND CLEAR "DAT IN".
  1862					;*SET "STA IN" (SETS "SLVE END XFER").
  1863					;*SET "SRV IN" (CLEARS "DATA REQ DLY").
  1864					;*CHECK THAT "CU RUN" AND "END XFER" ARE CLEARED.
  1865
  1866	002034	1 117515 4 7 1515 	CUTRM1:	JMPSUB	INITL			;DO A MICROBUS INIT
  1867	002035	1 117545 4 7 1545 		JMPSUB	DEVRD			;CLEAR "DATA TO DEVICE"
  1868	002036	1 002004 0 1 0 004 		LDBR	LOOPEN			;SET LOOP ENABLE
  1869	002037	1 064031 3 2 0 01 11 		MOVB	CSR1
  1870	002040	1 117554 4 7 1554 		JMPSUB	DEVWR			;SET DATA TO DEVICE
  1871	002041	1 117660 4 7 1660 		JMPSUB	DPINIT			;DO A DATA PATH INIT
  1872	002042	1 117545 4 7 1545 		JMPSUB	DEVRD			;CLEAR DATA TO DEVICE
  1873	002043	1 002104 0 1 0 104 		LDBR	LOOPEN+DIHISP		;SET LOOP ENABLE AND HIGH SPEED
  1874	002044	1 064031 3 2 0 01 11 		MOVB	CSR1
  1875	002045	1 002020 0 1 0 020 		LDBR	DATINL			;SET "DAT IN"
  1876	002046	1 064071 3 2 0 03 11 		MOVB	TOR1
  1877	002047	1 002000 0 1 0 000 		LDBR	0			;CLEAR "DAT IN"
  1878	002050	1 064071 3 2 0 03 11 		MOVB	TOR1
  1879	002051	1 002001 0 1 0 001 		LDBR	STAINL			;SET "STA IN"
  1880	002052	1 064051 3 2 0 02 11 		MOVB	TOR0
  1881	002053	1 002200 0 1 0 200 		LDBR	SRVINL			;SET "SRV IN"
  1882	002054	1 064071 3 2 0 03 11 		MOVB	TOR1
  1883	002055	1 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  1884	002056	1 032005 1 5 0 00 05 		DATI	SPADR,AC0		;READ "CU RUN"
  1885	002057	1 062005 3 1 0 00 05 		SHL	AC0,BR			;MOVE IT TO BIT 4
  1886	002060	1 106062 4 3 0062 		JMPB4	.+2			;JUMP IF SET, SHOULDN'T BE
  1887	002061	1 100063 4 0 0063 		JMP	.+2			;ELSE,OKAY
  1888						ERROR	CUTRM1,"CU RUN" DID NOT CLEAR,^_
  1889					<DIAG SET "CU RUN" THEN SET "SLVE END XFER" AND
  1890	002062	1 117701 4 7 1701 	CLEARED "DATA REQ DLY">
  1891
  1892						ERLOOP	CUTRM1			^SALL
  1893	002063	1 002001 0 1 0 001 
  1894	002064	1 117673 4 7 1673 
  1895	002065	1 114034 4 6 0034 
  1896	002066	1 022000 1 1 0 00 00 		DATI	CSR0,BR			;READ "END XFER"
  1897	002067	1 110071 4 4 0071 		JMPB7	.+2			;JUMP IF SET, SHOULDN'T HAVE
  1898	002070	1 100072 4 0 0072 		JMP	.+2			;ELSE, OKAY
  1899						ERROR	CUTRM1,"END XFER" SET WITH CHAN MODE CLEARED,^_
  1900	002071	1 117701 4 7 1701 	DIAG SET "SLVE END XFER" THEN CLEARED "DATA REQ DLY"
  1901
  1902						ERLOOP	CUTRM1			^SALL
  1903	002072	1 002002 0 1 0 002 
  1904	002073	1 117673 4 7 1673 
  1905	002074	1 114034 4 6 0034 
  1906	002075	1 117703 4 7 1703 		REPEAT	TST
  1907	002076	1 114002 4 6 0002 
  1908
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 12
MCOD3M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 2

  1909						TEST	186,TEST MICROBUS INIT DURING CONTROL UNIT INITIALIZATION
  1910					;***********************************************************************
  1911					;* MCODE3 * TEST 186 *    TEST MICROBUS INIT DURING CONTROL UNIT INITIALIZATION
  1912					;***********************************************************************
  1913						SALL
  1914	002077	1 002272 0 1 0 272 
  1915	002100	1 117670 4 7 1670 
  1916
  1917	002101				TST186:	SALL
  1918
  1919					;*SET "CU INIT" THEN DO A MICROBUS INIT.
  1920					;*CHECK THAT "CU INIT" GETS CLEARED.
  1921
  1922	002101	1 117515 4 7 1515 		JMPSUB	INITL			;DO A MICROBUS INIT
  1923	002102	1 002100 0 1 0 100 	CUINT1:	LDBR	DIHISP			;SET HIGH SPEED
  1924	002103	1 064031 3 2 0 01 11 		MOVB	CSR1
  1925	002104	1 117515 4 7 1515 		JMPSUB	INITL			;DO A MICROBUS INIT
  1926	002105	1 117635 4 7 1635 		JMPSUB	RDCUIN			;GO READ "CU INIT"
  1927	002106	1 104110 4 2 0110 		JMPB0	.+2			;JUMP IF STIIL SET
  1928	002107	1 100111 4 0 0111 		JMP	.+2			;ELSE, OKAY
  1929	002110	1 117701 4 7 1701 		ERROR	CUINT1,"CU INIT" DIDN'T CLEAR AFTER MICROBUS INIT
  1930
  1931						ERLOOP	CUINT1			^SALL
  1932	002111	1 002000 0 1 0 000 
  1933	002112	1 117673 4 7 1673 
  1934	002113	1 114102 4 6 0102 
  1935					;*SET "CU RUN" THEN DO A MICROBUS INIT.
  1936					;*CHECK THAT "CU RUN" CLEARS.
  1937
  1938	002114	1 002104 0 1 0 104 	CUINT2:	LDBR	LOOPEN+DIHISP		;SET LOOP ENABLE AND HIGH SPEED
  1939	002115	1 064031 3 2 0 01 11 		MOVB	CSR1
  1940	002116	1 002020 0 1 0 020 		LDBR	DATINL			;SET "DAT IN"
  1941	002117	1 064071 3 2 0 03 11 		MOVB	TOR1
  1942	002120	1 117515 4 7 1515 		JMPSUB	INITL			;DO A MICROBUS INIT
  1943	002121	1 032005 1 5 0 00 05 		DATI	SPADR,AC0		;READ "CU RUN"
  1944	002122	1 062005 3 1 0 00 05 		SHL	AC0,BR			;MOVE IT TO BIT 4
  1945	002123	1 104125 4 2 0125 		JMPB0	.+2			;JUMP IF STILL SET
  1946	002124	1 100126 4 0 0126 		JMP	.+2			;ELSE, OKAY
  1947	002125	1 117701 4 7 1701 		ERROR	CUINT2,"CU RUN" DIDN'T CLEAR AFTER A MICROBUS INIT
  1948
  1949						ERLOOP	CUINT2			^SALL
  1950	002126	1 002001 0 1 0 001 
  1951	002127	1 117673 4 7 1673 
  1952	002130	1 114114 4 6 0114 
  1953	002131	1 117703 4 7 1703 		REPEAT	TST
  1954	002132	1 114101 4 6 0101 
  1955
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 13
MCOD3M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 2

  1956						TEST	187,TEST "EN SRV/DAT OUT"
  1957					;***********************************************************************
  1958					;* MCODE3 * TEST 187 *    TEST "EN SRV/DAT OUT"
  1959					;***********************************************************************
  1960						SALL
  1961	002133	1 002273 0 1 0 273 
  1962	002134	1 117670 4 7 1670 
  1963
  1964	002135				TST187:	SALL
  1965
  1966					;*TEST THAT "EN SRV/DAT OUT" SETS WHEN AND ONLY WHEN "END XFER" AND
  1967					;*"SUP DAT" ARE CLEARED.  THIS IMPLICITLY TESTS THAT "SUP DAT" SETS
  1968					;*AND CLEARS CORRECTLY.
  1969					;*LOOP ENABLE IS SET FOR THIS TEST.
  1970
  1971					;*DO A MICROBUS INIT.
  1972					;*CHECK THAT "EN SRV/DAT OUT" IS SET.
  1973
  1974	002135	1 117515 4 7 1515 		JMPSUB	INITL			;DO A MICROBUS INIT
  1975	002136	1 117554 4 7 1554 		JMPSUB	DEVWR			;SET DATA TO DEVICE
  1976	002137	1 117660 4 7 1660 		JMPSUB	DPINIT			;DO A DATA PATH INIT
  1977	002140	1 117545 4 7 1545 		JMPSUB	DEVRD			;CLEAR DATA TO DEVICE
  1978	002141	1 117640 4 7 1640 		JMPSUB	RDENSD			;GO READ "EN SRV/DAT OUT"
  1979	002142	1 104144 4 2 0144 		JMPB0	.+2			;JUMP IF SET
  1980	002143	1 117701 4 7 1701 		ERROR	TST,"EN SRV/DAT OUT" DID NOT SET AFTER A MICROBUS INIT
  1981
  1982						ERLOOP	TST			^SALL
  1983	002144	1 002000 0 1 0 000 
  1984	002145	1 117673 4 7 1673 
  1985	002146	1 114135 4 6 0135 
  1986					;*SET HIGH SPEED (SETS "CU INIT").
  1987					;*SET AND CLEAR "DAT IN" (SETS "CU RUN").
  1988					;*SET "DIAG SLVE ACK".
  1989					;*SET "REQ IN".
  1990					;*SET "SRV IN" (SETS "SUP DAT").
  1991					;*CHECK THAT "EN SRV/DAT OUT" CLEARS.
  1992
  1993	002147	1 002004 0 1 0 004 		LDBR	LOOPEN			;SET LOOP ENABLE
  1994	002150	1 064031 3 2 0 01 11 		MOVB	CSR1
  1995	002151	1 002104 0 1 0 104 		LDBR	LOOPEN+DIHISP		;SET LOOP ENABLE AND HIGH SPEED
  1996	002152	1 064031 3 2 0 01 11 		MOVB	CSR1
  1997	002153	1 002020 0 1 0 020 		LDBR	DATINL			;SET "DAT IN"
  1998	002154	1 064071 3 2 0 03 11 		MOVB	TOR1
  1999	002155	1 002010 0 1 0 010 		LDBR	DISACK			;CLEAR "DAT IN" AND SET "DIAG SLVE ACK"
  2000	002156	1 064071 3 2 0 03 11 		MOVB	TOR1
  2001	002157	1 002040 0 1 0 040 		LDBR	REQINL			;SET "REQ IN"
  2002	002160	1 064071 3 2 0 03 11 		MOVB	TOR1
  2003	002161	1 002240 0 1 0 240 		LDBR	REQINL+SRVINL		;SET "SRV IN"
  2004	002162	1 064071 3 2 0 03 11 		MOVB	TOR1
  2005	002163	1 117640 4 7 1640 		JMPSUB	RDENSD			;GO READ "EN SRV/DAT OUT"
  2006	002164	1 104166 4 2 0166 		JMPB0	.+2			;JUMP IF IT DIDN'T CLEAR
  2007	002165	1 100167 4 0 0167 		JMP	.+2			;ELSE, OKAY
  2008						ERROR	TST,"EN SRV/DAT OUT" DIDN'T CLEAR,^_
  2009	002166	1 117701 4 7 1701 	DIAG SET "SUP DAT" BY CLEARING "DATA REQ DLY" WITH "REQ IN" SET
  2010
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 13-1
MCOD3M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 2

  2011						ERLOOP	TST			^SALL
  2012	002167	1 002001 0 1 0 001 
  2013	002170	1 117673 4 7 1673 
  2014	002171	1 114135 4 6 0135 
  2015					;*CLEAR "REQ IN" (CLEARS "SUP DAT").
  2016					;*CHECK THAT "EN SRV/DAT OUT" SETS.
  2017
  2018	002172	1 002200 0 1 0 200 		LDBR	SRVINL			;CLEAR "REQ IN"
  2019	002173	1 064071 3 2 0 03 11 		MOVB	TOR1
  2020	002174	1 117640 4 7 1640 		JMPSUB	RDENSD			;READ "EN SRV/DAT OUT"
  2021	002175	1 104177 4 2 0177 		JMPB0	.+2			;JUMP IF IT SET
  2022						ERROR	TST,"EN SRV/DAT OUT" DIDN'T SET,^_
  2023	002176	1 117701 4 7 1701 	DIAG CLEARED "REQ IN" WITH "END XFER" CLEARED
  2024
  2025						ERLOOP	TST			^SALL
  2026	002177	1 002002 0 1 0 002 
  2027	002200	1 117673 4 7 1673 
  2028	002201	1 114135 4 6 0135 
  2029					;*CHECK THAT CLEARING "CU RUN" CLEARS "SUP DAT" AND SETS "EN SRV/DAT OUT".
  2030					;*SET "SUP DAT".
  2031					;*SET "DR READY" AND "STA IN" (CLEARS "CU RUN").
  2032					;*CHECK THAT "EN SRV/DAT OUT" IS SET.
  2033
  2034	002202	1 117515 4 7 1515 	ESDO1:	JMPSUB	INITL			;DO A MICROBUS INIT
  2035	002203	1 002004 0 1 0 004 		LDBR	LOOPEN			;SET LOOP ENABLE
  2036	002204	1 064031 3 2 0 01 11 		MOVB	CSR1
  2037	002205	1 117554 4 7 1554 		JMPSUB	DEVWR			;SET DATA TO DEVICE
  2038	002206	1 117660 4 7 1660 		JMPSUB	DPINIT			;DO A DATA PATH INIT
  2039	002207	1 117545 4 7 1545 		JMPSUB	DEVRD			;CLEAR DATA TO DEVICE
  2040	002210	1 002104 0 1 0 104 		LDBR	LOOPEN+DIHISP		;SET LOOP ENABLE AND HIGH SPEED
  2041	002211	1 064031 3 2 0 01 11 		MOVB	CSR1
  2042	002212	1 002020 0 1 0 020 		LDBR	DATINL			;SET "DAT IN"
  2043	002213	1 064071 3 2 0 03 11 		MOVB	TOR1
  2044	002214	1 002010 0 1 0 010 		LDBR	DISACK			;CLEAR "DAT IN" AND SET "DIAG SLVE ACK"
  2045	002215	1 064071 3 2 0 03 11 		MOVB	TOR1
  2046	002216	1 002040 0 1 0 040 		LDBR	REQINL			;SET "REQ IN"
  2047	002217	1 064071 3 2 0 03 11 		MOVB	TOR1
  2048	002220	1 002240 0 1 0 240 		LDBR	REQINL+SRVINL		;SET "SRV IN"
  2049	002221	1 064071 3 2 0 03 11 		MOVB	TOR1
  2050	002222	1 002050 0 1 0 050 		LDBR	DISACK+REQINL		;CLEAR "SRV IN" AND SET "DIAG SLVE ACK"
  2051	002223	1 064071 3 2 0 03 11 		MOVB	TOR1
  2052	002224	1 002001 0 1 0 001 		LDBR	STAINL			;SET "STA IN" TO CLEAR "CU RUN"
  2053	002225	1 064051 3 2 0 02 11 		MOVB	TOR0
  2054	002226	1 117640 4 7 1640 		JMPSUB	RDENSD			;READ "EN SRV/DAT OUT"
  2055	002227	1 104231 4 2 0231 		JMPB0	.+2			;JUMP IF SET
  2056						ERROR	ESDO1,"EN SRV/DAT OUT" DIDN'T SET,^_
  2057	002230	1 117701 4 7 1701 	DIAG CLEARED "CU RUN" WITH "END XFER" CLEARED
  2058
  2059						ERLOOP	ESDO1			^SALL
  2060	002231	1 002003 0 1 0 003 
  2061	002232	1 117673 4 7 1673 
  2062	002233	1 114202 4 6 0202 
  2063					;*CHECK THAT "EN SRV/DAT OUT" DOES NOT SET WHEN "END XFER" IS SET.
  2064					;*SET CHANNEL MODE AND HIGH SPEED.
  2065					;*SET "SRV IN".
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 13-2
MCOD3M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 2

  2066					;*SET "STA IN" (SETS "SLVE END XFER").
  2067
  2068					;*CLEAR "SRV IN" (CLEARS "DATA REQ DLY" AND SETS "END XFER").
  2069					;*CHECK THAT "EN SRV/DAT OUT" IS NOT SET.
  2070
  2071	002234	1 117515 4 7 1515 	ESDO2:	JMPSUB	INITL			;DO A MICROBUS INIT
  2072	002235	1 002004 0 1 0 004 		LDBR	LOOPEN			;SET LOOP ENABLE
  2073	002236	1 064031 3 2 0 01 11 		MOVB	CSR1
  2074	002237	1 117554 4 7 1554 		JMPSUB	DEVWR			;SET DATA TO DEVICE
  2075	002240	1 117660 4 7 1660 		JMPSUB	DPINIT			;DO A DATA PATH INIT
  2076	002241	1 117545 4 7 1545 		JMPSUB	DEVRD			;CLEAR DATA TO DEVICE
  2077	002242	1 002005 0 1 0 005 		LDBR	LOOPEN+CHANL		;SET LOOP ENABLE AND CHANNEL MODE
  2078	002243	1 064031 3 2 0 01 11 		MOVB	CSR1
  2079	002244	1 002105 0 1 0 105 		LDBR	LOOPEN+CHANL+DIHISP	;SET HIGH SPEED
  2080	002245	1 064031 3 2 0 01 11 		MOVB	CSR1
  2081	002246	1 002200 0 1 0 200 		LDBR	SRVINL			;SET "SRV IN"
  2082	002247	1 064071 3 2 0 03 11 		MOVB	TOR1
  2083	002250	1 002001 0 1 0 001 		LDBR	STAINL			;SET "STA IN"
  2084	002251	1 064051 3 2 0 02 11 		MOVB	TOR0
  2085	002252	1 002000 0 1 0 000 		LDBR	0			;CLEAR "SRV IN"
  2086	002253	1 064071 3 2 0 03 11 		MOVB	TOR1
  2087	002254	1 117640 4 7 1640 		JMPSUB	RDENSD			;GO READ "EN SRV/DAT OUT"
  2088	002255	1 104257 4 2 0257 		JMPB0	.+2			;JUMP IF SET, SHOULDN'T BE
  2089	002256	1 100260 4 0 0260 		JMP	.+2			;ELSE, OKAY
  2090	002257	1 117701 4 7 1701 		ERROR	ESDO2,"EN SRV/DAT OUT" SET WITH "END XFER" SET
  2091
  2092						ERLOOP	ESDO2			^SALL
  2093	002260	1 002004 0 1 0 004 
  2094	002261	1 117673 4 7 1673 
  2095	002262	1 114234 4 6 0234 
  2096	002263	1 117703 4 7 1703 		REPEAT	TST
  2097	002264	1 114135 4 6 0135 
  2098
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 14
MCOD3M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 2

  2099						TEST	188,TEST "SYS RST"
  2100					;***********************************************************************
  2101					;* MCODE3 * TEST 188 *    TEST "SYS RST"
  2102					;***********************************************************************
  2103						SALL
  2104	002265	1 002274 0 1 0 274 
  2105	002266	1 117670 4 7 1670 
  2106
  2107	002267				TST188:	SALL
  2108
  2109					;*TEST THAT "SYS RST" SETS WHEN AND ONLY WHEN "OPL IN" AND "REQ IN" ARE
  2110					;*CLEARED AND "CU RESET EN" IS SET.  CHECK THAT "SYS RST" CAUSES AN INTERRUPT AND
  2111					;*IS CLEARED BY SETTING CHAN MODE OR CLEARING "CU RESET EN".
  2112					;*LOOP ENABLE IS SET FOR THIS TEST.
  2113
  2114					;* DO A MICROBUS INIT.
  2115					;*SET LOOP ENABLE.
  2116					;*CHECK THAT "SYS RST" IS SET.
  2117
  2118	002267	1 117515 4 7 1515 		JMPSUB	INITL			;DO A MICROBUS INIT
  2119	002270	1 002004 0 1 0 004 	SYRST1:	LDBR	LOOPEN			;SET LOOP ENABLE
  2120	002271	1 064031 3 2 0 01 11 		MOVB	CSR1
  2121	002272	1 002100 0 1 0 100 		LDBR	CURSEN			;SET "CU RESET EN"
  2122	002273	1 064071 3 2 0 03 11 		MOVB	TOR1
  2123	002274	1 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  2124	002275	1 022005 1 1 0 00 05 		DATI	SPADR,BR		;READ "SYS RST"
  2125	002276	1 014000 0 6 0 000 		SHR				;RIGHT ADJUST IT
  2126	002277	1 014000 0 6 0 000 		SHR
  2127	002300	1 104302 4 2 0302 		JMPB0	.+2			;JUMP IF IT SET
  2128	002301	1 117701 4 7 1701 		ERROR	TST,"SYS RST" DID NOT SET WITH "OPL IN" AND "REQ IN" CLEARED
  2129
  2130						ERLOOP	TST			^SALL
  2131	002302	1 002000 0 1 0 000 
  2132	002303	1 117673 4 7 1673 
  2133	002304	1 114267 4 6 0267 
  2134					;*CHECK THAT AN INTERRUPT OCCURRED.
  2135
  2136	002305	1 103514 4 1 1514 		JMPI	ZRTNH			;JUMP IF INTERRUPT PRESENT
  2137	002306	1 114310 4 6 0310 		JMPZ	.+2			;JUMP IF INTERRUPT JUMP WAS TAKEN
  2138	002307	1 117701 4 7 1701 		ERROR	TST,"SYS RST" DID NOT CAUSE AN INTERRUPT
  2139
  2140						ERLOOP	TST			^SALL
  2141	002310	1 002001 0 1 0 001 
  2142	002311	1 117673 4 7 1673 
  2143	002312	1 114267 4 6 0267 
  2144					;*SET CHAN MODE.
  2145					;*SET "OPL IN" AND "REQ IN" TO PREVENT RESETTING.
  2146					;*CLEAR CHAN MODE TO ALLOW READING OF "SYS RST".
  2147					;*CHECK THAT "SYS RST" IS CLEARED.
  2148
  2149	002313	1 002005 0 1 0 005 		LDBR	LOOPEN+CHANL		;SET CHANNEL MODE
  2150	002314	1 064031 3 2 0 01 11 		MOVB	CSR1
  2151	002315	1 002200 0 1 0 200 		LDBR	OPLINL			;SET "OPL IN"
  2152	002316	1 064051 3 2 0 02 11 		MOVB	TOR0
  2153	002317	1 002140 0 1 0 140 		LDBR	REQINL+CURSEN		;SET "REQ IN"
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 14-1
MCOD3M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 2

  2154	002320	1 064071 3 2 0 03 11 		MOVB	TOR1
  2155	002321	1 002004 0 1 0 004 		LDBR	LOOPEN			;CLEAR CHAN MODE
  2156	002322	1 064031 3 2 0 01 11 		MOVB	CSR1
  2157	002323	1 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  2158	002324	1 022005 1 1 0 00 05 		DATI	SPADR,BR		;READ "SYS RST"
  2159	002325	1 014000 0 6 0 000 		SHR				;RIGHT ADJUST IT
  2160	002326	1 014000 0 6 0 000 		SHR
  2161	002327	1 104331 4 2 0331 		JMPB0	.+2			;JUMP IF IT SET
  2162	002330	1 100332 4 0 0332 		JMP	.+2			;ELSE, OKAY
  2163	002331	1 117701 4 7 1701 		ERROR	SYRST1,SETTING "CHAN MODE" DID NOT CLEAR "SYS RST"
  2164
  2165						ERLOOP	SYRST1			^SALL
  2166	002332	1 002002 0 1 0 002 
  2167	002333	1 117673 4 7 1673 
  2168	002334	1 114270 4 6 0270 
  2169					;*SET "SYS RST" AGAIN.
  2170					;*CLEAR "CU RESET EN".
  2171					;*CHECK THAT "SYS RST" IS CLEARED.
  2172
  2173	002335	1 002100 0 1 0 100 	SYRST2:	LDBR	CURSEN			;CLEAR "REQ IN"
  2174	002336	1 064071 3 2 0 03 11 		MOVB	TOR1
  2175	002337	1 002000 0 1 0 000 		LDBR	0			;CLEAR "OPL IN"
  2176	002340	1 064051 3 2 0 02 11 		MOVB	TOR0
  2177	002341	1 002000 0 1 0 000 		LDBR	0			;CLEAR "CU RESET EN"
  2178	002342	1 064071 3 2 0 03 11 		MOVB	TOR1
  2179	002343	1 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  2180	002344	1 022005 1 1 0 00 05 		DATI	SPADR,BR		;READ "SYS RST"
  2181	002345	1 014000 0 6 0 000 		SHR				;RIGHT ADJUST IT
  2182	002346	1 014000 0 6 0 000 		SHR
  2183	002347	1 104351 4 2 0351 		JMPB0	.+2			;JUMP IF IT SET
  2184	002350	1 100352 4 0 0352 		JMP	.+2			;ELSE, OKAY
  2185	002351	1 117701 4 7 1701 		ERROR	SYRST2,CLEARING "CU RESET EN" DIDN'T CLEAR "SYS RST"
  2186
  2187						ERLOOP	SYRST2			^SALL
  2188	002352	1 002003 0 1 0 003 
  2189	002353	1 117673 4 7 1673 
  2190	002354	1 114335 4 6 0335 
  2191					;*CLEAR "REQ IN" AND SET "OPL IN".
  2192					;*SET AND CLEAR "CHANNEL MODE".
  2193					;*CHECK THAT "SYS RST" IS CLEARED.
  2194
  2195	002355	1 002100 0 1 0 100 		LDBR	CURSEN			;CLEAR "REQ IN"
  2196	002356	1 064071 3 2 0 03 11 		MOVB	TOR1
  2197	002357	1 002200 0 1 0 200 		LDBR	OPLINL			;SET "OPL IN"
  2198	002360	1 064051 3 2 0 02 11 		MOVB	TOR0
  2199	002361	1 002005 0 1 0 005 	SYRST3:	LDBR	LOOPEN+CHANL		;SET CHANNEL MODE
  2200	002362	1 064031 3 2 0 01 11 		MOVB	CSR1
  2201	002363	1 002004 0 1 0 004 		LDBR	LOOPEN			;CLEAR CHANNEL MODE
  2202	002364	1 064031 3 2 0 01 11 		MOVB	CSR1
  2203	002365	1 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  2204	002366	1 022005 1 1 0 00 05 		DATI	SPADR,BR		;READ "SYS RST"
  2205	002367	1 014000 0 6 0 000 		SHR				;RIGHT ADJUST IT
  2206	002370	1 014000 0 6 0 000 		SHR
  2207	002371	1 104373 4 2 0373 		JMPB0	.+2			;JUMP IF IT SET
  2208	002372	1 100374 4 0 0374 		JMP	.+2			;ELSE, OKAY
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 14-2
MCOD3M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 2

  2209						ERROR	SYRST3,"SYS RST" SET WITH "OPL IN" SET,^_
  2210	002373	1 117701 4 7 1701 	DIAG SET "OPL IN" THEN SET AND CLEARED "CHANNEL MODE"
  2211
  2212						ERLOOP	SYRST3			^SALL
  2213	002374	1 002004 0 1 0 004 
  2214	002375	1 117673 4 7 1673 
  2215	002376	1 114361 4 6 0361 
  2216					;*CLEAR "OPL IN" AND SET "REQ IN".
  2217					;*SET AND CLEAR CHANNEL MODE.
  2218					;*CHECK THAT "SYS RST" IS CLEARED.
  2219
  2220	002377	1 002000 0 1 0 000 		LDBR	0			;CLEAR	"OPL IN"
  2221	002400	1 064051 3 2 0 02 11 		MOVB	TOR0
  2222	002401	1 002140 0 1 0 140 		LDBR	REQINL+CURSEN		;SET "REQ IN"
  2223	002402	1 064071 3 2 0 03 11 		MOVB	TOR1
  2224	002403	1 002005 0 1 0 005 	SYRST4:	LDBR	LOOPEN+CHANL		;SET CHANNEL MODE
  2225	002404	1 064031 3 2 0 01 11 		MOVB	CSR1
  2226	002405	1 002004 0 1 0 004 		LDBR	LOOPEN			;CLEAR CHANNEL MODE
  2227	002406	1 064031 3 2 0 01 11 		MOVB	CSR1
  2228	002407	1 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  2229	002410	1 022005 1 1 0 00 05 		DATI	SPADR,BR		;READ "SYS RST"
  2230	002411	1 014000 0 6 0 000 		SHR				;RIGHT ADJUST IT
  2231	002412	1 014000 0 6 0 000 		SHR
  2232	002413	1 104415 4 2 0415 		JMPB0	.+2			;JUMP IF IT SET
  2233	002414	1 100416 4 0 0416 		JMP	.+2			;ELSE, OKAY
  2234						ERROR	SYRST4,"SYS RST" SET WITH "REQ IN" SET,^_
  2235	002415	1 117701 4 7 1701 	DIAG SET "REQ IN" THEN SET AND CLEARED "CHANNEL MODE"
  2236
  2237						ERLOOP	SYRST4			^SALL
  2238	002416	1 002005 0 1 0 005 
  2239	002417	1 117673 4 7 1673 
  2240	002420	1 114403 4 6 0403 
  2241	002421	1 117703 4 7 1703 		REPEAT	TST
  2242	002422	1 114267 4 6 0267 
  2243
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 15
MCOD3M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 2

  2244						TEST	189,TEST "SEL RST"
  2245					;***********************************************************************
  2246					;* MCODE3 * TEST 189 *    TEST "SEL RST"
  2247					;***********************************************************************
  2248						SALL
  2249	002423	1 002275 0 1 0 275 
  2250	002424	1 117670 4 7 1670 
  2251
  2252	002425				TST189:	SALL
  2253
  2254					;*TEST THAT "SEL RST" SETS WHEN AND ONLY WHEN "REQ IN" AND
  2255					;*"OPL OUT" ARE SET AND "OPL IN" IS CLEARED.  CHECK THAT "SEL RST" CAUSES
  2256					;*AN INTERRUPT AND IS CLEARED BY DOING A MICROBUS INIT, SETTING CHAN MODE,
  2257					;*OR CLEARING "CU RESET EN".
  2258					;*LOOP ENABLE IS SET FOR THIS TEST.
  2259
  2260					;*DO A MICROBUS INIT.
  2261					;*SET LOOP ENABLE.
  2262					;*SET "OPL OUT" AND "REQ IN" AND "CU RESET EN".
  2263					;*CHECK THAT "SEL RST" IS SET.
  2264
  2265	002425	1 117515 4 7 1515 		JMPSUB	INITL			;DO A MICROBUS INIT
  2266	002426	1 002004 0 1 0 004 	SLRST1:	LDBR	LOOPEN			;SET LOOP ENABLE
  2267	002427	1 064031 3 2 0 01 11 		MOVB	CSR1
  2268	002430	1 002240 0 1 0 240 		LDBR	OPLOUT+REQINL		;SET "OPL OUT" AND "REQ IN"
  2269	002431	1 064071 3 2 0 03 11 		MOVB	TOR1
  2270	002432	1 002340 0 1 0 340 		LDBR	OPLOUT+REQINL+CURSEN	;SET "CU RESET EN"
  2271	002433	1 064071 3 2 0 03 11 		MOVB	TOR1
  2272	002434	1 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  2273	002435	1 022005 1 1 0 00 05 		DATI	SPADR,BR		;READ "SEL RST"
  2274	002436	1 014000 0 6 0 000 		SHR				;RIGHT ADJUST IT
  2275	002437	1 104441 4 2 0441 		JMPB0	.+2			;JUMP IF IT SET
  2276						ERROR	TST,"SEL RST" DID NOT SET,^_
  2277	002440	1 117701 4 7 1701 	DIAG SET "OPL OUT" AND "REQ IN" AND CLEARED "OPL IN"
  2278
  2279						ERLOOP	TST			^SALL
  2280	002441	1 002000 0 1 0 000 
  2281	002442	1 117673 4 7 1673 
  2282	002443	1 114425 4 6 0425 
  2283					;*CHECK THAT AN INTERRUPT OCCURRED.
  2284
  2285	002444	1 103514 4 1 1514 		JMPI	ZRTNH			;JUMP IF INTERRUPT PRESENT
  2286	002445	1 114447 4 6 0447 		JMPZ	.+2			;JUMP IF INTERRUPT JUMP WAS TAKEN
  2287	002446	1 117701 4 7 1701 		ERROR	TST,"SEL RST" DID NOT CAUSE AN INTERRUPT
  2288
  2289						ERLOOP	TST			^SALL
  2290	002447	1 002001 0 1 0 001 
  2291	002450	1 117673 4 7 1673 
  2292	002451	1 114425 4 6 0425 
  2293					;*DO A MICROBUS INIT.
  2294					;*CHECK THAT "SEL RST" IS CLEARED.
  2295
  2296	002452	1 117515 4 7 1515 		JMPSUB	INITL			;DO A MICROBUS INIT
  2297	002453	1 022005 1 1 0 00 05 		DATI	SPADR,BR		;READ "SEL RST"
  2298	002454	1 014000 0 6 0 000 		SHR				;RIGHT ADJUST IT
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 15-1
MCOD3M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 2

  2299	002455	1 104457 4 2 0457 		JMPB0	.+2			;JUMP IF IT SET
  2300	002456	1 100460 4 0 0460 		JMP	.+2			;ELSE, OKAY
  2301	002457	1 117701 4 7 1701 		ERROR	SLRST1,MICROBUS INIT DIDN'T CLEAR "SEL RST"
  2302
  2303						ERLOOP	SLRST1			^SALL
  2304	002460	1 002002 0 1 0 002 
  2305	002461	1 117673 4 7 1673 
  2306	002462	1 114426 4 6 0426 
  2307					;*SET "SEL RST" AGAIN.
  2308					;*SET AND CLEAR CHAN MODE.
  2309					;*CHECK THAT "SEL RST" IS CLEARED.
  2310
  2311	002463	1 002004 0 1 0 004 	SLRST2:	LDBR	LOOPEN			;SET LOOP ENABLE
  2312	002464	1 064031 3 2 0 01 11 		MOVB	CSR1
  2313	002465	1 002340 0 1 0 340 		LDBR	OPLOUT+REQINL+CURSEN	;SET "OPL OUT" AND "REQ IN"
  2314	002466	1 064071 3 2 0 03 11 		MOVB	TOR1
  2315	002467	1 002100 0 1 0 100 		LDBR	CURSEN			;CLEAR "OPL IN" AND "REQ IN"
  2316	002470	1 064071 3 2 0 03 11 		MOVB	TOR1
  2317	002471	1 002005 0 1 0 005 		LDBR	LOOPEN+CHANL		;SET CHANNEL MODE
  2318	002472	1 064031 3 2 0 01 11 		MOVB	CSR1
  2319	002473	1 002004 0 1 0 004 		LDBR	LOOPEN			;CLEAR CHAN MODE
  2320	002474	1 064031 3 2 0 01 11 		MOVB	CSR1
  2321	002475	1 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  2322	002476	1 022005 1 1 0 00 05 		DATI	SPADR,BR		;READ "SEL RST"
  2323	002477	1 014000 0 6 0 000 		SHR				;RIGHT ADJUST IT
  2324	002500	1 104502 4 2 0502 		JMPB0	.+2			;JUMP IF IT SET
  2325	002501	1 100503 4 0 0503 		JMP	.+2			;ELSE, OKAY
  2326	002502	1 117701 4 7 1701 		ERROR	SLRST2,SETTING "CHAN MODE" DIDN'T CLEAR "SEL RST"
  2327
  2328						ERLOOP	SLRST2			^SALL
  2329	002503	1 002003 0 1 0 003 
  2330	002504	1 117673 4 7 1673 
  2331	002505	1 114463 4 6 0463 
  2332					;*SET "SEL RST" AGAIN.
  2333					;*CLEAR "CU RESET EN".
  2334					;*CHECK THAT "SEL RST" IS CLEARED.
  2335
  2336	002506	1 002340 0 1 0 340 	SLRST3:	LDBR	OPLOUT+REQINL+CURSEN	;SET "OPL OUT" AND "REQ IN"
  2337	002507	1 064071 3 2 0 03 11 		MOVB	TOR1
  2338	002510	1 002240 0 1 0 240 		LDBR	OPLOUT+REQINL		;CLEAR "CU RESET EN"
  2339	002511	1 064071 3 2 0 03 11 		MOVB	TOR1
  2340	002512	1 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  2341	002513	1 022005 1 1 0 00 05 		DATI	SPADR,BR		;READ "SEL RST"
  2342	002514	1 014000 0 6 0 000 		SHR				;RIGHT ADJUST IT
  2343	002515	1 104517 4 2 0517 		JMPB0	.+2			;JUMP IF IT SET
  2344	002516	1 100520 4 0 0520 		JMP	.+2			;ELSE, OKAY
  2345	002517	1 117701 4 7 1701 		ERROR	SLRST3,CLEARING "CU RESET EN" DIDN'T CLEAR "SEL RST"
  2346
  2347						ERLOOP	SLRST3			^SALL
  2348	002520	1 002004 0 1 0 004 
  2349	002521	1 117673 4 7 1673 
  2350	002522	1 114506 4 6 0506 
  2351					;*CLEAR "OPL OUT".
  2352					;*SET AND CLEAR CHANNEL MODE.
  2353					;*CHECK THAT "SEL RST" IS CLEARED.
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 15-2
MCOD3M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 2

  2354
  2355	002523	1 002140 0 1 0 140 		LDBR	REQINL+CURSEN		;CLEAR "OPL OUT"
  2356	002524	1 064071 3 2 0 03 11 		MOVB	TOR1
  2357	002525	1 002005 0 1 0 005 	SLRST4:	LDBR	LOOPEN+CHANL		;SET CHANNEL MODE
  2358	002526	1 064031 3 2 0 01 11 		MOVB	CSR1
  2359	002527	1 002004 0 1 0 004 		LDBR	LOOPEN			;CLEAR CHANNEL MODE
  2360	002530	1 064031 3 2 0 01 11 		MOVB	CSR1
  2361	002531	1 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  2362	002532	1 022005 1 1 0 00 05 		DATI	SPADR,BR		;READ "SEL RST"
  2363	002533	1 014000 0 6 0 000 		SHR				;RIGHT ADJUST IT
  2364	002534	1 104536 4 2 0536 		JMPB0	.+2			;JUMP IF IT SET
  2365	002535	1 100537 4 0 0537 		JMP	.+2			;ELSE, OKAY
  2366						ERROR	SLRST4,"SEL RST" SET WHEN IT SHOULDN'T HAVE,^_
  2367	002536	1 117701 4 7 1701 	DIAG CLEARED "OPL OUT" THEN SET AND CLEARED "CHANNEL MODE"
  2368
  2369						ERLOOP	SLRST4			^SALL
  2370	002537	1 002005 0 1 0 005 
  2371	002540	1 117673 4 7 1673 
  2372	002541	1 114525 4 6 0525 
  2373					;*SET "OPL OUT".
  2374					;*CLEAR "REQ IN".
  2375					;*SET AND CLEAR CHANNEL MODE.
  2376					;*CHECK THAT "SEL RST" IS CLEARED.
  2377
  2378	002542	1 002300 0 1 0 300 		LDBR	OPLOUT+CURSEN		;SET "OPL OUT" AND CLEAR "REQ IN"
  2379	002543	1 064071 3 2 0 03 11 		MOVB	TOR1
  2380	002544	1 002005 0 1 0 005 	SLRST5:	LDBR	LOOPEN+CHANL		;SET CHANNEL MODE
  2381	002545	1 064031 3 2 0 01 11 		MOVB	CSR1
  2382	002546	1 002004 0 1 0 004 		LDBR	LOOPEN			;CLEAR CHANNEL MODE
  2383	002547	1 064031 3 2 0 01 11 		MOVB	CSR1
  2384	002550	1 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  2385	002551	1 022005 1 1 0 00 05 		DATI	SPADR,BR		;READ "SEL RST"
  2386	002552	1 014000 0 6 0 000 		SHR				;RIGHT ADJUST IT
  2387	002553	1 104555 4 2 0555 		JMPB0	.+2			;JUMP IF IT SET
  2388	002554	1 100556 4 0 0556 		JMP	.+2			;ELSE, OKAY
  2389						ERROR	SLRST5,"SEL RST" SET WHEN IT SHOULDN'T HAVE,^_
  2390	002555	1 117701 4 7 1701 	DIAG CLEARED "REQ IN" THEN SET AND CLEARED "CHANNEL MODE"
  2391
  2392						ERLOOP	SLRST5			^SALL
  2393	002556	1 002006 0 1 0 006 
  2394	002557	1 117673 4 7 1673 
  2395	002560	1 114544 4 6 0544 
  2396					;*SET "REQ IN".
  2397					;*SET "OPL IN".
  2398					;*SET AND CLEAR CHANNEL MODE.
  2399					;*CHECK THAT "SEL RST" IS CLEARED.
  2400
  2401	002561	1 002340 0 1 0 340 		LDBR	OPLOUT+REQINL+CURSEN	;SET "REQ IN"
  2402	002562	1 064071 3 2 0 03 11 		MOVB	TOR1
  2403	002563	1 002200 0 1 0 200 		LDBR	OPLINL			;SET "OPL IN"
  2404	002564	1 064051 3 2 0 02 11 		MOVB	TOR0
  2405	002565	1 002005 0 1 0 005 	SLRST6:	LDBR	LOOPEN+CHANL		;SET CHANNEL MODE
  2406	002566	1 064031 3 2 0 01 11 		MOVB	CSR1
  2407	002567	1 002004 0 1 0 004 		LDBR	LOOPEN			;CLEAR CHANNEL MODE
  2408	002570	1 064031 3 2 0 01 11 		MOVB	CSR1
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 15-3
MCOD3M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 2

  2409	002571	1 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  2410	002572	1 022005 1 1 0 00 05 		DATI	SPADR,BR		;READ "SEL RST"
  2411	002573	1 014000 0 6 0 000 		SHR				;RIGHT ADJUST IT
  2412	002574	1 104576 4 2 0576 		JMPB0	.+2			;JUMP IF IT SET
  2413	002575	1 100577 4 0 0577 		JMP	.+2			;ELSE, OKAY
  2414						ERROR	SLRST6,"SEL RST" SET WHEN IT SHOULDN'T HAVE,^_
  2415	002576	1 117701 4 7 1701 	DIAG SET "OPL IN" THEN SET AND CLEARED "CHANNEL MODE"
  2416
  2417						ERLOOP	SLRST6			^SALL
  2418	002577	1 002007 0 1 0 007 
  2419	002600	1 117673 4 7 1673 
  2420	002601	1 114565 4 6 0565 
  2421	002602	1 117703 4 7 1703 		REPEAT	TST
  2422	002603	1 114425 4 6 0425 
  2423
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 16
MCOD3M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 2

  2424						TEST	190,TEST "HALT IO"
  2425					;***********************************************************************
  2426					;* MCODE3 * TEST 190 *    TEST "HALT IO"
  2427					;***********************************************************************
  2428						SALL
  2429	002604	1 002276 0 1 0 276 
  2430	002605	1 117670 4 7 1670 
  2431
  2432	002606				TST190:	SALL
  2433
  2434					;*TEST THAT "HALT IO" SETS WHEN AND ONLY WHEN "ADR IN" AND "OPL OUT" ARE
  2435					;*SET, "TO HLD OUT" IS CLEARED, AND "CU RESET EN" IS SET.  CHECK THAT
  2436					;*"HALT IO" CAUSES AN INTERRUPT AND IS CLEARED BY DOING A MICROBUS INIT,
  2437					;*SETTING CHAN MODE, OR CLEARING CU RESET EN.
  2438					;*LOOP ENABLE IS SET FOR THIS TEST.
  2439
  2440					;*DO A MICROBUS INIT.
  2441					;*SET LOOP ENABLE AND "CU RESET EN".
  2442					;*SET "ADR IN" AND "OPL OUT".
  2443					;*CHECK THAT "HALT IO" IS SET.
  2444
  2445	002606	1 117515 4 7 1515 		JMPSUB	INITL			;DO A MICROBUS INIT
  2446	002607	1 002004 0 1 0 004 	HLTIO1:	LDBR	LOOPEN			;SET LOOP ENABLE
  2447	002610	1 064031 3 2 0 01 11 		MOVB	CSR1
  2448	002611	1 002020 0 1 0 020 		LDBR	ADRINL			;SET "ADR IN"
  2449	002612	1 064051 3 2 0 02 11 		MOVB	TOR0
  2450	002613	1 002200 0 1 0 200 		LDBR	OPLOUT			;SET "OPL OUT"
  2451	002614	1 064071 3 2 0 03 11 		MOVB	TOR1
  2452	002615	1 002300 0 1 0 300 		LDBR	OPLOUT+CURSEN		;SET "CU RESET EN"
  2453	002616	1 064071 3 2 0 03 11 		MOVB	TOR1
  2454	002617	1 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  2455	002620	1 022005 1 1 0 00 05 		DATI	SPADR,BR		;READ "HALT IO"
  2456	002621	1 104623 4 2 0623 		JMPB0	.+2			;JUMP IF IT IS SET
  2457						ERROR	TST,"HALT IO" DID NOT SET,^_
  2458	002622	1 117701 4 7 1701 	DIAG SET "ADR IN" AND "OPL OUT" AND CLEARED "TO HLD OUT"
  2459
  2460						ERLOOP	TST			^SALL
  2461	002623	1 002000 0 1 0 000 
  2462	002624	1 117673 4 7 1673 
  2463	002625	1 114606 4 6 0606 
  2464					;*CHECK THAT AN INTERRUPT OCCURRED.
  2465
  2466	002626	1 103514 4 1 1514 		JMPI	ZRTNH			;JUMP IF INTERRUPT PRESENT
  2467	002627	1 114631 4 6 0631 		JMPZ	.+2			;JUMP IF INTERRUPT JUMP WAS TAKEN
  2468	002630	1 117701 4 7 1701 		ERROR	TST,"HALT IO" DID NOT CAUSE AN INTERRUPT
  2469
  2470						ERLOOP	TST			^SALL
  2471	002631	1 002001 0 1 0 001 
  2472	002632	1 117673 4 7 1673 
  2473	002633	1 114606 4 6 0606 
  2474					;*DO A MICROBUS INIT.
  2475					;*CHECK THAT "HALT IO" IS CLEARED.
  2476
  2477	002634	1 117515 4 7 1515 		JMPSUB	INITL			;DO A MICROBUS INIT
  2478	002635	1 022005 1 1 0 00 05 		DATI	SPADR,BR		;READ "HALT IO"
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 16-1
MCOD3M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 2

  2479	002636	1 104640 4 2 0640 		JMPB0	.+2			;JUMP IF IT SET
  2480	002637	1 100641 4 0 0641 		JMP	.+2			;ELSE, OKAY
  2481	002640	1 117701 4 7 1701 		ERROR	HLTIO1,MICROBUS INIT DIDN'T CLEAR "HALT IO"
  2482
  2483						ERLOOP	HLTIO1			^SALL
  2484	002641	1 002002 0 1 0 002 
  2485	002642	1 117673 4 7 1673 
  2486	002643	1 114607 4 6 0607 
  2487					;*SET "HALT IO" AGAIN.
  2488					;*SET AND CLEAR CHAN MODE.
  2489					;*CHECK THAT "HALT IO" IS CLEARED.
  2490
  2491	002644	1 002004 0 1 0 004 	HLTIO2:	LDBR	LOOPEN			;SET LOOP ENABLE
  2492	002645	1 064031 3 2 0 01 11 		MOVB	CSR1
  2493	002646	1 002020 0 1 0 020 		LDBR	ADRINL			;SET "ADR IN"
  2494	002647	1 064051 3 2 0 02 11 		MOVB	TOR0
  2495	002650	1 002300 0 1 0 300 		LDBR	OPLOUT+CURSEN		;SET "OPL OUT"
  2496	002651	1 064071 3 2 0 03 11 		MOVB	TOR1
  2497	002652	1 002000 0 1 0 000 		LDBR	0			;CLEAR "ADR IN"
  2498	002653	1 064051 3 2 0 02 11 		MOVB	TOR0
  2499	002654	1 002005 0 1 0 005 		LDBR	LOOPEN+CHANL		;SET CHANNEL MODE
  2500	002655	1 064031 3 2 0 01 11 		MOVB	CSR1
  2501	002656	1 002004 0 1 0 004 		LDBR	LOOPEN			;CLEAR CHAN MODE
  2502	002657	1 064031 3 2 0 01 11 		MOVB	CSR1
  2503	002660	1 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  2504	002661	1 022005 1 1 0 00 05 		DATI	SPADR,BR		;READ "HALT IO"
  2505	002662	1 014000 0 6 0 000 		SHR				;RIGHT ADJUST IT
  2506	002663	1 104665 4 2 0665 		JMPB0	.+2			;JUMP IF IT SET
  2507	002664	1 100666 4 0 0666 		JMP	.+2			;ELSE, OKAY
  2508	002665	1 117701 4 7 1701 		ERROR	HLTIO2,SETTING "CHAN MODE" DIDN'T CLEAR "HALT IO"
  2509
  2510						ERLOOP	HLTIO2			^SALL
  2511	002666	1 002003 0 1 0 003 
  2512	002667	1 117673 4 7 1673 
  2513	002670	1 114644 4 6 0644 
  2514					;*SET "HALT IO" AGAIN.
  2515					;*CLEAR "CU RESET EN".
  2516					;*CHECK THAT "HALT IO" IS CLEARED.
  2517
  2518	002671	1 002020 0 1 0 020 	HLTIO3:	LDBR	ADRINL			;SET "ADR IN"
  2519	002672	1 064051 3 2 0 02 11 		MOVB	TOR0
  2520	002673	1 002300 0 1 0 300 		LDBR	OPLOUT+CURSEN		;SET "OPL OUT"
  2521	002674	1 064071 3 2 0 03 11 		MOVB	TOR1
  2522	002675	1 002200 0 1 0 200 		LDBR	OPLOUT			;CLEAR "CU RESET EN"
  2523	002676	1 064071 3 2 0 03 11 		MOVB	TOR1
  2524	002677	1 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  2525	002700	1 022005 1 1 0 00 05 		DATI	SPADR,BR		;READ "HALT IO"
  2526	002701	1 014000 0 6 0 000 		SHR				;RIGHT ADJUST IT
  2527	002702	1 104704 4 2 0704 		JMPB0	.+2			;JUMP IF IT SET
  2528	002703	1 100705 4 0 0705 		JMP	.+2			;ELSE, OKAY
  2529	002704	1 117701 4 7 1701 		ERROR	HLTIO3,CLEARING "CU RESET EN" DIDN'T CLEAR "HALT IO"
  2530
  2531						ERLOOP	HLTIO3			^SALL
  2532	002705	1 002004 0 1 0 004 
  2533	002706	1 117673 4 7 1673 
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 16-2
MCOD3M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 2

  2534	002707	1 114671 4 6 0671 
  2535					;*SET "TO HLD OUT".
  2536					;*SET AND CLEAR CHANNEL MODE.
  2537					;*CHECK THAT "HALT IO" IS CLEARED.
  2538
  2539	002710	1 002030 0 1 0 030 	HLTIO4:	LDBR	ADRINL+TOHOUT		;SET "TO HLD OUT"
  2540	002711	1 064051 3 2 0 02 11 		MOVB	TOR0
  2541	002712	1 002005 0 1 0 005 		LDBR	LOOPEN+CHANL		;SET CHANNEL MODE
  2542	002713	1 064031 3 2 0 01 11 		MOVB	CSR1
  2543	002714	1 002004 0 1 0 004 		LDBR	LOOPEN			;CLEAR CHANNEL MODE
  2544	002715	1 064031 3 2 0 01 11 		MOVB	CSR1
  2545	002716	1 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  2546	002717	1 022005 1 1 0 00 05 		DATI	SPADR,BR		;READ "HALT IO"
  2547	002720	1 104722 4 2 0722 		JMPB0	.+2			;JUMP IF IT SET
  2548	002721	1 100723 4 0 0723 		JMP	.+2			;ELSE, OKAY
  2549						ERROR	HLTIO4,"HALT IO" SET WHEN IT SHOULDN'T HAVE,^_
  2550	002722	1 117701 4 7 1701 	DIAG SET "TO HLD OUT" THEN SET AND CLEARED "CHANNEL MODE"
  2551
  2552						ERLOOP	HLTIO4			^SALL
  2553	002723	1 002005 0 1 0 005 
  2554	002724	1 117673 4 7 1673 
  2555	002725	1 114710 4 6 0710 
  2556					;*CLEAR "TO HLD OUT".
  2557					;*CLEAR "ADR IN".
  2558					;*SET AND CLEAR CHANNEL MODE.
  2559					;*CHECK THAT "HALT IO" IS CLEARED.
  2560
  2561	002726	1 002000 0 1 0 000 	HLTIO5:	LDBR	0			;CLEAR "ARD IN" AND "TO HLD OUT"
  2562	002727	1 064051 3 2 0 02 11 		MOVB	TOR0
  2563	002730	1 002005 0 1 0 005 		LDBR	LOOPEN+CHANL		;SET CHANNEL MODE
  2564	002731	1 064031 3 2 0 01 11 		MOVB	CSR1
  2565	002732	1 002004 0 1 0 004 		LDBR	LOOPEN			;CLEAR CHANNEL MODE
  2566	002733	1 064031 3 2 0 01 11 		MOVB	CSR1
  2567	002734	1 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  2568	002735	1 022005 1 1 0 00 05 		DATI	SPADR,BR		;READ "HALT IO"
  2569	002736	1 104740 4 2 0740 		JMPB0	.+2			;JUMP IF IT SET
  2570	002737	1 100741 4 0 0741 		JMP	.+2			;ELSE, OKAY
  2571						ERROR	HLTIO5,"HALT IO" SET WHEN IT SHOULDN'T HAVE,^_
  2572	002740	1 117701 4 7 1701 	DIAG CLEARED "ADR IN" THEN SET AND CLEARED "CHANNEL MODE"
  2573
  2574						ERLOOP	HLTIO5			^SALL
  2575	002741	1 002006 0 1 0 006 
  2576	002742	1 117673 4 7 1673 
  2577	002743	1 114726 4 6 0726 
  2578					;*SET "ADR IN".
  2579					;*CLEAR "OPL OUT".
  2580					;*SET AND CLEAR CHANNEL MODE.
  2581					;*CHECK THAT "HALT IO" IS CLEARED.
  2582
  2583	002744	1 002020 0 1 0 020 		LDBR	ADRINL			;SET "ADR IN"
  2584	002745	1 064051 3 2 0 02 11 		MOVB	TOR0
  2585	002746	1 002100 0 1 0 100 	HLTIO6:	LDBR	CURSEN			;CLEAR "OPL OUT"
  2586	002747	1 064071 3 2 0 03 11 		MOVB	TOR1
  2587	002750	1 002005 0 1 0 005 		LDBR	LOOPEN+CHANL		;SET CHANNEL MODE
  2588	002751	1 064031 3 2 0 01 11 		MOVB	CSR1
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 16-3
MCOD3M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 2

  2589	002752	1 002004 0 1 0 004 		LDBR	LOOPEN			;CLEAR CHANNEL MODE
  2590	002753	1 064031 3 2 0 01 11 		MOVB	CSR1
  2591	002754	1 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  2592	002755	1 022005 1 1 0 00 05 		DATI	SPADR,BR		;READ "HALT IO"
  2593	002756	1 104760 4 2 0760 		JMPB0	.+2			;JUMP IF IT SET
  2594	002757	1 100761 4 0 0761 		JMP	.+2			;ELSE, OKAY
  2595						ERROR	HLTIO6,"HALT IO" SET WHEN IT SHOULDN'T HAVE,^_
  2596	002760	1 117701 4 7 1701 	DIAG CLEARED "OPL OUT" THEN SET AND CLEARED "CHANNEL MODE"
  2597
  2598						ERLOOP	HLTIO6			^SALL
  2599	002761	1 002007 0 1 0 007 
  2600	002762	1 117673 4 7 1673 
  2601	002763	1 114746 4 6 0746 
  2602	002764	1 117703 4 7 1703 		REPEAT	TST
  2603	002765	1 114606 4 6 0606 
  2604
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 17
MCOD3M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 2

  2605						TEST	191,TEST REGISTER 16 (CUSTAT)
  2606					;***********************************************************************
  2607					;* MCODE3 * TEST 191 *    TEST REGISTER 16 (CUSTAT)
  2608					;***********************************************************************
  2609						SALL
  2610	002766	1 002277 0 1 0 277 
  2611	002767	1 117670 4 7 1670 
  2612
  2613	002770				TST191:	SALL
  2614
  2615					;*TEST WRITING AND READING BITS 2-0 OF REG 16.
  2616					;*LOOP ENABLE IS NOT SET FOR THIS TEST.
  2617					;*THE "CHAN MODE" BIT MUST BE CLEAR TO ALLOW READING OF THESE BITS.
  2618					;*"CU RESET EN" IS SET FOR THIS TEST.
  2619					;*SET "OPL IN" TO CLEAR PRESETTING OF "SYS RST".
  2620					;*LOOP ENABLE IS SET FOR THIS TEST.
  2621
  2622					;*WRITE ZEROS TO BITS 2-0.
  2623					;*CHECK THAT BITS 2-0 ARE ZEROS.
  2624
  2625	002770	1 001000 0 0 2 000 		LDMAR	0			;CLEAR MAR
  2626	002771	1 002004 0 1 0 004 		LDBR	LOOPEN			;CLEAR "CHAN MODE"
  2627	002772	1 064031 3 2 0 01 11 		MOVB	CSR1
  2628	002773	1 002100 0 1 0 100 		LDBR	CURSEN			;SET "CU RESET EN"
  2629	002774	1 064071 3 2 0 03 11 		MOVB	TOR1
  2630	002775	1 002200 0 1 0 200 		LDBR	OPLINL			;SET "OPL IN"
  2631	002776	1 064051 3 2 0 02 11 		MOVB	TOR0
  2632	002777	1 010000 0 4 0 000 		LDMEM	0			;WRITE ZEROS INTO BITS 2-0 OF REG 16
  2633	003000	1 044351 2 2 0 16 11 		MOVMEM	CUSTAT
  2634	003001	1 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  2635	003002	1 032005 1 5 0 00 05 		DATI	SPADR,AC0		;READ BACK BITS IN REG 5
  2636	003003	1 002007 0 1 0 007 		LDBR	7			;SETUP BIT MASK FOR THE BITS
  2637	003004	1 072013 3 5 0 00 13 		LANDBR	AC0			;ISOLATE THE BITS
  2638	003005	1 040017 2 0 0 00 17 		OSM	AC0			;CHECK IF ALL ZEROS
  2639	003006	1 115010 4 6 1010 		JMPZ	.+2			;JUMP IF ALL ZEROS
  2640	003007	1 117701 4 7 1701 		ERRORM	TST,CAN NOT WRITE ALL ZEROS TO BITS 2-0 OF REG 16
  2641
  2642						ERLOOP	TST			^SALL
  2643	003010	1 002100 0 1 0 100 
  2644	003011	1 117676 4 7 1676 
  2645	003012	1 114770 4 6 0770 
  2646					;*WRITE ONES TO BITS 2-0 OF REG 16.
  2647					;*CHECK THAT BITS 2-0 OF REG 5 ARE ONES.
  2648
  2649	003013	1 010007 0 4 0 007 	REG16A:	LDMEM	7			;SETUP BIT MASK FOR BITS
  2650	003014	1 044351 2 2 0 16 11 		MOVMEM	CUSTAT			;WRITE ONES INTO BITS
  2651	003015	1 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  2652	003016	1 032005 1 5 0 00 05 		DATI	SPADR,AC0		;READ REG 5
  2653	003017	1 052013 2 5 0 00 13 		LANDMR	AC0			;ISOLATE BITS
  2654	003020	1 040017 2 0 0 00 17 		OSM	AC0			;CHECK IF ALL ONES
  2655	003021	1 115023 4 6 1023 		JMPZ	.+2			;JUMP IF ALL ONES
  2656	003022	1 117701 4 7 1701 		ERRORM	REG16A,CAN NOT WRITE ALL ONES TO BITS 2-0 OF REG 16
  2657
  2658						ERLOOP	REG16A			^SALL
  2659	003023	1 002101 0 1 0 101 
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 17-1
MCOD3M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 2

  2660	003024	1 117676 4 7 1676 
  2661	003025	1 115013 4 6 1013 
  2662					;*WRITE FLOATING ZEROS AND FLOATING ONES PATTERNS TO BITS 2-0 OF REG 16.
  2663					;*READ BACK BITS 2-0 OF REG 5 FOR THE PATTERN.
  2664
  2665	003026	1 002005 0 1 0 005 		LDBR	^D5			;SETUP LOOP COUNT MINUS 1
  2666	003027	1 072031 3 5 0 01 11 		MOVB	AC1
  2667	003030	1 001125 0 0 2 125 		LDMAR	FLTZG			;SET MAR TO FIRST PATTERN
  2668	003031	1 044351 2 2 0 16 11 	FLT16:	MOVMEM	CUSTAT			;WRITE PATTERN TO BITS 2-0 OF REG 16
  2669	003032	1 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  2670	003033	1 032005 1 5 0 00 05 		DATI	SPADR,AC0		;READ REG 5
  2671	003034	1 002007 0 1 0 007 		LDBR	7			;SETUP BIT MASK FOR BITS
  2672	003035	1 072013 3 5 0 00 13 		LANDBR	AC0			;ISOLATE BITS
  2673	003036	1 040017 2 0 0 00 17 		OSM	AC0			;CHECK FOR CORRECT PATTERN
  2674	003037	1 115041 4 6 1041 		JMPZ	.+2			;JUMP IF CORRECT PATTERN
  2675						ERRORM	FLT16,FLOATING ZEROS/ONES FAILED,^_
  2676	003040	1 117701 4 7 1701 	DIAG WROTE BITS 2-0 OF REG 16
  2677
  2678						ERLOOP	FLT16			^SALL
  2679	003041	1 002102 0 1 0 102 
  2680	003042	1 117676 4 7 1676 
  2681	003043	1 115031 4 6 1031 
  2682	003044	1 073427 3 5 3 01 07 		DECR	AC1,I			;DEC LOOP COUNT AND INC MAR
  2683	003045	1 115047 4 6 1047 		JMPZ	.+2			;JUMP IF ALL DONE
  2684	003046	1 101031 4 0 1031 		JMP	FLT16			;ELSE,CONTINUE
  2685
  2686	003047	1 117703 4 7 1703 		REPEAT	TST
  2687	003050	1 114770 4 6 0770 
  2688
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 18
MCOD3M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 2

  2689						TEST	192,TEST CONTROL UNIT SELECT LOGIC
  2690					;***********************************************************************
  2691					;* MCODE3 * TEST 192 *    TEST CONTROL UNIT SELECT LOGIC
  2692					;***********************************************************************
  2693						SALL
  2694	003051	1 002300 0 1 0 300 
  2695	003052	1 117670 4 7 1670 
  2696
  2697	003053				TST192:	SALL
  2698
  2699					;*TEST THAT "SLVE SEL" SETS WHEN AND ONLY WHEN "REC SEL FF" SETS WITH
  2700					;*"SLVE SEL DATA" ASSERTED.  THIS IMPLICITLY TESTS THE PROPER OPERATION
  2701					;*OF "REC SEL FF" AND "SERV REQ" SIGNALS.
  2702					;*ALSO, TEST THAT "SLVE SEL" CLEARS WHEN BIT 0 OF REG 0 IS WRITTEN.
  2703					;*LOOP ENABLE IS SET FOR THIS TEST.
  2704
  2705					;*CLEAR "TO HLD OUT" TO INSURE "TRA SEL FF" CLEARS.
  2706					;*DO A MICROBUS INIT.
  2707					;*SET "SUP OUT", "SEL IN", AND "TO HLD OUT".
  2708					;*CHECK THAT "SLVE SEL" IS SET.
  2709
  2710	003053	1 002000 0 1 0 000 		LDBR	0			;CLEAR "TO HLD OUT"
  2711	003054	1 064051 3 2 0 02 11 		MOVB	TOR0
  2712	003055	1 117515 4 7 1515 		JMPSUB	INITL			;DO A MICROBUS INIT
  2713	003056	1 002004 0 1 0 004 		LDBR	LOOPEN			;SET LOOP ENABLE
  2714	003057	1 064031 3 2 0 01 11 		MOVB	CSR1
  2715	003060	1 002040 0 1 0 040 		LDBR	SUPOUT			;SET "SUP OUT"
  2716	003061	1 064071 3 2 0 03 11 		MOVB	TOR1
  2717	003062	1 002012 0 1 0 012 		LDBR	SELINL+TOHOUT		;SET "TO HLD OUT" AND "SEL IN"
  2718	003063	1 064051 3 2 0 02 11 		MOVB	TOR0
  2719	003064	1 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  2720	003065	1 022000 1 1 0 00 00 		DATI	CSR0,BR			;READ "SLVE SEL"
  2721	003066	1 105070 4 2 1070 		JMPB0	.+2			;JUMP IF SET, SHOULD BE
  2722						ERROR	TST,"SLVE SEL" DID NOT SET,^_
  2723					<DIAG SET "SUP OUT" AND CLEARED "ADR IN" THEN
  2724	003067	1 117701 4 7 1701 	SET "SEL IN" AND "TO HLD OUT">
  2725
  2726						ERLOOP	TST			^SALL
  2727	003070	1 002000 0 1 0 000 
  2728	003071	1 117673 4 7 1673 
  2729	003072	1 115053 4 6 1053 
  2730					;*CLEAR "SLVE SEL".
  2731					;*CHECK THAT "SLVE SEL" IS CLEARED.
  2732
  2733	003073	1 002001 0 1 0 001 	SLVSL2:	LDBR	CSLVSL			;CLEAR "SLVE SEL"
  2734	003074	1 064011 3 2 0 00 11 		MOVB	CSR0
  2735	003075	1 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  2736	003076	1 022000 1 1 0 00 00 		DATI	CSR0,BR			;READ "SLVE SEL"
  2737	003077	1 105101 4 2 1101 		JMPB0	.+2			;JUMP IF SET, SHOULDN'T BE
  2738	003100	1 101102 4 0 1102 		JMP	.+2			;ELSE, OKAY
  2739	003101	1 117701 4 7 1701 		ERROR	TST,"SLVE SEL" DIDN'T CLEAR WHEN BIT 0 OF REG 0 WAS WRITTEN
  2740
  2741						ERLOOP	TST			^SALL
  2742	003102	1 002001 0 1 0 001 
  2743	003103	1 117673 4 7 1673 
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 18-1
MCOD3M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 2

  2744	003104	1 115053 4 6 1053 
  2745					;*CLEAR THEN SET "SEL IN".
  2746					;*CHECK THAT "SLVE SEL" DOES NOT SET (I.E., "REC SEL FF" DIDN'T TOGGLE).
  2747
  2748	003105	1 002010 0 1 0 010 		LDBR	TOHOUT			;CLEAR "SEL IN"
  2749	003106	1 064051 3 2 0 02 11 		MOVB	TOR0
  2750	003107	1 002012 0 1 0 012 		LDBR	TOHOUT+SELINL		;SET "SEL IN"
  2751	003110	1 064051 3 2 0 02 11 		MOVB	TOR0
  2752	003111	1 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  2753	003112	1 022000 1 1 0 00 00 		DATI	CSR0,BR			;READ "SLVE SEL"
  2754	003113	1 105115 4 2 1115 		JMPB0	.+2			;JUMP IF SET, SHOULDN'T BE
  2755	003114	1 101116 4 0 1116 		JMP	.+2			;ELSE, OKAY
  2756						ERROR	SLVSL2,"SLVE SEL" SET WHEN IT SHOULDN'T HAVE,^_
  2757					<DIAG SET "SLVE SEL DATA" AND "REC SEL FF",
  2758					CLEARED "SLVE SEL",
  2759	003115	1 117701 4 7 1701 	THEN CLEARED AND SET "SEL IN">
  2760
  2761						ERLOOP	SLVSL2			^SALL
  2762	003116	1 002002 0 1 0 002 
  2763	003117	1 117673 4 7 1673 
  2764	003120	1 115073 4 6 1073 
  2765					;*CLEAR "SLVE SEL".
  2766					;*CLEAR THEN SET "TO HLD OUT" ("REC SEL FF" SHOULD TOGGLE).
  2767					;*CHECK THAT "SLVE SEL" IS SET.
  2768
  2769	003121	1 002001 0 1 0 001 	SLVSL3:	LDBR	CSLVSL			;CLEAR "SLVE SEL"
  2770	003122	1 064011 3 2 0 00 11 		MOVB	CSR0
  2771	003123	1 002002 0 1 0 002 	SLVSL1:	LDBR	SELINL			;CLEAR "TO HLD OUT"
  2772	003124	1 064051 3 2 0 02 11 		MOVB	TOR0
  2773	003125	1 002012 0 1 0 012 		LDBR	TOHOUT+SELINL		;SET "TO HLD OUT"
  2774	003126	1 064051 3 2 0 02 11 		MOVB	TOR0
  2775	003127	1 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  2776	003130	1 022000 1 1 0 00 00 		DATI	CSR0,BR			;READ "SLVE SEL"
  2777	003131	1 105133 4 2 1133 		JMPB0	.+2			;JUMP IF SET, SHOULD BE
  2778						ERROR	SLVSL3,"SLVE SEL" DID NOT SET,^_
  2779	003132	1 117701 4 7 1701 	DIAG CLEARED "SLVE SEL" THEN TOGGLED "TO HLD OUT"
  2780
  2781						ERLOOP	SLVSL3			^SALL
  2782	003133	1 002003 0 1 0 003 
  2783	003134	1 117673 4 7 1673 
  2784	003135	1 115121 4 6 1121 
  2785					;*CLEAR "TO HLD OUT".
  2786					;*DO A MICROBUS INIT.
  2787					;*CHECK THAT "SLVE SEL" CLEARED.
  2788
  2789	003136	1 002000 0 1 0 000 		LDBR	0			;CLEAR "TO HLD OUT"
  2790	003137	1 064051 3 2 0 02 11 		MOVB	TOR0
  2791	003140	1 117515 4 7 1515 		JMPSUB	INITL			;DO A MICROBUS INIT
  2792	003141	1 022000 1 1 0 00 00 		DATI	CSR0,BR			;READ "SLVE SEL"
  2793	003142	1 105144 4 2 1144 		JMPB0	.+2			;JUMP IF SET, SHOULDN'T BE
  2794	003143	1 101145 4 0 1145 		JMP	.+2			;ELSE, OKAY
  2795	003144	1 117701 4 7 1701 		ERROR	SLVSL1,MICROBUS INIT DIDN'T CLEAR "SLVE SEL"
  2796
  2797						ERLOOP	SLVSL1			^SALL
  2798	003145	1 002004 0 1 0 004 
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 18-2
MCOD3M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 2

  2799	003146	1 117673 4 7 1673 
  2800	003147	1 115123 4 6 1123 
  2801					;*SET "ADR IN", "SUP OUT", AND "SEL IN".
  2802					;*SET "TO HLD OUT" (SETS "REC SEL FF").
  2803					;*CHECK THAT "SLVE SEL" DOES NOT SET.
  2804
  2805	003150	1 002004 0 1 0 004 	SLVSL4:	LDBR	LOOPEN			;SET LOOP ENABLE
  2806	003151	1 064031 3 2 0 01 11 		MOVB	CSR1
  2807	003152	1 002040 0 1 0 040 		LDBR	SUPOUT			;SET "SUP OUT"
  2808	003153	1 064071 3 2 0 03 11 		MOVB	TOR1
  2809	003154	1 002022 0 1 0 022 		LDBR	ADRINL+SELINL		;SET "ADR IN" AND CLEAR "TO HLD OUT"
  2810	003155	1 064051 3 2 0 02 11 		MOVB	TOR0
  2811	003156	1 002032 0 1 0 032 		LDBR	ADRINL+SELINL+TOHOUT	;SET "TO HLD OUT"
  2812	003157	1 064051 3 2 0 02 11 		MOVB	TOR0
  2813	003160	1 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  2814	003161	1 022000 1 1 0 00 00 		DATI	CSR0,BR			;READ "SLVE SEL"
  2815	003162	1 105164 4 2 1164 		JMPB0	.+2			;JUMP IF SET, SHOULDN'T BE
  2816	003163	1 101165 4 0 1165 		JMP	.+2			;ELSE, OKAY
  2817						ERROR	SLVSL4,"SLVE SEL" SET WITH "ADR IN" SET,^_
  2818	003164	1 117701 4 7 1701 	DIAG SET "REC SEL FF"
  2819
  2820						ERLOOP	SLVSL4			^SALL
  2821	003165	1 002005 0 1 0 005 
  2822	003166	1 117673 4 7 1673 
  2823	003167	1 115150 4 6 1150 
  2824					;*CLEAR "ADR IN".
  2825					;*CLEAR "SLVE SEL".
  2826					;*CLEAR "SUP OUT".
  2827					;*CLEAR THEN SET "TO HLD OUT".
  2828					;*CHECK THAT "SLVE SEL" DOESN'T SET.
  2829
  2830	003170	1 002002 0 1 0 002 	SLVSL5:	LDBR	SELINL			;CLEAR "ADR IN" AND "TO HLD OUT"
  2831	003171	1 064051 3 2 0 02 11 		MOVB	TOR0
  2832	003172	1 002001 0 1 0 001 		LDBR	CSLVSL			;CLEAR "SLVE SEL"
  2833	003173	1 064011 3 2 0 00 11 		MOVB	CSR0
  2834	003174	1 002000 0 1 0 000 		LDBR	0			;CLEAR "SUP OUT"
  2835	003175	1 064071 3 2 0 03 11 		MOVB	TOR1
  2836	003176	1 002012 0 1 0 012 		LDBR	SELINL+TOHOUT		;SET "TO HLD OUT"
  2837	003177	1 064051 3 2 0 02 11 		MOVB	TOR0
  2838	003200	1 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  2839	003201	1 022000 1 1 0 00 00 		DATI	CSR0,BR			;READ "SLVE SEL"
  2840	003202	1 105204 4 2 1204 		JMPB0	.+2			;JUMP IF SET, SHOULDN'T BE
  2841	003203	1 101205 4 0 1205 		JMP	.+2			;ELSE, OKAY
  2842						ERROR	SLVSL5,"SLVE SEL" SET WITH "SUP OUT" CLEARED,^_
  2843	003204	1 117701 4 7 1701 	DIAG TOGGLED "REC SEL FF"
  2844
  2845						ERLOOP	SLVSL5			^SALL
  2846	003205	1 002006 0 1 0 006 
  2847	003206	1 117673 4 7 1673 
  2848	003207	1 115170 4 6 1170 
  2849	003210	1 002000 0 1 0 000 		LDBR	0			;CLEAR "TO HLD OUT"
  2850	003211	1 064051 3 2 0 02 11 		MOVB	TOR0
  2851	003212	1 117703 4 7 1703 		REPEAT	TST
  2852	003213	1 115053 4 6 1053 
  2853
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 19
MCOD3M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 2

  2854						TEST	193,TEST "TRA SEL FF"
  2855					;***********************************************************************
  2856					;* MCODE3 * TEST 193 *    TEST "TRA SEL FF"
  2857					;***********************************************************************
  2858						SALL
  2859	003214	1 002301 0 1 0 301 
  2860	003215	1 117670 4 7 1670 
  2861
  2862	003216				TST193:	SALL
  2863
  2864					;*TEST THAT "TRA SEL FF" SETS WHEN AND ONLY WHEN "REC SEL FF" IS SET
  2865					;*AND "SLVE SEL DATA" AND "SLVE SEL"" ARE NEGATED.  ALSO, CHECK THAT
  2866					;*IT CLEARS ONLY WHEN "REC SEL FF" CLEARS.
  2867					;*LOOP ENABLE IS SET FOR THIS TEST.
  2868
  2869					;*CLEAR "TO HLD OUT".
  2870					;*DO A MICROBUS INIT.
  2871					;*SET "SEL IN" AND "TO HLD OUT" (SETS "REC SEL FF").
  2872					;*CHECK THAT "TRA SEL FF" IS SET.
  2873
  2874	003216	1 002000 0 1 0 000 		LDBR	0			;CLEAR "TO HLD OUT"
  2875	003217	1 064051 3 2 0 02 11 		MOVB	TOR0
  2876	003220	1 117515 4 7 1515 		JMPSUB	INITL			;DO A MICROBUS INIT
  2877	003221	1 002004 0 1 0 004 		LDBR	LOOPEN			;SET LOOP ENABLE
  2878	003222	1 064031 3 2 0 01 11 		MOVB	CSR1
  2879	003223	1 002012 0 1 0 012 		LDBR	SELINL+TOHOUT		;SET "SEL IN" AND "TO HLD OUT"
  2880	003224	1 064051 3 2 0 02 11 		MOVB	TOR0
  2881	003225	1 117610 4 7 1610 		JMPSUB	RDTSFF			;GO READ "TRA SEL FF"
  2882	003226	1 105230 4 2 1230 		JMPB0	.+2			;JUMP IF SET
  2883						ERROR	TST,"TRA SEL FF" DID NOT SET,^_
  2884	003227	1 117701 4 7 1701 	DIAG CLEARED "SLVE SEL" AND "SLVE SEL DATA" AND SET "REC SEL FF"
  2885
  2886						ERLOOP	TST			^SALL
  2887	003230	1 002000 0 1 0 000 
  2888	003231	1 117673 4 7 1673 
  2889	003232	1 115216 4 6 1216 
  2890					;*SET "SUP OUT" (ASSERTS "SLVE SEL DATA").
  2891					;*CHECK THAT "TRA SEL FF" IS STILL SET.
  2892
  2893	003233	1 002040 0 1 0 040 		LDBR	SUPOUT			;SET "SUP OUT"
  2894	003234	1 064071 3 2 0 03 11 		MOVB	TOR1
  2895	003235	1 117610 4 7 1610 		JMPSUB	RDTSFF			;GO READ "TRA SEL FF"
  2896	003236	1 105240 4 2 1240 		JMPB0	.+2			;JUMP IF STILL SET
  2897						ERROR	TST,"TRA SEL FF" DID NOT STAY SET,^_
  2898	003237	1 117701 4 7 1701 	DIAG SET "TRA SEL FF" THEN ASSERTED "SLVE SEL DATA"
  2899
  2900						ERLOOP	TST			^SALL
  2901	003240	1 002001 0 1 0 001 
  2902	003241	1 117673 4 7 1673 
  2903	003242	1 115216 4 6 1216 
  2904					;*CLEAR "SUP OUT".
  2905					;*CLEAR "TO HLD OUT" (CLEARS "REC SEL FF").
  2906					;*CHECK THAT "TRA SEL FF" CLEARS.
  2907
  2908	003243	1 002000 0 1 0 000 		LDBR	0			;CLEAR "SUP OUT"
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 19-1
MCOD3M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 2

  2909	003244	1 064071 3 2 0 03 11 		MOVB	TOR1
  2910	003245	1 002002 0 1 0 002 		LDBR	SELINL			;CLEAR "TO HLD OUT"
  2911	003246	1 064051 3 2 0 02 11 		MOVB	TOR0
  2912	003247	1 117610 4 7 1610 		JMPSUB	RDTSFF			;GO READ "TRA SEL FF"
  2913	003250	1 105252 4 2 1252 		JMPB0	.+2			;JUMP IF IT DIDN'T CLEAR
  2914	003251	1 101253 4 0 1253 		JMP	.+2
  2915	003252	1 117701 4 7 1701 		ERROR	TST,"TRA SEL FF" DIDN'T CLEAR WHEN "TO HLD OUT" CLEARED
  2916
  2917						ERLOOP	TST			^SALL
  2918	003253	1 002002 0 1 0 002 
  2919	003254	1 117673 4 7 1673 
  2920	003255	1 115216 4 6 1216 
  2921					;*CHECK THAT "TRA SEL FF" DOES NOT SET WHEN "SLVE SEL" IS SET.
  2922					;*SET "SUP OUT" (ASSERTS "SLVE SEL DATA").
  2923					;*SET "SEL IN" AND "TO HLD OUT" (SETS "REC SEL FF" AND "SLVE SEL").
  2924					;*CLEAR "SUP OUT" (NEGATES "SLVE SEL DATA").
  2925					;*CHECK THAT "TRA SEL FF" IS NOT SET.
  2926
  2927	003256	1 002000 0 1 0 000 	TSFF1:	LDBR	0			;CLEAR "SEL IN" AND "TO HLD OUT"
  2928	003257	1 064051 3 2 0 02 11 		MOVB	TOR0
  2929	003260	1 002001 0 1 0 001 		LDBR	CSLVSL			;CLEAR "SLVE SEL"
  2930	003261	1 064011 3 2 0 00 11 		MOVB	CSR0
  2931	003262	1 002040 0 1 0 040 		LDBR	SUPOUT			;SET "SUP OUT"
  2932	003263	1 064071 3 2 0 03 11 		MOVB	TOR1
  2933	003264	1 002012 0 1 0 012 		LDBR	SELINL+TOHOUT		;SET "REC SEL FF"
  2934	003265	1 064051 3 2 0 02 11 		MOVB	TOR0
  2935	003266	1 002000 0 1 0 000 		LDBR	0			;CLEAR "SUP OUT"
  2936	003267	1 064071 3 2 0 03 11 		MOVB	TOR1
  2937	003270	1 117610 4 7 1610 		JMPSUB	RDTSFF			;GO READ "TRA SEL FF"
  2938	003271	1 105273 4 2 1273 		JMPB0	.+2			;JUMP IF IT SET, SHOULDN'T HAVE
  2939	003272	1 101274 4 0 1274 		JMP	.+2			;ELSE, OKAY
  2940						ERROR	TSFF1,"TRA SEL FF" SET WITH "SLVE SEL" SET,^_
  2941	003273	1 117701 4 7 1701 	DIAG SET "REC SEL FF" AND "SLVE SEL" THEN NEGATED "SLVE SEL DATA"
  2942
  2943						ERLOOP	TSFF1			^SALL
  2944	003274	1 002003 0 1 0 003 
  2945	003275	1 117673 4 7 1673 
  2946	003276	1 115256 4 6 1256 
  2947	003277	1 002000 0 1 0 000 		LDBR	0			;CLEAR "TO HLD OUT"
  2948	003300	1 064051 3 2 0 02 11 		MOVB	TOR0
  2949	003301	1 117703 4 7 1703 		REPEAT	TST
  2950	003302	1 115216 4 6 1216 
  2951
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 20
MCOD3M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 2

  2952						TEST	194,TEST CONTROL UNIT ADDRESS COMPARISION LOGIC
  2953					;***********************************************************************
  2954					;* MCODE3 * TEST 194 *    TEST CONTROL UNIT ADDRESS COMPARISION LOGIC
  2955					;***********************************************************************
  2956						SALL
  2957	003303	1 002302 0 1 0 302 
  2958	003304	1 117670 4 7 1670 
  2959
  2960	003305				TST194:	SALL
  2961
  2962					;*DETERMINE THE ADDRESS(ES) WHICH THE CONTROL UNIT LOGIC WILL RESPOND TO,
  2963					;*I.E., THOSE ADDRESSES WHICH RESULT IN "SLVE SEL" GETTING SET.
  2964					;*ALSO, CHECK THAT "SLVE SEL" DOES NOT SET IF "BUS0 ODD PAR" IS CLEARED OR
  2965					;*IF "ADR IN" IS NOT SET.
  2966
  2967					;*SET "ADR IN".
  2968					;*INPUT ADDRESS 0 INTO CBI BITS WITH GOOD PARITY.
  2969					;*SET "REC SEL FF".
  2970					;*CHECK IF "SLVE SEL" IS SET.
  2971					;*KEEP INCREMENTING THE ADDRESS UNTIL "SLVE SEL" SETS.
  2972					;*IF IT DOESN'T SET FOR ALL ADDRESSES, REPORT AN ERROR.
  2973
  2974	003305	1 117515 4 7 1515 		JMPSUB	INITL			;DO A MICROBUS INIT
  2975	003306	1 002044 0 1 0 044 		LDBR	LOOPEN+EVPAR		;SET LOOP ENABLE AND "EVEN PAR", SO
  2976	003307	1 064031 3 2 0 01 11 		MOVB	CSR1			;CBI PARITY IS ODD
  2977	003310	1 002020 0 1 0 020 		LDBR	ADRINL			;SET "ADR IN"
  2978	003311	1 064051 3 2 0 02 11 		MOVB	TOR0
  2979	003312	1 002000 0 1 0 000 		LDBR	0			;INIT ADDRESS TO ZERO
  2980	003313	1 072031 3 5 0 01 11 		MOVB	AC1
  2981	003314	1 002022 0 1 0 022 	CUADLP:	LDBR	ADRINL+SELINL		;SET "ADR IN" AND "SEL IN" AND
  2982	003315	1 064051 3 2 0 02 11 		MOVB	TOR0			;CLEAR "TO HLD OUT"
  2983	003316	1 002000 0 1 0 000 		LDBR	0			;SETUP ZERO REG TO COMPLEMENT ADDRESS
  2984	003317	1 072051 3 5 0 02 11 		MOVB	AC2
  2985	003320	1 062030 3 1 0 01 10 		MOV	AC1,BR			;MOVE ADDR TO BR
  2986	003321	1 062052 3 1 0 02 12 		LORCB	AC2,BR			;COMPLEMENT IT
  2987	003322	1 064231 3 2 0 11 11 		MOVB	BORLO			;LOAD IT INTO BORLO
  2988	003323	1 002032 0 1 0 032 		LDBR	ADRINL+SELINL+TOHOUT	;SET "TO HLD OUT"
  2989	003324	1 064051 3 2 0 02 11 		MOVB	TOR0
  2990	003325	1 022000 1 1 0 00 00 		DATI	CSR0,BR			;READ "SLVE SEL"
  2991	003326	1 105336 4 2 1336 		JMPB0	LOWADR			;JUMP IF IT SET
  2992	003327	1 072023 3 5 0 01 03 		INCR	AC1			;INC ADDRESS
  2993	003330	1 113332 4 5 1332 		JMPC	.+2			;JUMP IF ALL ADDRESSES TESTED
  2994	003331	1 101314 4 0 1314 		JMP	CUADLP			;ELSE, CONTINUE
  2995	003332	1 117701 4 7 1701 		ERROR	TST,"SLVE SEL" DIDN'T SET FOR ALL ADDRESSES
  2996
  2997						ERLOOP	TST			^SALL
  2998	003333	1 002000 0 1 0 000 
  2999	003334	1 117673 4 7 1673 
  3000	003335	1 115305 4 6 1305 
  3001					;*AFTER FINDING THE LOWEST RESPONDING ADDRESS, DETERMINE WHICH BITS
  3002					;*ARE DON'T CARE.  TO DO THIS, COMPLEMENT EACH BIT IN THE LOWEST ADDRESS,
  3003					;*ONE AT A TIME, AND CHECK IF THE LOGIC RESPONDS TO THESE ADDRESSES.
  3004					;*SEND THE HOST THE LOWEST ADDRESS PLUS A MASK OF THE "DON'T CARE" BITS.
  3005					;*FROM THIS THE HOST CAN DISPLAY THE SET OF ADDRESSES WHICH THE LOGIC IS
  3006					;*SETUP TO RESPOND TO.
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 20-1
MCOD3M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 2

  3007
  3008	003336	1 002001 0 1 0 001 	LOWADR:	LDBR	1			;INITIALIZE "DON'T CARE" BIT COMPLEMENTOR
  3009	003337	1 072051 3 5 0 02 11 		MOVB	AC2
  3010	003340	1 002000 0 1 0 000 		LDBR	0			;INITIALIZE "DON'T CARE" MASK
  3011	003341	1 072011 3 5 0 00 11 		MOVB	AC0
  3012	003342	1 002007 0 1 0 007 		LDBR	7			;SETUP LOOP CNT MINUS 1
  3013	003343	1 072071 3 5 0 03 11 		MOVB	AC3
  3014	003344	1 002001 0 1 0 001 		LDBR	CSLVSL			;CLEAR "SLVE SEL"
  3015	003345	1 064011 3 2 0 00 11 		MOVB	CSR0
  3016	003346	1 002022 0 1 0 022 	DCLP:	LDBR	ADRINL+SELINL		;CLEAR "TO HLD OUT"
  3017	003347	1 064051 3 2 0 02 11 		MOVB	TOR0
  3018	003350	1 062030 3 1 0 01 10 		MOV	AC1,BR			;MOVE LOW ADDR TO BR
  3019	003351	1 062055 3 1 0 02 15 		LXORB	AC2,BR			;XOR ADDR WITH "DON'T CARE" BIT
  3020	003352	1 010000 0 4 0 000 		LDMEM	0			;SETUP ZERO REG TO DO COMPLEMENT
  3021	003353	1 052111 2 5 0 04 11 		MOVMEM	AC4
  3022	003354	1 062112 3 1 0 04 12 		LORCB	AC4,BR			;COMPLEMENT NEW ADDRESS
  3023	003355	1 064231 3 2 0 11 11 		MOVB	BORLO			;LOAD INTO BORLO
  3024	003356	1 002032 0 1 0 032 		LDBR	ADRINL+SELINL+TOHOUT	;SET "TO HLD OUT"
  3025	003357	1 064051 3 2 0 02 11 		MOVB	TOR0
  3026	003360	1 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  3027	003361	1 022000 1 1 0 00 00 		DATI	CSR0,BR			;READ "SLVE SEL"
  3028	003362	1 105367 4 2 1367 		JMPB0	ADMTCH			;JUMP IF IT SET (RESPONDED TO ADDR)
  3029	003363	1 072045 3 5 0 02 05 	NXBIT:	SHLR	AC2			;SHIFT "DON'T CARE" BIT
  3030	003364	1 072067 3 5 0 03 07 		DECR	AC3			;DEC LOOP CNT
  3031	003365	1 115374 4 6 1374 		JMPZ	ADDONE			;JUMP IF DONE
  3032	003366	1 101346 4 0 1346 		JMP	DCLP			;ELSE, CONTINUE
  3033
  3034	003367	1 062050 3 1 0 02 10 	ADMTCH:	MOV	AC2,BR			;MOVE "DON'T CARE" BIT TO BR
  3035	003370	1 072014 3 5 0 00 14 		LORBR	AC0			;ADD THIS TO MASK
  3036	003371	1 002001 0 1 0 001 		LDBR	CSLVSL			;CLEAR "SLVE SEL"
  3037	003372	1 064011 3 2 0 00 11 		MOVB	CSR0
  3038	003373	1 101363 4 0 1363 		JMP	NXBIT			;GO ON TO NEXT BIT
  3039
  3040	003374	1 002011 0 1 0 011 	ADDONE:	LDBR	11			;SELECT MASSBUS INTERFACE
  3041	003375	1 066371 3 3 0 17 11 		MOVB	IOSEL
  3042	003376	1 062030 3 1 0 01 10 		MOV	AC1,BR			;GET LOW ADDR
  3043	003377	1 066051 3 3 0 02 11 		MOVB	MPGP12			;STORE FOR PRINTOUT
  3044	003400	1 062010 3 1 0 00 10 		MOV	AC0,BR			;GET MASK
  3045	003401	1 066071 3 3 0 03 11 		MOVB	MPGP13			;STORE FOR PRINTOUT
  3046	003402	1 002033 0 1 0 033 		LDBR	33			;SELECT CHAN BUS INTERFACE
  3047	003403	1 066371 3 3 0 17 11 		MOVB	IOSEL
  3048	003404	1 117705 4 7 1705 		SNDADR				;SEND CU ADDR INFO TO HOST
  3049
  3050					;*SET ADDRESS TO LOW ADDRESS
  3051					;*CLEAR "ADR IN".
  3052					;*TOGGLE "REC SEL FF".
  3053					;*CHECK THAT "SLVE SEL" DOES NOT SET.
  3054
  3055	003405	1 002000 0 1 0 000 	ADSTP:	LDBR	0			;SETUP TO DO COMPLEMENT
  3056	003406	1 072111 3 5 0 04 11 		MOVB	AC4
  3057	003407	1 062030 3 1 0 01 10 		MOV	AC1,BR			;MOVE ADDR TO BR
  3058	003410	1 062112 3 1 0 04 12 		LORCB	AC4,BR			;COMPLEMENT LOW ADDR
  3059	003411	1 064231 3 2 0 11 11 		MOVB	BORLO			;LOAD IT IN BORLO
  3060	003412	1 002002 0 1 0 002 	CUADR1:	LDBR	SELINL			;CLEAR "TO HLD OUT" AND "ADR IN"
  3061	003413	1 064051 3 2 0 02 11 		MOVB	TOR0
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 20-2
MCOD3M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 2

  3062	003414	1 002001 0 1 0 001 		LDBR	CSLVSL			;CLEAR "SLVE SEL"
  3063	003415	1 064011 3 2 0 00 11 		MOVB	CSR0
  3064	003416	1 002012 0 1 0 012 		LDBR	SELINL+TOHOUT		;SET "TO HLD OUT"
  3065	003417	1 064051 3 2 0 02 11 		MOVB	TOR0
  3066	003420	1 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  3067	003421	1 022000 1 1 0 00 00 		DATI	CSR0,BR			;READ "SLVE SEL"
  3068	003422	1 105424 4 2 1424 		JMPB0	.+2			;JUMP IF IT SET, SHOULDN'T HAVE
  3069	003423	1 101425 4 0 1425 		JMP	.+2			;ELSE, OKAY
  3070	003424	1 117701 4 7 1701 		ERROR	CUADR1,"SLVE SEL" SET WITH "ADR IN" AND "SUP OUT" CLEARED
  3071
  3072						ERLOOP	CUADR1			^SALL
  3073	003425	1 002001 0 1 0 001 
  3074	003426	1 117673 4 7 1673 
  3075	003427	1 115412 4 6 1412 
  3076					;*SET "ADR IN".
  3077					;*CLEAR "EVEN PAR" TO CAUSE CBI PARITY ERROR.
  3078					;*TOGGLE "REC SEL FF".
  3079					;*CHECK THAT "SLVE SEL" DOES NOT SET.
  3080
  3081	003430	1 002004 0 1 0 004 		LDBR	LOOPEN			;CLEAR "EVEN PAR"
  3082	003431	1 064031 3 2 0 01 11 		MOVB	CSR1
  3083	003432	1 002022 0 1 0 022 	CUADR2:	LDBR	SELINL+ADRINL		;CLEAR "TO HLD OUT" AND SET "ADR IN"
  3084	003433	1 064051 3 2 0 02 11 		MOVB	TOR0
  3085	003434	1 002001 0 1 0 001 		LDBR	CSLVSL			;CLEAR "SLVE SEL"
  3086	003435	1 064011 3 2 0 00 11 		MOVB	CSR0
  3087	003436	1 002032 0 1 0 032 		LDBR	ADRINL+SELINL+TOHOUT	;SET "TO HLD OUT"
  3088	003437	1 064051 3 2 0 02 11 		MOVB	TOR0
  3089	003440	1 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  3090	003441	1 022000 1 1 0 00 00 		DATI	CSR0,BR			;READ "SLVE SEL"
  3091	003442	1 105444 4 2 1444 		JMPB0	.+2			;JUMP IF IT SET, SHOULDN'T HAVE
  3092	003443	1 101445 4 0 1445 		JMP	.+2			;ELSE, OKAY
  3093	003444	1 117701 4 7 1701 		ERROR	CUADR2,"SLVE SEL" SET WITH "BUS0 ODD PAR" CLEARED
  3094
  3095						ERLOOP	CUADR2			^SALL
  3096	003445	1 002002 0 1 0 002 
  3097	003446	1 117673 4 7 1673 
  3098	003447	1 115432 4 6 1432 
  3099	003450	1 117703 4 7 1703 		REPEAT	TST
  3100	003451	1 115305 4 6 1305 
  3101
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 21
MCOD3M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 2

  3102						TEST	195,TEST MK PE FLAG
  3103					;***********************************************************************
  3104					;* MCODE3 * TEST 195 *    TEST MK PE FLAG
  3105					;***********************************************************************
  3106						SALL
  3107	003452	1 002303 0 1 0 303 
  3108	003453	1 117670 4 7 1670 
  3109
  3110	003454				TST195:	SALL
  3111
  3112					;*READ REG 7.
  3113					;*CHECK THAT "MK PE FLAG" IS NOT SET.
  3114
  3115	003454	1 002002 0 1 0 002 		LDBR	CLRFLG			;CLEAR ALL FLAGS
  3116	003455	1 064011 3 2 0 00 11 		MOVB	CSR0
  3117	003456	1 020007 1 0 0 00 07 		DATI	CBILO			;READ REG 7
  3118	003457	1 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  3119	003460	1 032000 1 5 0 00 00 		DATI	CSR0,AC0		;READ REG 0
  3120	003461	1 062005 3 1 0 00 05 		SHL	AC0,BR			;MOVE "MK PE FLAG" TO BIT 4
  3121	003462	1 107464 4 3 1464 		JMPB4	.+2			;JUMP IF IT SET,SHOULDN'T HAVE
  3122	003463	1 101465 4 0 1465 		JMP	.+2			;ELSE, OKAY
  3123	003464	1 117701 4 7 1701 		ERROR	TST,"MK PE FLAG" SET WHEN DIAG READ REG 7
  3124
  3125						ERLOOP	TST			^SALL
  3126	003465	1 002000 0 1 0 000 
  3127	003466	1 117673 4 7 1673 
  3128	003467	1 115454 4 6 1454 
  3129	003470	1 117703 4 7 1703 		REPEAT	TST
  3130	003471	1 115454 4 6 1454 
  3131
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 22
MCOD3M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 2

  3132						TEST	196,TEST "BUS1 PE FLAG"
  3133					;***********************************************************************
  3134					;* MCODE3 * TEST 196 *    TEST "BUS1 PE FLAG"
  3135					;***********************************************************************
  3136						SALL
  3137	003472	1 002304 0 1 0 304 
  3138	003473	1 117670 4 7 1670 
  3139
  3140	003474				TST196:	SALL
  3141
  3142					;*READ REGISTER 13 TO MAKE SURE IT DOES NOT SET "BUS1 PE FLAG" IN
  3143					;*REGISTER 0.
  3144
  3145	003474	1 002002 0 1 0 002 		LDBR	CLRFLG			;CLEAR ALL FLAGS
  3146	003475	1 064011 3 2 0 00 11 		MOVB	CSR0
  3147	003476	1 020013 1 0 0 00 13 		DATI	CBIHI			;READ REG 13
  3148	003477	1 000000 0 0 0 000 		NOP				;DELAY BEFORE DOING DATI
  3149	003500	1 032000 1 5 0 00 00 		DATI	CSR0,AC0		;READ REG 0
  3150	003501	1 014000 0 6 0 000 		SHR				;RIGHT ADJUST "BUS1 PE FLAG" BIT
  3151	003502	1 014000 0 6 0 000 		SHR
  3152	003503	1 105505 4 2 1505 		JMPB0	.+2			;JUMP IF IT SET INCORRECTLY
  3153	003504	1 101506 4 0 1506 		JMP	.+2			;ELSE, RESULTS OKAY
  3154	003505	1 117701 4 7 1701 		ERROR	TST,"BUS1 PE FLAG" SET WHEN DIAG READ REG 13
  3155
  3156						ERLOOP	TST			^SALL
  3157	003506	1 002000 0 1 0 000 
  3158	003507	1 117673 4 7 1673 
  3159	003510	1 115474 4 6 1474 
  3160	003511	1 117703 4 7 1703 		REPEAT TST
  3161	003512	1 115474 4 6 1474 
  3162
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 23
MCOD3M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 2

  3163	003513	1 101666 4 0 1666 		JMP	END			;JUMP AROUND SUBROUTINES
  3164
  3165	003514	1 016377 0 7 0 377 	ZRTNH:	RETURN	-1
  3166
  3167	003515	1 002233 0 1 0 233 	INITL:	LDBR	INIT+33			;SET INIT
  3168	003516	1 066371 3 3 0 17 11 		MOVB	IOSEL
  3169	003517	1 002033 0 1 0 033 		LDBR	33			;CLR INIT & SELECT CB
  3170	003520	1 066371 3 3 0 17 11 		MOVB	IOSEL
  3171	003521	1 001000 0 0 2 000 		LDMAR	0			;PUT MEMORY ADDRESS TO 0
  3172	003522	1 010000 0 4 0 000 		LDMEM	0			;CLR MEMORY LOC. 0
  3173	003523	1 016000 0 7 0 000 		RETURN
  3174
  3175					;"WAIT" IS USED TO WAIT APPROX 20 MS.  IT CONSISTS OF AN INNER WAIT LOOP
  3176					;OF APPROX 960 NSEC AND AN OUTER LOOP OF APPROX 200 USEC.
  3177	003524	1 002144 0 1 0 144 	WAIT:	LDBR	^D100			;SET OUTER LOOP WAIT COUNT
  3178	003525	1 072011 3 5 0 00 11 		MOVB	AC0
  3179	003526	1 002317 0 1 0 317 	WAITO:	LDBR	^D207			;SET INNER LOOP WAIT COUNT
  3180	003527	1 072031 3 5 0 01 11 		MOVB	AC1
  3181	003530	1 072027 3 5 0 01 07 	WAITI:	DECR	AC1			;DEC INNER LOOP COUNT
  3182	003531	1 115533 4 6 1533 		JMPZ	.+2			;JUMP IF INNER LOOP TIMED OUT
  3183	003532	1 101530 4 0 1530 		JMP	WAITI			;ELSE, CONTINUE
  3184	003533	1 072007 3 5 0 00 07 		DECR	AC0			;DEC OUTER LOOP COUNT
  3185	003534	1 115536 4 6 1536 		JMPZ	.+2			;JUMP IF OUTER LOOP TIMED OUT
  3186	003535	1 101526 4 0 1526 		JMP	WAITO			;ELSE CONTINUE
  3187	003536	1 016000 0 7 0 000 		RETURN
  3188
  3189	003537	1 002377 0 1 0 377 	LOADDR:	LDBR	-1			;LOAD ONES INTO BORLO
  3190	003540	1 064231 3 2 0 11 11 		MOVB	BORLO
  3191	003541	1 064151 3 2 0 06 11 		MOVB	CLKDRL			;LOAD ZEROS INTO DRLO
  3192	003542	1 002000 0 1 0 000 		LDBR	0			;LOAD ZEROS INTO BORLO
  3193	003543	1 064231 3 2 0 11 11 		MOVB	BORLO
  3194	003544	1 016000 0 7 0 000 		RETURN
  3195
  3196
  3197	003545	1 002011 0 1 0 011 	DEVRD:	LDBR	11			;SELECT MASSBUS INTERFACE
  3198	003546	1 066371 3 3 0 17 11 		MOVB	IOSEL
  3199	003547	1 002000 0 1 0 000 		LDBR	0			;SETUP FOR A DEVICE READ
  3200	003550	1 064031 3 2 0 01 11 		MOVB	MPSCR1
  3201	003551	1 002033 0 1 0 033 		LDBR	33			;SELECT CHANNEL BUS INTERFACE
  3202	003552	1 066371 3 3 0 17 11 		MOVB	IOSEL
  3203	003553	1 016000 0 7 0 000 		RETURN
  3204
  3205	003554	1 002011 0 1 0 011 	DEVWR:	LDBR	11			;SELECT MASSBUS INTERFACE
  3206	003555	1 066371 3 3 0 17 11 		MOVB	IOSEL
  3207	003556	1 002010 0 1 0 010 		LDBR	DTD			;SETUP FOR A DEVICE WRITE
  3208	003557	1 064031 3 2 0 01 11 		MOVB	MPSCR1
  3209	003560	1 002033 0 1 0 033 		LDBR	33			;SELECT CHANNEL BUS INTERFACE
  3210	003561	1 066371 3 3 0 17 11 		MOVB	IOSEL
  3211	003562	1 016000 0 7 0 000 		RETURN
  3212
  3213	003563	1 002011 0 1 0 011 	SETPNT:	LDBR	11			;SELECT MASSBUS INTERFACE
  3214	003564	1 066371 3 3 0 17 11 		MOVB	IOSEL
  3215	003565	1 044351 2 2 0 16 11 		MOVMEM	MPGP6			;STORE ADDITIONAL PNT ROUTINE NUMBER
  3216	003566	1 002033 0 1 0 033 		LDBR	33			;SELECT CHANNEL BUS INTERFACE
  3217	003567	1 066371 3 3 0 17 11 		MOVB	IOSEL
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 23-1
MCOD3M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 2

  3218	003570	1 016000 0 7 0 000 		RETURN
  3219
  3220	003571	1 002011 0 1 0 011 	SETDAT:	LDBR	11			;SELECT MASSBUS INTERFACE
  3221	003572	1 066371 3 3 0 17 11 		MOVB	IOSEL
  3222	003573	1 046051 2 3 0 02 11 		MOVMEM	MPGP12			;STORE DATA FOR PRINTOUT
  3223	003574	1 002033 0 1 0 033 		LDBR	33			;SELECT CHAN BUS INTERFACE
  3224	003575	1 066371 3 3 0 17 11 		MOVB	IOSEL
  3225	003576	1 016000 0 7 0 000 		RETURN
  3226
  3227	003577	1 002000 0 1 0 000 	RDBRP0:	LDBR	0			;SET "BOR P0" INDEX
  3228	003600	1 064131 3 2 0 05 11 		MOVB	SPADR
  3229	003601	1 101654 4 0 1654 		JMP	RDIT
  3230
  3231	003602	1 002002 0 1 0 002 	RDB0OD:	LDBR	2			;SET "BUS0 ODD PAR" INDEX
  3232	003603	1 064131 3 2 0 05 11 		MOVB	SPADR
  3233	003604	1 101654 4 0 1654 		JMP	RDIT
  3234
  3235	003605	1 002003 0 1 0 003 	RDSEX:	LDBR	3			;SET "SLVE END XFER" INDEX
  3236	003606	1 064131 3 2 0 05 11 		MOVB	SPADR
  3237	003607	1 101654 4 0 1654 		JMP	RDIT
  3238
  3239	003610	1 002004 0 1 0 004 	RDTSFF:	LDBR	4			;SET "TRA SEL FF" INDEX
  3240	003611	1 064131 3 2 0 05 11 		MOVB	SPADR
  3241	003612	1 101654 4 0 1654 		JMP	RDIT
  3242
  3243	003613	1 002005 0 1 0 005 	RDAMK1:	LDBR	5			;SET "ALLOW MK 1 OUT" INDEX
  3244	003614	1 064131 3 2 0 05 11 		MOVB	SPADR
  3245	003615	1 101654 4 0 1654 		JMP	RDIT
  3246
  3247	003616	1 002006 0 1 0 006 	RDODDE:	LDBR	6			;SET "ODD END" INDEX
  3248	003617	1 064131 3 2 0 05 11 		MOVB	SPADR
  3249	003620	1 101654 4 0 1654 		JMP	RDIT
  3250
  3251	003621	1 002007 0 1 0 007 	RD2BYT:	LDBR	7			;SET "2ND BYTE" INDEX
  3252	003622	1 064131 3 2 0 05 11 		MOVB	SPADR
  3253	003623	1 101654 4 0 1654 		JMP	RDIT
  3254
  3255	003624	1 002010 0 1 0 010 	RDRRDY:	LDBR	10			;SET "DR READY" INDEX
  3256	003625	1 064131 3 2 0 05 11 		MOVB	SPADR
  3257	003626	1 101654 4 0 1654 		JMP	RDIT
  3258
  3259	003627	1 002011 0 1 0 011 	RDSLRQ:	LDBR	11			;SET "SLVE REQ" INDEX
  3260	003630	1 064131 3 2 0 05 11 		MOVB	SPADR
  3261	003631	1 101654 4 0 1654 		JMP	RDIT
  3262
  3263	003632	1 002012 0 1 0 012 	RDRDLY:	LDBR	12			;SET "DATA RDY DLY" INDEX
  3264	003633	1 064131 3 2 0 05 11 		MOVB	SPADR
  3265	003634	1 101654 4 0 1654 		JMP	RDIT
  3266
  3267	003635	1 002013 0 1 0 013 	RDCUIN:	LDBR	13			;SET "CU INIT" INDEX
  3268	003636	1 064131 3 2 0 05 11 		MOVB	SPADR
  3269	003637	1 101654 4 0 1654 		JMP	RDIT
  3270
  3271	003640	1 002014 0 1 0 014 	RDENSD:	LDBR	14			;SET "EN SRV/DAT OUT" INDEX
  3272	003641	1 064131 3 2 0 05 11 		MOVB	SPADR
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 23-2
MCOD3M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 2

  3273	003642	1 101654 4 0 1654 		JMP	RDIT
  3274
  3275	003643	1 002015 0 1 0 015 	RDSDRQ:	LDBR	15			;SET "ST DATA REQ" INDEX
  3276	003644	1 064131 3 2 0 05 11 		MOVB	SPADR
  3277	003645	1 101654 4 0 1654 		JMP	RDIT
  3278
  3279	003646	1 002016 0 1 0 016 	RDDSRQ:	LDBR	16			;SET "NOT DIS SLVE REQ" INDEX
  3280	003647	1 064131 3 2 0 05 11 		MOVB	SPADR
  3281	003650	1 101654 4 0 1654 		JMP	RDIT
  3282
  3283	003651	1 002017 0 1 0 017 	RDDPPE:	LDBR	17			;SET "DP PE" INDEX
  3284	003652	1 064131 3 2 0 05 11 		MOVB	SPADR
  3285	003653	1 101654 4 0 1654 		JMP	RDIT
  3286
  3287	003654	1 022003 1 1 0 00 03 	RDIT:	DATI	TOR1,BR			;READ REG 3
  3288	003655	1 014000 0 6 0 000 		SHR				;RIGHT ADJUST DIAG MUX BIT
  3289	003656	1 014000 0 6 0 000 		SHR
  3290	003657	1 016000 0 7 0 000 		RETURN
  3291
  3292	003660	1 002022 0 1 0 022 	DPINIT:	LDBR	22			;SELECT DATA PATH
  3293	003661	1 066371 3 3 0 17 11 		MOVB	IOSEL
  3294	003662	1 064271 3 2 0 13 11 		MOVB	HSDPIN
  3295	003663	1 002033 0 1 0 033 		LDBR	33			;SELECT CHANNEL BUS INTERFACE
  3296	003664	1 066371 3 3 0 17 11 		MOVB	IOSEL
  3297	003665	1 016000 0 7 0 000 		RETURN
  3298
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 24
MCOD3M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 2

  3299	003666	1 002225 0 1 0 225 	END:	.ECRAM
  3300	003667	1 160211 7 0 0 10 11 
  3301	003670	1 072131 3 5 0 05 11 
  3302	003671	1 002044 0 1 0 044 
  3303	003672	1 160211 7 0 0 10 11 
  3304	003673	1 072131 3 5 0 05 11 
  3305	003674	1 002142 0 1 0 142 
  3306	003675	1 160211 7 0 0 10 11 
  3307	003676	1 072131 3 5 0 05 11 
  3308	003677	1 002146 0 1 0 146 
  3309	003700	1 160211 7 0 0 10 11 
  3310	003701	1 002104 0 1 0 104 
  3311	003702	1 160211 7 0 0 10 11 
  3312	003703	1 002222 0 1 0 222 
  3313	003704	1 160211 7 0 0 10 11 
  3314	003705	1 002200 0 1 0 200 
  3315	003706	1 072131 3 5 0 05 11 
  3316	003707	1 002203 0 1 0 203 
  3317	003710	1 160211 7 0 0 10 11 
  3318	003711	777777	777777		.MEM
  3319	000000	000000	000000			0
  3320	000001	777777	777777		PATS:	-1
  3321	000002	000000	000000			0
  3322	000003	000000	000376		FLTZ:	376
  3323	000004	000000	000375			375
  3324	000005	000000	000373			373
  3325	000006	000000	000367			367
  3326	000007	000000	000357			357
  3327	000010	000000	000337			337
  3328	000011	000000	000277			277
  3329	000012	000000	000177			177
  3330	000013	000000	000001		FLTO:	1
  3331	000014	000000	000002			2
  3332	000015	000000	000004			4
  3333	000016	000000	000010			10
  3334	000017	000000	000020			20
  3335	000020	000000	000040			40
  3336	000021	000000	000100			100
  3337	000022	000000	000200			200
  3338	000023	000000	000374		FLTZA:	374
  3339	000024	000000	000371			371
  3340	000025	000000	000365			365
  3341	000026	000000	000355			355
  3342	000027	000000	000335			335
  3343	000030	000000	000235			235
  3344	000031	000000	000135			135
  3345	000032	000000	000001			1
  3346	000033	000000	000004			4
  3347	000034	000000	000010			10
  3348	000035	000000	000020			20
  3349	000036	000000	000040			40
  3350	000037	000000	000100			100
  3351	000040	000000	000200			200
  3352	000041	000000	000372		FLTZB:	372
  3353	000042	000000	000371			371
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 24-1
MCOD3M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 2

  3354	000043	000000	000363			363
  3355	000044	000000	000353			353
  3356	000045	000000	000333			333
  3357	000046	000000	000273			273
  3358	000047	000000	000173			173
  3359	000050	000000	000001			1
  3360	000051	000000	000002			2
  3361	000052	000000	000010			10
  3362	000053	000000	000020			20
  3363	000054	000000	000040			40
  3364	000055	000000	000100			100
  3365	000056	000000	000200			200
  3366	000057	000000	000340		FLTZC:	340
  3367	000060	000000	000320			320
  3368	000061	000000	000260			260
  3369	000062	000000	000160			160
  3370	000063	000000	000020			20
  3371	000064	000000	000040			40
  3372	000065	000000	000100			100
  3373	000066	000000	000200			200
  3374	000067	000000	000360		FLTZD:	360
  3375	000070	000000	000350			350
  3376	000071	000000	000330			330
  3377	000072	000000	000270			270
  3378	000073	000000	000170			170
  3379	000074	000000	000010			10
  3380	000075	000000	000020			20
  3381	000076	000000	000040			40
  3382	000077	000000	000100			100
  3383	000100	000000	000200			200
  3384	000101	000000	000016		FLTZE:	16
  3385	000102	000000	000015			15
  3386	000103	000000	000013			13
  3387	000104	000000	000007			7
  3388	000105	000000	000001			1
  3389	000106	000000	000002			2
  3390	000107	000000	000004			4
  3391	000110	000000	000010			10
  3392	000111	000000	000334		FLTZF:	334
  3393	000112	000000	000332			332
  3394	000113	000000	000326			326
  3395	000114	000000	000316			316
  3396	000115	000000	000236			236
  3397	000116	000000	000136			136
  3398	000117	000000	000002			2
  3399	000120	000000	000004			4
  3400	000121	000000	000010			10
  3401	000122	000000	000020			20
  3402	000123	000000	000100			100
  3403	000124	000000	000200			200
  3404	000125	000000	000006		FLTZG:	6
  3405	000126	000000	000005			5
  3406	000127	000000	000003			3
  3407	000130	000000	000001			1
  3408	000131	000000	000002			2
MCODE3 	DX20 MICRO-DIAGNOSTIC OF THE CHANNEL BUS INTERFACE - PART 2  VERSION 0.	MACRO %53B(1252) 15:37  6-Mar-89 Page 24-2
MCOD3M	MAC	 6-Mar-89 15:13		CHANNEL BUS INTERFACE TEST - PART 2

  3409	000132	000000	000004			4
  3410	000133	000000	000011		EPATS:	11
  3411	000134	000000	000102			102
  3412	000135	000000	000220			220
  3413	000136	000000	000366			366
  3414	000137	000000	000044		OPATS:	44
  3415	000140	000000	000157			157
  3416	000141	000000	000275			275
  3417	000142	000000	000333			333
  3418	000143	000000	000000		RAMADR:	0
  3419	000144	000000	000001			1
  3420	000145	000000	000002			2
  3421	000146	000000	000004			4
  3422	000147	000000	000010			10
  3423	000150	777777	777777			-1
  3424					.END
  3425
  3426						END

NO ERRORS DETECTED

PROGRAM BREAK IS 000000
ABSOLUTE BREAK IS 004063
CPU TIME USED 02:43.952

27P CORE USED

AC0	   620	   781	   783	   785	   813	   815	   834	   835	   836	  1237	  1240	  1308	  1314	  1318
	  1389	  1395	  1399	  1446	  1447	  1589	  1590	  1641	  1844	  1845	  1884	  1885	  1943	  1944
	  2635	  2637	  2638	  2652	  2653	  2654	  2670	  2672	  2673	  3011	  3035	  3044	  3119	  3120
	  3149	  3178	  3184
AC1	   618	   774	   777	   795	   875	   901	   914	   940	  1232	  1255	  1291	  1295	  1301	  1311
	  1329	  1364	  1369	  1375	  1382	  1393	  2666	  2682	  2980	  2985	  2992	  3018	  3042	  3057
	  3180	  3181
AC2	   776	   784	   794	  1293	  1326	  1367	  1368	  1372	  1407	  2984	  2986	  3009	  3019	  3029
	  3034
AC3	  1298	  1299	  1361	  1362	  1363	  3013	  3030
AC4	   548	   553	  3021	  3022	  3056	  3058
AC5	   516	   518	   520	   526	   560	   561	   563	   582	   584	   589	   593	   598	   601	   604
	   609	   615	   622	   645	   647	   656	   658	  3301	  3304	  3307	  3315
AC6	   529	   533	   543	   667
AC7	   501	   536	   537	   570	   575	   579	   583	   596	   599
ADDONE	  3031	  3040#
ADMTCH	  3028	  3034#
ADRIN	   132#
ADRINL	   162#	  2448	  2493	  2518	  2539	  2583	  2809	  2811	  2977	  2981	  2988	  3016	  3024	  3083
	  3087
ADROUT	   110#
ADSTP	  3055#
ATA	   212#	   562	   588	   600	   649	   660	   678
B0PE1	  1015#	  1052
B0PE2	  1032#	  1068
B0PE3	  1056#	  1090
BEGEND	   673#	  3299
BEGIN	   486#	   681
BORHI	    66#
BORLO	    62#	   877	   916	  1128	  1182	  1234	  1433	  2987	  3023	  3059	  3190	  3193
BUS0PE	    86#
BUS1PE	    85#
C	   269#
CALL	   639	   641	   643	   645#
CALL0	   646#	  3316
CATAB	   635	  1854	  1895	  1905	  1934	  1952	  1985	  2014	  2028	  2062	  2095	  2133	  2143	  2168
	  2190	  2215	  2240	  2282	  2292	  2306	  2331	  2350	  2372	  2395	  2420	  2463	  2473	  2486
	  2513	  2534	  2555	  2577	  2601	  2645	  2661	  2681	  2729	  2744	  2764	  2784	  2800	  2823
	  2848	  2889	  2903	  2920	  2946	  3000	  3075	  3098	  3128	  3159
CBIHI	    64#	  3147
CBILO	    60#	   971	   999	  1308	  1389	  1446	  3117
CHANL	   103#	   714	   716	   771	   804	   828	  1032	  1034	  1129	  1131	  1179	  1288	  1358	  1437
	  1439	  2077	  2079	  2149	  2199	  2224	  2317	  2357	  2380	  2405	  2499	  2541	  2563	  2587
CHKLOP	   623#	   661
CHKLP	   624#
CKTRM	   656#
CKTRM0	   657#
CLKDRL	    72#	  1235	  3191
CLKOUT	   108#
CLRFLG	    91#	   967	  1056	  1215	  3115	  3145
CLRGO	   205#	   519
CLSLRQ	    71#	  1148	  1199
CMDF0	   495	   511#
CMDOUT	   114#
CMPERR	   206#
CORF	   732#	   734	   742#	   744	   789#	   791	   819#	   821	   839#	   841	   886#	   888	   896#	   898
	   924#	   926	   935#	   937	   978#	   980	   988#	   990	  1006#	  1008	  1022#	  1024	  1048#	  1050
	  1064#	  1066	  1086#	  1088	  1140#	  1142	  1155#	  1157	  1165#	  1167	  1191#	  1193	  1206#	  1208
	  1223#	  1225	  1250#	  1252	  1321#	  1323	  1402#	  1404	  1451#	  1453	  1503#	  1505	  1514#	  1516
	  1524#	  1526	  1535#	  1537	  1545#	  1547	  1556#	  1558	  1566#	  1568	  1584#	  1586	  1594#	  1596
	  1604#	  1606	  1615#	  1617	  1625#	  1627	  1636#	  1638	  1645#	  1647	  1664#	  1666	  1680#	  1682
	  1702#	  1704	  1744#	  1746	  1755#	  1757	  1771#	  1773	  1794#	  1796	  1850#	  1852	  1891#	  1893
	  1901#	  1903	  1930#	  1932	  1948#	  1950	  1981#	  1983	  2010#	  2012	  2024#	  2026	  2058#	  2060
	  2091#	  2093	  2129#	  2131	  2139#	  2141	  2164#	  2166	  2186#	  2188	  2211#	  2213	  2236#	  2238
	  2278#	  2280	  2288#	  2290	  2302#	  2304	  2327#	  2329	  2346#	  2348	  2368#	  2370	  2391#	  2393
	  2416#	  2418	  2459#	  2461	  2469#	  2471	  2482#	  2484	  2509#	  2511	  2530#	  2532	  2551#	  2553
	  2573#	  2575	  2597#	  2599	  2641#	  2643	  2657#	  2659	  2677#	  2679	  2725#	  2727	  2740#	  2742
	  2760#	  2762	  2780#	  2782	  2796#	  2798	  2819#	  2821	  2844#	  2846	  2885#	  2887	  2899#	  2901
	  2916#	  2918	  2942#	  2944	  2996#	  2998	  3071#	  3073	  3094#	  3096	  3124#	  3126	  3155#	  3157
CSLVSL	    92#	  2733	  2769	  2832	  2929	  3014	  3036	  3062	  3085
CSR0	    52#	   968	   973	  1001	  1017	  1043	  1057	  1059	  1080	  1150	  1201	  1216	  1218	  1896
	  2720	  2734	  2736	  2753	  2770	  2776	  2792	  2814	  2833	  2839	  2930	  2990	  3015	  3027
	  3037	  3063	  3067	  3086	  3090	  3116	  3119	  3146	  3149
CSR1	    53#	   715	   717	   772	   805	   829	   873	   912	   970	   998	  1033	  1035	  1130	  1132
	  1180	  1289	  1359	  1432	  1438	  1440	  1487	  1489	  1737	  1739	  1829	  1834	  1869	  1874
	  1924	  1939	  1994	  1996	  2036	  2041	  2073	  2078	  2080	  2120	  2150	  2156	  2200	  2202
	  2225	  2227	  2267	  2312	  2318	  2320	  2358	  2360	  2381	  2383	  2406	  2408	  2447	  2492
	  2500	  2502	  2542	  2544	  2564	  2566	  2588	  2590	  2627	  2714	  2806	  2878	  2976	  3082
CUADLP	  2981#	  2994
CUADR1	  3060#	  3075
CUADR2	  3083#	  3098
CUADRS	   180#	   299	   386	  1812	  1850	  1854	  1891	  1895	  1901	  1905	  1907	  1916	  1930	  1934
	  1948	  1952	  1954	  1963	  1981	  1985	  2010	  2014	  2024	  2028	  2058	  2062	  2091	  2095
	  2097	  2106	  2129	  2133	  2139	  2143	  2164	  2168	  2186	  2190	  2211	  2215	  2236	  2240
	  2242	  2251	  2278	  2282	  2288	  2292	  2302	  2306	  2327	  2331	  2346	  2350	  2368	  2372
	  2391	  2395	  2416	  2420	  2422	  2431	  2459	  2463	  2469	  2473	  2482	  2486	  2509	  2513
	  2530	  2534	  2551	  2555	  2573	  2577	  2597	  2601	  2603	  2612	  2641	  2645	  2657	  2661
	  2677	  2681	  2687	  2696	  2725	  2729	  2740	  2744	  2760	  2764	  2780	  2784	  2796	  2800
	  2819	  2823	  2844	  2848	  2852	  2861	  2885	  2889	  2899	  2903	  2916	  2920	  2942	  2946
	  2950	  2959	  2996	  3000	  3048	  3071	  3075	  3094	  3098	  3100	  3109	  3124	  3128	  3130
	  3139	  3155	  3159	  3161
CUINT1	  1923#	  1934
CUINT2	  1938#	  1952
CURSEN	   119#	  2121	  2153	  2173	  2195	  2222	  2270	  2313	  2315	  2336	  2355	  2378	  2401	  2452
	  2495	  2520	  2585	  2628
CUSTAT	    67#	  2633	  2650	  2668
CUTRM1	  1866#	  1895	  1905
DATIN	   143#
DATINL	   172#	  1576	  1835	  1875	  1940	  1997	  2042
DATOUT	   121#
DB	   238#
DBEVEN	   241#
DBPAR	   239#
DBPARE	   240#
DCLP	  3016#	  3032
DEVRD	   722	  1036	  1125	  1484	  1496	  1827	  1832	  1867	  1872	  1977	  2039	  2076	  3197#
DEVWR	   718	  1073	  1492	  1732	  1830	  1870	  1975	  2037	  2074	  3205#
DIHISP	    97#	   716	  1034	  1131	  1179	  1439	  1488	  1738	  1833	  1873	  1923	  1938	  1995	  2040
	  2079
DIMUX	   123#
DISACK	   122#	  1655	  1690	  1763	  1784	  1839	  1999	  2044	  2050
DISIN	   141#
DISINL	   170#
DONE	   202#
DPINIT	   720	  1494	  1734	  1831	  1871	  1976	  2038	  2075	  3292#
DPPE	    82#
DPPELP	  1234#	  1254	  1257
DRHI	    63#
DRLO	    59#	  1237	  1641
DTD	   208#	   517	   562	  3207
EBL	   203#
EDIT	     2#	     2	   484
ELOOPC	   625	   630#
END	  3163	  3299#
EPATS	   876	  3410#
ERLP	   604#	   732	   742	   839	   886	   896	   924	   935	   978	   988	  1006	  1022	  1048	  1064
	  1086	  1140	  1155	  1165	  1191	  1206	  1223	  1250	  1321	  1402	  1503	  1514	  1524	  1535
	  1545	  1556	  1566	  1584	  1594	  1604	  1615	  1625	  1636	  1645	  1664	  1680	  1702	  1744
	  1755	  1771	  1794	  1850	  1853	  1891	  1894	  1901	  1904	  1930	  1933	  1948	  1951	  1981
	  1984	  2010	  2013	  2024	  2027	  2058	  2061	  2091	  2094	  2129	  2132	  2139	  2142	  2164
	  2167	  2186	  2189	  2211	  2214	  2236	  2239	  2278	  2281	  2288	  2291	  2302	  2305	  2327
	  2330	  2346	  2349	  2368	  2371	  2391	  2394	  2416	  2419	  2459	  2462	  2469	  2472	  2482
	  2485	  2509	  2512	  2530	  2533	  2551	  2554	  2573	  2576	  2597	  2600	  2644	  2660	  2680
	  2725	  2728	  2740	  2743	  2760	  2763	  2780	  2783	  2796	  2799	  2819	  2822	  2844	  2847
	  2885	  2888	  2899	  2902	  2916	  2919	  2942	  2945	  2996	  2999	  3071	  3074	  3094	  3097
	  3124	  3127	  3155	  3158
ERLP0	   605#	  3305
ERLPA	   615#	  1854	  1895	  1905	  1934	  1952	  1985	  2014	  2028	  2062	  2095	  2133	  2143	  2168
	  2190	  2215	  2240	  2282	  2292	  2306	  2331	  2350	  2372	  2395	  2420	  2463	  2473	  2486
	  2513	  2534	  2555	  2577	  2601	  2645	  2661	  2681	  2729	  2744	  2764	  2784	  2800	  2823
	  2848	  2889	  2903	  2920	  2946	  3000	  3075	  3098	  3128	  3159
ERLPA0	   616#
ERLPH	  1853	  1894	  1904	  1933	  1951	  1984	  2013	  2027	  2061	  2094	  2132	  2142	  2167	  2189
	  2214	  2239	  2281	  2291	  2305	  2330	  2349	  2371	  2394	  2419	  2462	  2472	  2485	  2512
	  2533	  2554	  2576	  2600	  2728	  2743	  2763	  2783	  2799	  2822	  2847	  2888	  2902	  2919
	  2945	  2999	  3074	  3097	  3127	  3158	  3304#
ERLPM	   609#	   789	   819	  1451	  1854	  1895	  1905	  1934	  1952	  1985	  2014	  2028	  2062	  2095
	  2133	  2143	  2168	  2190	  2215	  2240	  2282	  2292	  2306	  2331	  2350	  2372	  2395	  2420
	  2463	  2473	  2486	  2513	  2534	  2555	  2577	  2601	  2641	  2644	  2657	  2660	  2677	  2680
	  2729	  2744	  2764	  2784	  2800	  2823	  2848	  2889	  2903	  2920	  2946	  3000	  3075	  3098
	  3128	  3159
ERLPM0	   610#	  3308
ERLPMH	  2644	  2660	  2680	  3307#
ERRCA	   613	   620#
ERRCHK	   575#	   605	   610	   616
ERRCOM	   607	   622#
ERRSET	   569#	   731	   741	   788	   818	   838	   885	   895	   923	   934	   977	   987	  1005	  1021
	  1047	  1063	  1085	  1139	  1154	  1164	  1190	  1205	  1222	  1249	  1320	  1401	  1450	  1502
	  1513	  1523	  1534	  1544	  1555	  1565	  1583	  1593	  1603	  1614	  1624	  1635	  1644	  1663
	  1679	  1701	  1743	  1754	  1770	  1793	  3310
ERSETH	  1849	  1890	  1900	  1929	  1947	  1980	  2009	  2023	  2057	  2090	  2128	  2138	  2163	  2185
	  2210	  2235	  2277	  2287	  2301	  2326	  2345	  2367	  2390	  2415	  2458	  2468	  2481	  2508
	  2529	  2550	  2572	  2596	  2640	  2656	  2676	  2724	  2739	  2759	  2779	  2795	  2818	  2843
	  2884	  2898	  2915	  2941	  2995	  3070	  3093	  3123	  3154	  3310#
ESDO1	  2034#	  2062
ESDO2	  2071#	  2095
EVPAR	    98#	   872	   997	  1179	  2975
EXC	   204#
EXFER	    80#
EXTBUS	    99#
F0	   192#
F1	   193#
F2	   194#
F3	   195#
F4	   196#
FLT10	  1295#	  1325	  1328
FLT16	  2668#	  2681	  2684
FLTO	  3330#
FLTZ	  1233	  3322#
FLTZA	  3338#
FLTZB	  3352#
FLTZC	  3366#
FLTZD	  3374#
FLTZE	  3384#
FLTZF	  3392#
FLTZG	  2667	  3404#
FN	   191#
GO	   190#
HALTIO	   153#
HLDOTL	   163#
HLDOUT	   111#
HLTIO1	  2446#	  2486
HLTIO2	  2491#	  2513
HLTIO3	  2518#	  2534
HLTIO4	  2539#	  2555
HLTIO5	  2561#	  2577
HLTIO6	  2585#	  2601
HSDPIN	   176#	  3294
I	   901	   940	  1255	  1326	  1372	  2682
ILF	   210#
INADR	   275#
INIT	   278#	   502	  3167
INIT1	   714#	   736	   746
INITL	   712	   726	  1015	  1120	  1259	  1482	  1730	  1826	  1866	  1922	  1925	  1942	  1974	  2034
	  2071	  2118	  2265	  2296	  2445	  2477	  2712	  2791	  2876	  2974	  3167#
INT0	   265#
INT1	   266#
INT2	   267#
INT3	   268#
IOSEL	   274#	   487	   503	   505	   529	   531	   534	   548	   550	   554	   674	   696	  1239	  1243
	  1310	  1317	  1391	  1398	  3041	  3047	  3168	  3170	  3198	  3202	  3206	  3210	  3214	  3217
	  3221	  3224	  3293	  3296
LOADDR	  1490	  3189#
LOOPEN	   101#	   714	   716	   804	   872	   911	   969	   997	  1032	  1034	  1129	  1131	  1179	  1288
	  1358	  1437	  1439	  1486	  1488	  1736	  1738	  1828	  1833	  1868	  1873	  1938	  1993	  1995
	  2035	  2040	  2072	  2077	  2079	  2119	  2149	  2155	  2199	  2201	  2224	  2226	  2266	  2311
	  2317	  2319	  2357	  2359	  2380	  2382	  2405	  2407	  2446	  2491	  2499	  2501	  2541	  2543
	  2563	  2565	  2587	  2589	  2626	  2713	  2805	  2877	  2975	  3081
LOWADR	  2991	  3008#
LPADR	   732#	   735	   742#	   745	   789#	   792	   819#	   822	   839#	   842	   886#	   889	   896#	   899
	   924#	   927	   935#	   938	   978#	   981	   988#	   991	  1006#	  1009	  1022#	  1025	  1048#	  1051
	  1064#	  1067	  1086#	  1089	  1140#	  1143	  1155#	  1158	  1165#	  1168	  1191#	  1194	  1206#	  1209
	  1223#	  1226	  1250#	  1253	  1321#	  1324	  1402#	  1405	  1451#	  1454	  1503#	  1506	  1514#	  1517
	  1524#	  1527	  1535#	  1538	  1545#	  1548	  1556#	  1559	  1566#	  1569	  1584#	  1587	  1594#	  1597
	  1604#	  1607	  1615#	  1618	  1625#	  1628	  1636#	  1639	  1645#	  1648	  1664#	  1667	  1680#	  1683
	  1702#	  1705	  1744#	  1747	  1755#	  1758	  1771#	  1774	  1794#	  1797	  1850#	  1853	  1854	  1891#
	  1894	  1895	  1901#	  1904	  1905	  1930#	  1933	  1934	  1948#	  1951	  1952	  1981#	  1984	  1985
	  2010#	  2013	  2014	  2024#	  2027	  2028	  2058#	  2061	  2062	  2091#	  2094	  2095	  2129#	  2132
	  2133	  2139#	  2142	  2143	  2164#	  2167	  2168	  2186#	  2189	  2190	  2211#	  2214	  2215	  2236#
	  2239	  2240	  2278#	  2281	  2282	  2288#	  2291	  2292	  2302#	  2305	  2306	  2327#	  2330	  2331
	  2346#	  2349	  2350	  2368#	  2371	  2372	  2391#	  2394	  2395	  2416#	  2419	  2420	  2459#	  2462
	  2463	  2469#	  2472	  2473	  2482#	  2485	  2486	  2509#	  2512	  2513	  2530#	  2533	  2534	  2551#
	  2554	  2555	  2573#	  2576	  2577	  2597#	  2600	  2601	  2641#	  2644	  2645	  2657#	  2660	  2661
	  2677#	  2680	  2681	  2725#	  2728	  2729	  2740#	  2743	  2744	  2760#	  2763	  2764	  2780#	  2783
	  2784	  2796#	  2799	  2800	  2819#	  2822	  2823	  2844#	  2847	  2848	  2885#	  2888	  2889	  2899#
	  2902	  2903	  2916#	  2919	  2920	  2942#	  2945	  2946	  2996#	  2999	  3000	  3071#	  3074	  3075
	  3094#	  3097	  3098	  3124#	  3127	  3128	  3155#	  3158	  3159
MAR	  1363	  1368
MK0IN	   130#
MK0INL	   160#
MK1IN	   131#
MK1INL	   161#
MKPE	    84#
MOD360	   100#	  1738
MPDB0	   228#
MPDB1	   232#
MPDB2	   236#
MPDTR	   220#
MPECR	   216#	   515	   594	   648	   659
MPERR	   211#	   562	   600
MPGP0	   245#	   532	   676
MPGP1	   246#	   677	   698
MPGP10	   253#
MPGP11	   254#
MPGP12	   255#	  1241	  1312	  1394	  3043	  3222
MPGP13	   256#	  1392	  3045
MPGP14	   257#	  1313	  1396
MPGP15	   258#	  1315
MPGP16	   259#
MPGP17	   260#
MPGP2	   247#
MPGP3	   248#
MPGP4	   249#	   612	   619
MPGP5	   250#	   621
MPGP6	   251#	   507	  3215
MPGP7	   252#
MPHVR	   224#
MPSCR0	   188#	   488	   492
MPSCR1	   201#	   516	   521	   560	   564	   679	  3200	  3208
MPSTAT	   264#
MTRIN	   134#
MTROUT	   109#
NOFAIL	   585	   587#
NRTN	   551#	   606	   611	   617	   668
NXBIT	  3029#	  3038
NXTBNK	  1801	  1804#
NXTLOC	  1292#	  1331
OCC	   209#
OFFGO	   508	   514#	   626	   630	   652
ONLINE	   102#
OPATS	   915	  3414#
OPLIN	   129#
OPLINL	   159#	  2151	  2197	  2403	  2630
OPLOUT	   118#	  2268	  2270	  2313	  2336	  2338	  2378	  2401	  2450	  2452	  2495	  2520	  2522
OUTADR	   276#
PARLP1	   877#	   890	   900	   903
PARLP2	   916#	   928	   939	   942
PATS	  1294	  3320#
PNT	   329#	   732	   742	   789	   819	   839	   886	   896	   924	   935	   978	   988	  1006	  1022
	  1048	  1064	  1086	  1140	  1155	  1165	  1191	  1206	  1223	  1250	  1321	  1402	  1451	  1503
	  1514	  1524	  1535	  1545	  1556	  1566	  1584	  1594	  1604	  1615	  1625	  1636	  1645	  1664
	  1680	  1702	  1744	  1755	  1771	  1794	  1850	  1891	  1901	  1930	  1948	  1981	  2010	  2024
	  2058	  2091	  2129	  2139	  2164	  2186	  2211	  2236	  2278	  2288	  2302	  2327	  2346	  2368
	  2391	  2416	  2459	  2469	  2482	  2509	  2530	  2551	  2573	  2597	  2641	  2657	  2677	  2725
	  2740	  2760	  2780	  2796	  2819	  2844	  2885	  2899	  2916	  2942	  2996	  3071	  3094	  3124
	  3155
RAMADR	  1360	  1366	  3418#
RD2BYT	  3251#
RDAMK1	  3243#
RDB0OD	   891	   929	  3231#
RDBRP0	   880	   919	  3227#
RDCUIN	  1498	  1578	  1926	  3267#
RDDPPE	  1135	  1185	  1244	  3283#
RDDSRQ	  1508	  1599	  1740	  3279#
RDENSD	  1978	  2005	  2020	  2054	  2087	  3271#
RDIT	  3229	  3233	  3237	  3241	  3245	  3249	  3253	  3257	  3261	  3265	  3269	  3273	  3277	  3281
	  3285	  3287#
RDODDE	  3247#
RDRDLY	   728	  1529	  3263#
RDRRDY	  1540	  1609	  3255#
RDSDRQ	  1519	  1749	  3275#
RDSEX	  3235#
RDSLRQ	   737	  1550	  1620	  3259#
RDTSFF	  2881	  2895	  2912	  2937	  3239#
REG16A	  2649#	  2661
REPORT	   580	   592#
REPTU	   667#	   747	   844	   943	  1091	  1261	  1333	  1410	  1456	  1707	  1799	  3312
REPTUH	  1906	  1953	  2096	  2241	  2421	  2602	  2686	  2851	  2949	  3099	  3129	  3160	  3312#
REQIN	   142#
REQINL	   171#	  2001	  2003	  2046	  2048	  2050	  2153	  2222	  2268	  2270	  2313	  2336	  2338	  2355
	  2401
RESIOS	   553#	   627	   631	   653
RHDATA	   298	   366	  1812	  1850	  1854	  1891	  1895	  1901	  1905	  1907	  1916	  1930	  1934	  1948
	  1952	  1954	  1963	  1981	  1985	  2010	  2014	  2024	  2028	  2058	  2062	  2091	  2095	  2097
	  2106	  2129	  2133	  2139	  2143	  2164	  2168	  2186	  2190	  2211	  2215	  2236	  2240	  2242
	  2251	  2278	  2282	  2288	  2292	  2302	  2306	  2327	  2331	  2346	  2350	  2368	  2372	  2391
	  2395	  2416	  2420	  2422	  2431	  2459	  2463	  2469	  2473	  2482	  2486	  2509	  2513	  2530
	  2534	  2551	  2555	  2573	  2577	  2597	  2601	  2603	  2612	  2641	  2645	  2657	  2661	  2677
	  2681	  2687	  2696	  2725	  2729	  2740	  2744	  2760	  2764	  2780	  2784	  2796	  2800	  2819
	  2823	  2844	  2848	  2852	  2861	  2885	  2889	  2899	  2903	  2916	  2920	  2942	  2946	  2950
	  2959	  2996	  3000	  3048	  3071	  3075	  3094	  3098	  3100	  3109	  3124	  3128	  3130	  3139
	  3155	  3159	  3161
RMADRI	  1368#	  1406	  1408
RMADRO	  1362#	  1374
RMDONE	  1365	  1410#
RPTCNT	    47#	   542
RUN	   189#
SAVIOS	   548#	   587	   592	   646	   657
SELIN	   135#
SELINL	   164#	  2717	  2750	  2771	  2773	  2809	  2811	  2830	  2836	  2879	  2910	  2933	  2981	  2988
	  3016	  3024	  3060	  3064	  3083	  3087
SELOUT	   113#
SELRST	   151#
SENDAD	   638#
SETATA	   560#	   623	   650
SETDAT	   878	   917	  3220#
SETPNT	   870	  1123	  1286	  1356	  3213#
SETRD	   642#
SETRDB	   644#
SETWRT	   640#
SLRST1	  2266#	  2306
SLRST2	  2311#	  2331
SLRST3	  2336#	  2350
SLRST4	  2357#	  2372
SLRST5	  2380#	  2395
SLRST6	  2405#	  2420
SLVSEL	    87#
SLVSL1	  2771#	  2800
SLVSL2	  2733#	  2764
SLVSL3	  2769#	  2784
SLVSL4	  2805#	  2823
SLVSL5	  2830#	  2848
SNDADH	  3048	  3314#
SPABTS	   147#
SPAD1	   804#	   823
SPAD2	   828#	   843
SPADLP	   777#	   793	   797
SPADR	    58#	   778	   781	   807	   813	   831	   834	  1296	  1302	  1376	  1379	  1383	  1434	  1589
	  1844	  1884	  1943	  2124	  2158	  2180	  2204	  2229	  2273	  2297	  2322	  2341	  2362	  2385
	  2410	  2455	  2478	  2504	  2525	  2546	  2568	  2592	  2635	  2652	  2670	  3228	  3232	  3236
	  3240	  3244	  3248	  3252	  3256	  3260	  3264	  3268	  3272	  3276	  3280	  3284
SPDAHI	    65#
SPDALO	    61#	   779	   832	  1300	  1378	  1381	  1436
SPEN	    96#	   771	   804	  1288	  1358
SPRES	   277#	   502
SRVIN	   140#
SRVINL	   169#	   724	   808	  1038	  1075	  1133	  1183	  1303	  1384	  1441	  1672	  1780	  1881	  2003
	  2018	  2048	  2081
SRVOUT	   107#
STAIN	   136#
STAINL	   165#	  1841	  1879	  2052	  2083
START	   207#
SUPOUT	   120#	  2715	  2807	  2893	  2931
SYRST1	  2119#	  2168
SYRST2	  2173#	  2190
SYRST3	  2199#	  2215
SYRST4	  2224#	  2240
SYSRST	   152#
TAGIN0	    56#
TAGIN1	    57#
TEST0I	   526#	  3302
TESTI	   527#	   700	   756	   853	   952	  1101	  1270	  1342	  1419	  1465	  1716
TESTIH	  1811	  1915	  1962	  2105	  2250	  2430	  2611	  2695	  2860	  2958	  3108	  3138	  3301#
TIMOUT	    81#
TMREN	   112#
TODOUT	   124#
TOHOUT	   133#	  2539	  2717	  2748	  2750	  2773	  2811	  2836	  2879	  2933	  2988	  3024	  3064	  3087
TOR0	    54#	  1842	  1880	  2053	  2084	  2152	  2176	  2198	  2221	  2404	  2449	  2494	  2498	  2519
	  2540	  2562	  2584	  2631	  2711	  2718	  2749	  2751	  2772	  2774	  2790	  2810	  2812	  2831
	  2837	  2850	  2875	  2880	  2911	  2928	  2934	  2948	  2978	  2982	  2989	  3017	  3025	  3061
	  3065	  3084	  3088
TOR1	    55#	   725	   809	   811	  1039	  1041	  1076	  1078	  1134	  1178	  1184	  1304	  1306	  1385
	  1387	  1442	  1444	  1561	  1577	  1630	  1654	  1656	  1658	  1673	  1675	  1689	  1691	  1693
	  1764	  1766	  1781	  1783	  1785	  1787	  1836	  1838	  1840	  1876	  1878	  1882	  1941	  1998
	  2000	  2002	  2004	  2019	  2043	  2045	  2047	  2049	  2051	  2082	  2086	  2122	  2154	  2174
	  2178	  2196	  2223	  2269	  2271	  2314	  2316	  2337	  2339	  2356	  2379	  2402	  2451	  2453
	  2496	  2521	  2523	  2586	  2629	  2716	  2808	  2835	  2894	  2909	  2932	  2936	  3287
TOSOUT	   125#
TSFF1	  2927#	  2946
TST	   701#	   748	   757#	   845	   854#	   944	   953#	   982	   992	  1010	  1026	  1092	  1102#	  1144
	  1159	  1169	  1195	  1210	  1227	  1262	  1271#	  1334	  1343#	  1411	  1420#	  1455	  1457	  1466#
	  1507	  1518	  1528	  1539	  1549	  1560	  1570	  1588	  1598	  1608	  1619	  1629	  1640	  1649
	  1668	  1684	  1706	  1708	  1717#	  1748	  1759	  1775	  1798	  1800	  1812#	  1854	  1907	  1916#
	  1954	  1963#	  1985	  2014	  2028	  2097	  2106#	  2133	  2143	  2242	  2251#	  2282	  2292	  2422
	  2431#	  2463	  2473	  2603	  2612#	  2645	  2687	  2696#	  2729	  2744	  2852	  2861#	  2889	  2903
	  2920	  2950	  2959#	  3000	  3100	  3109#	  3128	  3130	  3139#	  3159	  3161
TST175	   701	   702#
TST176	   757	   758#
TST177	   854	   855#
TST178	   953	   954#
TST179	  1102	  1103#
TST180	  1271	  1272#
TST181	  1343	  1344#
TST182	  1420	  1421#
TST183	  1466	  1467#
TST184	  1717	  1718#
TST185	  1812	  1813#
TST186	  1916	  1917#
TST187	  1963	  1964#
TST188	  2106	  2107#
TST189	  2251	  2252#
TST190	  2431	  2432#
TST191	  2612	  2613#
TST192	  2696	  2697#
TST193	  2861	  2862#
TST194	  2959	  2960#
TST195	  3109	  3110#
TST196	  3139	  3140#
TSTART	   509	   684#
UBPE	    83#
VERSIO	     2#	     2	   484
WAIT	  3177#
WAITGO	   488#	   491	   624	   651	   680
WAITI	  3181#	  3183
WAITO	  3179#	  3186
WCLK	   197#
Z	   270#
ZRTN	   628#	   985	  1162
ZRTNH	  2136	  2285	  2466	  3165#
%ADRH	   389#	  1812	  1812#	  1850	  1850#	  1854	  1854#	  1891	  1891#	  1895	  1895#	  1901	  1901#	  1905
	  1905#	  1907	  1907#	  1916	  1916#	  1930	  1930#	  1934	  1934#	  1948	  1948#	  1952	  1952#	  1954
	  1954#	  1963	  1963#	  1981	  1981#	  1985	  1985#	  2010	  2010#	  2014	  2014#	  2024	  2024#	  2028
	  2028#	  2058	  2058#	  2062	  2062#	  2091	  2091#	  2095	  2095#	  2097	  2097#	  2106	  2106#	  2129
	  2129#	  2133	  2133#	  2139	  2139#	  2143	  2143#	  2164	  2164#	  2168	  2168#	  2186	  2186#	  2190
	  2190#	  2211	  2211#	  2215	  2215#	  2236	  2236#	  2240	  2240#	  2242	  2242#	  2251	  2251#	  2278
	  2278#	  2282	  2282#	  2288	  2288#	  2292	  2292#	  2302	  2302#	  2306	  2306#	  2327	  2327#	  2331
	  2331#	  2346	  2346#	  2350	  2350#	  2368	  2368#	  2372	  2372#	  2391	  2391#	  2395	  2395#	  2416
	  2416#	  2420	  2420#	  2422	  2422#	  2431	  2431#	  2459	  2459#	  2463	  2463#	  2469	  2469#	  2473
	  2473#	  2482	  2482#	  2486	  2486#	  2509	  2509#	  2513	  2513#	  2530	  2530#	  2534	  2534#	  2551
	  2551#	  2555	  2555#	  2573	  2573#	  2577	  2577#	  2597	  2597#	  2601	  2601#	  2603	  2603#	  2612
	  2612#	  2641	  2641#	  2645	  2645#	  2657	  2657#	  2661	  2661#	  2677	  2677#	  2681	  2681#	  2687
	  2687#	  2696	  2696#	  2725	  2725#	  2729	  2729#	  2740	  2740#	  2744	  2744#	  2760	  2760#	  2764
	  2764#	  2780	  2780#	  2784	  2784#	  2796	  2796#	  2800	  2800#	  2819	  2819#	  2823	  2823#	  2844
	  2844#	  2848	  2848#	  2852	  2852#	  2861	  2861#	  2885	  2885#	  2889	  2889#	  2899	  2899#	  2903
	  2903#	  2916	  2916#	  2920	  2920#	  2942	  2942#	  2946	  2946#	  2950	  2950#	  2959	  2959#	  2996
	  2996#	  3000	  3000#	  3049	  3049#	  3071	  3071#	  3075	  3075#	  3094	  3094#	  3098	  3098#	  3100
	  3100#	  3109	  3109#	  3124	  3124#	  3128	  3128#	  3130	  3130#	  3139	  3139#	  3155	  3155#	  3159
	  3159#	  3161	  3161#	  3301	  3304	  3307	  3310	  3312	  3314	  3318
%EMES	   701#	   734	   737	   737#	   744	   747	   747#	   757#	   791	   794	   794#	   821	   824	   824#
	   841	   844	   844#	   854#	   888	   891	   891#	   898	   901	   901#	   926	   929	   929#	   937
	   940	   940#	   953#	   980	   983	   983#	   990	   993	   993#	  1008	  1011	  1011#	  1024	  1027
	  1027#	  1050	  1053	  1053#	  1066	  1069	  1069#	  1088	  1091	  1091#	  1102#	  1142	  1145	  1145#
	  1157	  1160	  1160#	  1167	  1170	  1170#	  1193	  1196	  1196#	  1208	  1211	  1211#	  1225	  1228
	  1228#	  1252	  1255	  1255#	  1271#	  1323	  1326	  1326#	  1343#	  1404	  1407	  1407#	  1420#	  1453
	  1456	  1456#	  1466#	  1505	  1508	  1508#	  1516	  1519	  1519#	  1526	  1529	  1529#	  1537	  1540
	  1540#	  1547	  1550	  1550#	  1558	  1561	  1561#	  1568	  1571	  1571#	  1586	  1589	  1589#	  1596
	  1599	  1599#	  1606	  1609	  1609#	  1617	  1620	  1620#	  1627	  1630	  1630#	  1638	  1641	  1641#
	  1647	  1650	  1650#	  1666	  1669	  1669#	  1682	  1685	  1685#	  1704	  1707	  1707#	  1717#	  1746
	  1749	  1749#	  1757	  1760	  1760#	  1773	  1776	  1776#	  1796	  1799	  1799#	  1812#	  1852	  1855
	  1855#	  1893	  1896	  1896#	  1903	  1906	  1906#	  1916#	  1932	  1935	  1935#	  1950	  1953	  1953#
	  1963#	  1983	  1986	  1986#	  2012	  2015	  2015#	  2026	  2029	  2029#	  2060	  2063	  2063#	  2093
	  2096	  2096#	  2106#	  2131	  2134	  2134#	  2141	  2144	  2144#	  2166	  2169	  2169#	  2188	  2191
	  2191#	  2213	  2216	  2216#	  2238	  2241	  2241#	  2251#	  2280	  2283	  2283#	  2290	  2293	  2293#
	  2304	  2307	  2307#	  2329	  2332	  2332#	  2348	  2351	  2351#	  2370	  2373	  2373#	  2393	  2396
	  2396#	  2418	  2421	  2421#	  2431#	  2461	  2464	  2464#	  2471	  2474	  2474#	  2484	  2487	  2487#
	  2511	  2514	  2514#	  2532	  2535	  2535#	  2553	  2556	  2556#	  2575	  2578	  2578#	  2599	  2602
	  2602#	  2612#	  2643	  2646	  2646#	  2659	  2662	  2662#	  2679	  2682	  2682#	  2696#	  2727	  2730
	  2730#	  2742	  2745	  2745#	  2762	  2765	  2765#	  2782	  2785	  2785#	  2798	  2801	  2801#	  2821
	  2824	  2824#	  2846	  2849	  2849#	  2861#	  2887	  2890	  2890#	  2901	  2904	  2904#	  2918	  2921
	  2921#	  2944	  2947	  2947#	  2959#	  2998	  3001	  3001#	  3073	  3076	  3076#	  3096	  3099	  3099#
	  3109#	  3126	  3129	  3129#	  3139#	  3157	  3160	  3160#
%REQ	   297#	   299#	   637
%TNUM	   295#	   695	   699	   701#	   755	   757#	   852	   854#	   951	   953#	  1100	  1102#	  1269	  1271#
	  1341	  1343#	  1418	  1420#	  1464	  1466#	  1715	  1717#	  1810	  1812#	  1914	  1916#	  1961	  1963#
	  2104	  2106#	  2249	  2251#	  2429	  2431#	  2610	  2612#	  2694	  2696#	  2859	  2861#	  2957	  2959#
	  3107	  3109#	  3137	  3139#
.ERROR	   576	   577

DATI	   488	   492	   516	   529	   548	   560	   781	   813	   834	   971	   973	   999	  1001	  1017
	  1043	  1059	  1080	  1150	  1201	  1218	  1237	  1308	  1389	  1446	  1561	  1589	  1630	  1641
	  1658	  1675	  1693	  1766	  1787	  1844	  1884	  1896	  1943	  2124	  2158	  2180	  2204	  2229
	  2273	  2297	  2322	  2341	  2362	  2385	  2410	  2455	  2478	  2504	  2525	  2546	  2568	  2592
	  2635	  2652	  2670	  2720	  2736	  2753	  2776	  2792	  2814	  2839	  2990	  3027	  3067	  3090
	  3117	  3119	  3147	  3149	  3287
DECR	   667	   794	   795	   901	   940	  1255	  1326	  1329	  2682	  3030	  3181	  3184
DEFTST	   302#	   689
ERLOOP	   349#	   733	   743	   790	   820	   840	   887	   897	   925	   936	   979	   989	  1007	  1023
	  1049	  1065	  1087	  1141	  1156	  1166	  1192	  1207	  1224	  1251	  1322	  1403	  1452	  1504
	  1515	  1525	  1536	  1546	  1557	  1567	  1585	  1595	  1605	  1616	  1626	  1637	  1646	  1665
	  1681	  1703	  1745	  1756	  1772	  1795	  1851	  1892	  1902	  1931	  1949	  1982	  2011	  2025
	  2059	  2092	  2130	  2140	  2165	  2187	  2212	  2237	  2279	  2289	  2303	  2328	  2347	  2369
	  2392	  2417	  2460	  2470	  2483	  2510	  2531	  2552	  2574	  2598	  2642	  2658	  2678	  2726
	  2741	  2761	  2781	  2797	  2820	  2845	  2886	  2900	  2917	  2943	  2997	  3072	  3095	  3125
	  3156
ERRMAC	   332#	   731	   741	   788	   818	   838	   885	   895	   923	   934	   977	   987	  1005	  1021
	  1047	  1063	  1085	  1139	  1154	  1164	  1190	  1205	  1222	  1249	  1320	  1401	  1450	  1502
	  1513	  1523	  1534	  1544	  1555	  1565	  1583	  1593	  1603	  1614	  1624	  1635	  1644	  1663
	  1679	  1701	  1743	  1754	  1770	  1793	  1849	  1890	  1900	  1929	  1947	  1980	  2009	  2023
	  2057	  2090	  2128	  2138	  2163	  2185	  2210	  2235	  2277	  2287	  2301	  2326	  2345	  2367
	  2390	  2415	  2458	  2468	  2481	  2508	  2529	  2550	  2572	  2596	  2640	  2656	  2676	  2724
	  2739	  2759	  2779	  2795	  2818	  2843	  2884	  2898	  2915	  2941	  2995	  3070	  3093	  3123
	  3154
ERROR	   341#	   731	   741	   838	   884	   894	   922	   933	   976	   987	  1004	  1021	  1046	  1063
	  1084	  1138	  1153	  1164	  1189	  1204	  1222	  1248	  1320	  1401	  1501	  1512	  1522	  1533
	  1543	  1554	  1564	  1582	  1592	  1602	  1613	  1623	  1634	  1643	  1660	  1678	  1696	  1743
	  1752	  1768	  1789	  1848	  1888	  1899	  1929	  1947	  1980	  2008	  2022	  2056	  2090	  2128
	  2138	  2163	  2185	  2209	  2234	  2276	  2287	  2301	  2326	  2345	  2366	  2389	  2414	  2457
	  2468	  2481	  2508	  2529	  2549	  2571	  2595	  2722	  2739	  2756	  2778	  2795	  2817	  2842
	  2883	  2897	  2915	  2940	  2995	  3070	  3093	  3123	  3154
ERRORA	   345#
ERRORD	   347#
ERRORM	   343#	   787	   817	  1449	  2640	  2656	  2675
GOINK	   391#	   700	   731	   735	   741	   745	   747	   756	   788	   792	   818	   822	   838	   842
	   844	   853	   885	   889	   895	   899	   923	   927	   934	   938	   943	   952	   977	   981
	   987	   991	  1005	  1009	  1021	  1025	  1047	  1051	  1063	  1067	  1085	  1089	  1091	  1101
	  1139	  1143	  1154	  1158	  1164	  1168	  1190	  1194	  1205	  1209	  1222	  1226	  1249	  1253
	  1261	  1270	  1320	  1324	  1333	  1342	  1401	  1405	  1410	  1419	  1450	  1454	  1456	  1465
	  1502	  1506	  1513	  1517	  1523	  1527	  1534	  1538	  1544	  1548	  1555	  1559	  1565	  1569
	  1583	  1587	  1593	  1597	  1603	  1607	  1614	  1618	  1624	  1628	  1635	  1639	  1644	  1648
	  1663	  1667	  1679	  1683	  1701	  1705	  1707	  1716	  1743	  1747	  1754	  1758	  1770	  1774
	  1793	  1797	  1799	  1811	  1849	  1853	  1890	  1894	  1900	  1904	  1906	  1915	  1929	  1933
	  1947	  1951	  1953	  1962	  1980	  1984	  2009	  2013	  2023	  2027	  2057	  2061	  2090	  2094
	  2096	  2105	  2128	  2132	  2138	  2142	  2163	  2167	  2185	  2189	  2210	  2214	  2235	  2239
	  2241	  2250	  2277	  2281	  2287	  2291	  2301	  2305	  2326	  2330	  2345	  2349	  2367	  2371
	  2390	  2394	  2415	  2419	  2421	  2430	  2458	  2462	  2468	  2472	  2481	  2485	  2508	  2512
	  2529	  2533	  2550	  2554	  2572	  2576	  2596	  2600	  2602	  2611	  2640	  2644	  2656	  2660
	  2676	  2680	  2686	  2695	  2724	  2728	  2739	  2743	  2759	  2763	  2779	  2783	  2795	  2799
	  2818	  2822	  2843	  2847	  2851	  2860	  2884	  2888	  2898	  2902	  2915	  2919	  2941	  2945
	  2949	  2958	  2995	  2999	  3048	  3070	  3074	  3093	  3097	  3099	  3108	  3123	  3127	  3129
	  3138	  3154	  3158	  3160
GOSUB	   712	   718	   720	   722	   726	   728	   737	   870	   878	   880	   891	   917	   919	   929
	  1015	  1036	  1073	  1120	  1123	  1125	  1135	  1185	  1244	  1259	  1286	  1356	  1482	  1484
	  1490	  1492	  1494	  1496	  1498	  1508	  1519	  1529	  1540	  1550	  1578	  1599	  1609	  1620
	  1730	  1732	  1734	  1740	  1749
INCR	  1362	  1372	  1407	  2992
JMP	   491	   499	   509	   541	   607	   613	   639	   641	   643	   661	   681	   740	   797	   883
	   903	   932	   942	  1020	  1062	  1083	  1188	  1221	  1247	  1257	  1328	  1331	  1371	  1408
	  1511	  1532	  1553	  1581	  1612	  1633	  1677	  1802	  1847	  1887	  1898	  1928	  1946	  2007
	  2089	  2162	  2184	  2208	  2233	  2300	  2325	  2344	  2365	  2388	  2413	  2480	  2507	  2528
	  2548	  2570	  2594	  2684	  2738	  2755	  2794	  2816	  2841	  2914	  2939	  2994	  3032	  3038
	  3069	  3092	  3122	  3153	  3163	  3183	  3186	  3229	  3233	  3237	  3241	  3245	  3249	  3253
	  3257	  3261	  3265	  3269	  3273	  3277	  3281	  3285	  3300	  3303	  3306	  3309	  3311	  3313
	  3317
JMPB0	   490	   495	   497	   625	   730	   739	   882	   893	   921	   931	   975	  1003	  1019	  1045
	  1061	  1082	  1137	  1187	  1246	  1500	  1510	  1521	  1531	  1542	  1552	  1563	  1580	  1601
	  1611	  1622	  1632	  1659	  1676	  1695	  1742	  1751	  1767	  1788	  1927	  1945	  1979	  2006
	  2021	  2055	  2088	  2127	  2161	  2183	  2207	  2232	  2275	  2299	  2324	  2343	  2364	  2387
	  2412	  2456	  2479	  2506	  2527	  2547	  2569	  2593	  2721	  2737	  2754	  2777	  2793	  2815
	  2840	  2882	  2896	  2913	  2938	  2991	  3028	  3068	  3091	  3152
JMPB4	   539	  1152	  1203	  1220	  1591	  1846	  1886	  3121
JMPB7	   576	   580	  1897
JMPC	  2993
JMPI	   985	  1162	  2136	  2285	  2466
JMPSUB	   508	   587	   592	   605	   610	   616	   623	   624	   626	   627	   630	   631	   646	   650
	   651	   652	   653	   657	   680	   700	   713	   719	   721	   723	   727	   729	   731	   735
	   738	   741	   745	   747	   756	   788	   792	   818	   822	   838	   842	   844	   853	   871
	   879	   881	   885	   889	   892	   895	   899	   918	   920	   923	   927	   930	   934	   938
	   943	   952	   977	   981	   987	   991	  1005	  1009	  1016	  1021	  1025	  1037	  1047	  1051
	  1063	  1067	  1074	  1085	  1089	  1091	  1101	  1121	  1124	  1126	  1136	  1139	  1143	  1154
	  1158	  1164	  1168	  1186	  1190	  1194	  1205	  1209	  1222	  1226	  1245	  1249	  1253	  1260
	  1261	  1270	  1287	  1320	  1324	  1333	  1342	  1357	  1401	  1405	  1410	  1419	  1450	  1454
	  1456	  1465	  1483	  1485	  1491	  1493	  1495	  1497	  1499	  1502	  1506	  1509	  1513	  1517
	  1520	  1523	  1527	  1530	  1534	  1538	  1541	  1544	  1548	  1551	  1555	  1559	  1565	  1569
	  1579	  1583	  1587	  1593	  1597	  1600	  1603	  1607	  1610	  1614	  1618	  1621	  1624	  1628
	  1635	  1639	  1644	  1648	  1663	  1667	  1679	  1683	  1701	  1705	  1707	  1716	  1731	  1733
	  1735	  1741	  1743	  1747	  1750	  1754	  1758	  1770	  1774	  1793	  1797	  1799	  1811	  1826
	  1827	  1830	  1831	  1832	  1849	  1853	  1866	  1867	  1870	  1871	  1872	  1890	  1894	  1900
	  1904	  1906	  1915	  1922	  1925	  1926	  1929	  1933	  1942	  1947	  1951	  1953	  1962	  1974
	  1975	  1976	  1977	  1978	  1980	  1984	  2005	  2009	  2013	  2020	  2023	  2027	  2034	  2037
	  2038	  2039	  2054	  2057	  2061	  2071	  2074	  2075	  2076	  2087	  2090	  2094	  2096	  2105
	  2118	  2128	  2132	  2138	  2142	  2163	  2167	  2185	  2189	  2210	  2214	  2235	  2239	  2241
	  2250	  2265	  2277	  2281	  2287	  2291	  2296	  2301	  2305	  2326	  2330	  2345	  2349	  2367
	  2371	  2390	  2394	  2415	  2419	  2421	  2430	  2445	  2458	  2462	  2468	  2472	  2477	  2481
	  2485	  2508	  2512	  2529	  2533	  2550	  2554	  2572	  2576	  2596	  2600	  2602	  2611	  2640
	  2644	  2656	  2660	  2676	  2680	  2686	  2695	  2712	  2724	  2728	  2739	  2743	  2759	  2763
	  2779	  2783	  2791	  2795	  2799	  2818	  2822	  2843	  2847	  2851	  2860	  2876	  2881	  2884
	  2888	  2895	  2898	  2902	  2912	  2915	  2919	  2937	  2941	  2945	  2949	  2958	  2974	  2995
	  2999	  3048	  3070	  3074	  3093	  3097	  3099	  3108	  3123	  3127	  3129	  3138	  3154	  3158
	  3160
JMPZ	   585	   606	   611	   617	   668	   736	   746	   748	   786	   793	   796	   816	   823	   837
	   843	   845	   890	   900	   902	   928	   939	   941	   944	   982	   986	   992	  1010	  1026
	  1052	  1068	  1090	  1092	  1144	  1159	  1163	  1169	  1195	  1210	  1227	  1254	  1256	  1262
	  1319	  1325	  1327	  1330	  1334	  1365	  1370	  1374	  1400	  1406	  1411	  1448	  1455	  1457
	  1507	  1518	  1528	  1539	  1549	  1560	  1570	  1588	  1598	  1608	  1619	  1629	  1640	  1642
	  1649	  1668	  1684	  1706	  1708	  1748	  1759	  1775	  1798	  1800	  1854	  1895	  1905	  1907
	  1934	  1952	  1954	  1985	  2014	  2028	  2062	  2095	  2097	  2133	  2137	  2143	  2168	  2190
	  2215	  2240	  2242	  2282	  2286	  2292	  2306	  2331	  2350	  2372	  2395	  2420	  2422	  2463
	  2467	  2473	  2486	  2513	  2534	  2555	  2577	  2601	  2603	  2639	  2645	  2655	  2661	  2674
	  2681	  2683	  2687	  2729	  2744	  2764	  2784	  2800	  2823	  2848	  2852	  2889	  2903	  2920
	  2946	  2950	  3000	  3031	  3075	  3098	  3100	  3128	  3130	  3159	  3161	  3182	  3185
JUMP	  1801	  3299	  3302	  3305	  3308	  3310	  3312	  3316
LANDB	   563	   583	   598	   784
LANDBR	   518	   536	   582	   596	   783	  2637	  2672
LANDMR	   835	  2653
LDBR	   486	   498	   500	   502	   504	   506	   514	   517	   519	   535	   540	   542	   549	   562
	   569	   581	   588	   595	   597	   600	   638	   640	   642	   644	   649	   660	   673	   675
	   678	   695	   697	   699	   712	   714	   716	   718	   720	   722	   724	   726	   728	   734
	   737	   744	   755	   771	   773	   775	   782	   791	   804	   806	   808	   810	   821	   828
	   841	   852	   870	   872	   874	   878	   880	   888	   891	   898	   911	   913	   917	   919
	   926	   929	   937	   951	   967	   969	   980	   990	   997	  1008	  1015	  1024	  1032	  1034
	  1036	  1038	  1040	  1050	  1056	  1066	  1073	  1075	  1077	  1088	  1100	  1120	  1123	  1125
	  1127	  1129	  1131	  1133	  1135	  1142	  1157	  1167	  1177	  1179	  1181	  1183	  1185	  1193
	  1208	  1215	  1225	  1231	  1238	  1242	  1244	  1252	  1259	  1269	  1286	  1288	  1290	  1292
	  1297	  1303	  1305	  1309	  1316	  1323	  1341	  1356	  1358	  1360	  1366	  1377	  1380	  1384
	  1386	  1390	  1397	  1404	  1418	  1431	  1437	  1439	  1441	  1443	  1453	  1464	  1482	  1484
	  1486	  1488	  1490	  1492	  1494	  1496	  1498	  1505	  1508	  1516	  1519	  1526	  1529	  1537
	  1540	  1547	  1550	  1558	  1568	  1576	  1578	  1586	  1596	  1599	  1606	  1609	  1617	  1620
	  1627	  1638	  1647	  1653	  1655	  1666	  1672	  1682	  1688	  1690	  1704	  1715	  1730	  1732
	  1734	  1736	  1738	  1740	  1746	  1749	  1757	  1763	  1773	  1780	  1782	  1784	  1796	  1801
	  1810	  1828	  1833	  1835	  1837	  1839	  1841	  1852	  1868	  1873	  1875	  1877	  1879	  1881
	  1893	  1903	  1914	  1923	  1932	  1938	  1940	  1950	  1961	  1983	  1993	  1995	  1997	  1999
	  2001	  2003	  2012	  2018	  2026	  2035	  2040	  2042	  2044	  2046	  2048	  2050	  2052	  2060
	  2072	  2077	  2079	  2081	  2083	  2085	  2093	  2104	  2119	  2121	  2131	  2141	  2149	  2151
	  2153	  2155	  2166	  2173	  2175	  2177	  2188	  2195	  2197	  2199	  2201	  2213	  2220	  2222
	  2224	  2226	  2238	  2249	  2266	  2268	  2270	  2280	  2290	  2304	  2311	  2313	  2315	  2317
	  2319	  2329	  2336	  2338	  2348	  2355	  2357	  2359	  2370	  2378	  2380	  2382	  2393	  2401
	  2403	  2405	  2407	  2418	  2429	  2446	  2448	  2450	  2452	  2461	  2471	  2484	  2491	  2493
	  2495	  2497	  2499	  2501	  2511	  2518	  2520	  2522	  2532	  2539	  2541	  2543	  2553	  2561
	  2563	  2565	  2575	  2583	  2585	  2587	  2589	  2599	  2610	  2626	  2628	  2630	  2636	  2643
	  2659	  2665	  2671	  2679	  2694	  2710	  2713	  2715	  2717	  2727	  2733	  2742	  2748	  2750
	  2762	  2769	  2771	  2773	  2782	  2789	  2798	  2805	  2807	  2809	  2811	  2821	  2830	  2832
	  2834	  2836	  2846	  2849	  2859	  2874	  2877	  2879	  2887	  2893	  2901	  2908	  2910	  2918
	  2927	  2929	  2931	  2933	  2935	  2944	  2947	  2957	  2975	  2977	  2979	  2981	  2983	  2988
	  2998	  3008	  3010	  3012	  3014	  3016	  3024	  3036	  3040	  3046	  3055	  3060	  3062	  3064
	  3073	  3081	  3083	  3085	  3087	  3096	  3107	  3115	  3126	  3137	  3145	  3157	  3167	  3169
	  3177	  3179	  3189	  3192	  3197	  3199	  3201	  3205	  3207	  3209	  3213	  3216	  3220	  3223
	  3227	  3231	  3235	  3239	  3243	  3247	  3251	  3255	  3259	  3263	  3267	  3271	  3275	  3279
	  3283	  3292	  3295	  3299	  3302	  3305	  3308	  3310	  3312	  3314	  3316
LDMAR	   527	   868	   876	   915	  1233	  1284	  1294	  1354	  2625	  2667	  3171
LDMARX	   528
LDMEM	   530	   814	   830	   869	  1122	  1285	  1355	  1435	  2632	  2649	  3020	  3172
LORB	   520
LORBR	   561	   570	   599	  3035
LORCB	  2986	  3022	  3058
LORCM	  1299
LXORB	  3019
MOV	   526	   533	   537	   553	   575	   593	   618	   620	   622	   647	   658	   777	  1240	  1295
	  1301	  1311	  1314	  1363	  1368	  1375	  1382	  1393	  1395	  1399	  2985	  3018	  3034	  3042
	  3044	  3057
MOVB	   487	   501	   503	   505	   507	   515	   521	   532	   534	   543	   550	   554	   564	   589
	   594	   601	   604	   609	   615	   619	   621	   645	   648	   656	   659	   674	   676	   677
	   679	   696	   698	   715	   717	   725	   772	   774	   776	   778	   779	   805	   807	   809
	   811	   829	   832	   873	   875	   912	   914	   968	   970	   998	  1033	  1035	  1039	  1041
	  1057	  1076	  1078	  1128	  1130	  1132	  1134	  1148	  1178	  1180	  1182	  1184	  1199	  1216
	  1232	  1235	  1239	  1241	  1243	  1289	  1291	  1293	  1296	  1298	  1300	  1302	  1304	  1306
	  1310	  1312	  1315	  1317	  1359	  1361	  1367	  1376	  1378	  1381	  1383	  1385	  1387	  1391
	  1394	  1396	  1398	  1432	  1433	  1434	  1438	  1440	  1442	  1444	  1487	  1489	  1577	  1654
	  1656	  1673	  1689	  1691	  1737	  1739	  1764	  1781	  1783	  1785	  1829	  1834	  1836	  1838
	  1840	  1842	  1869	  1874	  1876	  1878	  1880	  1882	  1924	  1939	  1941	  1994	  1996	  1998
	  2000	  2002	  2004	  2019	  2036	  2041	  2043	  2045	  2047	  2049	  2051	  2053	  2073	  2078
	  2080	  2082	  2084	  2086	  2120	  2122	  2150	  2152	  2154	  2156	  2174	  2176	  2178	  2196
	  2198	  2200	  2202	  2221	  2223	  2225	  2227	  2267	  2269	  2271	  2312	  2314	  2316	  2318
	  2320	  2337	  2339	  2356	  2358	  2360	  2379	  2381	  2383	  2402	  2404	  2406	  2408	  2447
	  2449	  2451	  2453	  2492	  2494	  2496	  2498	  2500	  2502	  2519	  2521	  2523	  2540	  2542
	  2544	  2562	  2564	  2566	  2584	  2586	  2588	  2590	  2627	  2629	  2631	  2666	  2711	  2714
	  2716	  2718	  2734	  2749	  2751	  2770	  2772	  2774	  2790	  2806	  2808	  2810	  2812	  2831
	  2833	  2835	  2837	  2850	  2875	  2878	  2880	  2894	  2909	  2911	  2928	  2930	  2932	  2934
	  2936	  2948	  2976	  2978	  2980	  2982	  2984	  2987	  2989	  3009	  3011	  3013	  3015	  3017
	  3023	  3025	  3037	  3041	  3043	  3045	  3047	  3056	  3059	  3061	  3063	  3065	  3082	  3084
	  3086	  3088	  3116	  3146	  3168	  3170	  3178	  3180	  3190	  3191	  3193	  3198	  3200	  3202
	  3206	  3208	  3210	  3214	  3217	  3221	  3224	  3228	  3232	  3236	  3240	  3244	  3248	  3252
	  3256	  3260	  3264	  3268	  3272	  3276	  3280	  3284	  3293	  3294	  3296	  3301	  3304	  3307
	  3315
MOVMEM	   531	   612	   831	   877	   916	  1234	  1313	  1364	  1373	  1379	  1392	  1436	  2633	  2650
	  2668	  3021	  3215	  3222
NAME	     2#	     2
NOP	   780	   812	   833	   972	  1000	  1042	  1058	  1079	  1149	  1200	  1217	  1236	  1307	  1388
	  1445	  1657	  1674	  1692	  1765	  1786	  1843	  1883	  2123	  2157	  2179	  2203	  2228	  2272
	  2321	  2340	  2361	  2384	  2409	  2454	  2503	  2524	  2545	  2567	  2591	  2634	  2651	  2669
	  2719	  2735	  2752	  2775	  2813	  2838	  3026	  3066	  3089	  3118	  3148
OSB	   584
OSM	   785	   815	   836	  1318	  1369	  1447	  2638	  2654	  2673
REPEAT	   362#	   747	   844	   943	  1091	  1261	  1333	  1410	  1456	  1707	  1799	  1906	  1953	  2096
	  2241	  2421	  2602	  2686	  2851	  2949	  3099	  3129	  3160
RETURN	   512	   522	   544	   551	   555	   565	   571	   578	   586	   590	   602	   628	   632	   654
	   669	  3165	  3173	  3187	  3194	  3203	  3211	  3218	  3225	  3290	  3297
SHL	   579	  1590	  1845	  1885	  1944	  3120
SHLR	  3029
SHR	   489	   493	   494	   496	   511	   538	   974	  1002	  1018	  1044	  1060	  1081	  1151	  1202
	  1219	  1562	  1631	  1694	  2125	  2126	  2159	  2160	  2181	  2182	  2205	  2206	  2230	  2231
	  2274	  2298	  2323	  2342	  2363	  2386	  2411	  2505	  2526	  3150	  3151	  3288	  3289
SNDADR	   387#	  3048
TEST	   689#	   690	   750	   847	   946	  1095	  1264	  1336	  1413	  1459	  1710	  1805	  1909	  1956
	  2099	  2244	  2424	  2605	  2689	  2854	  2952	  3102	  3132
.ECRAM	   451#	  3299
.END	  3424
.INIT	   481
.LOC	  1803
.MEM	  3318
    